============================================================================================================================================
RECALL FIX EXPERIMENT:   Pre-Filter vs Post-Filter (OLD) vs Post-Filter (FIXED)
============================================================================================================================================

Timestamp: 2025-12-18 13:16:04.094273
============================================================================================================================================

[1/3] Initializing engine...

[2/3] Test queries: 5
  1. 'laptop computer high quality'
  2. 'wireless bluetooth headphones'
  3. 'gaming mouse RGB'
  4. 'USB cable charger'
  5. 'smartphone case protective'

[3/3] Defining test cases...

Total:  5 queries × 16 filters = 80 tests

============================================================================================================================================
RUNNING EXPERIMENTS
============================================================================================================================================

============================================================================================================================================
QUERY 1/5: 'laptop computer high quality'
============================================================================================================================================

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 1/16: price > $2000 (expected ~0.03% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 0.01%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=1):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 24       | 1.3108     | $2080.00   | ✅     

  Avg distance: 1.3108
  Filter pass: 1/1 ✅
  Time: 0.180ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=0):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------

  Avg distance: 0.0000
  Filter pass: 0/0 ✅
  Time: 1.523ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=0):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------

  Avg distance: 0.0000
  Filter pass: 0/0 ✅
  Time: 1.219ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.180ms   (1/10 results, avg dist: 1.3108)
    Post-OLD:             1.523ms   (0/10 results, avg dist: 0.0000)
    Post-FIXED:           1.219ms   (0/10 results, avg dist: 0.0000)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (1/10)
    Post-FIXED vs Pre:   6.79x slower, 0/1 recall
    Post-FIXED vs OLD:   0.80x slower, +0 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 2/16: price > $1000 (expected ~0.09% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 0.04%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=4):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8830     | 1.2238     | $1999.99   | ✅     
  2      | 24       | 1.3108     | $2080.00   | ✅     
  3      | 6373     | 1.4111     | $1097.79   | ✅     
  4      | 550      | 1.4278     | $1056.26   | ✅     

  Avg distance: 1.3434
  Filter pass: 4/4 ✅
  Time: 0.043ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=1):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8830     | 1.2238     | $1999.99   | ✅     

  Avg distance: 1.2238
  Filter pass: 1/1 ✅
  Time: 0.780ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=1):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8830     | 1.2238     | $1999.99   | ✅     

  Avg distance: 1.2238
  Filter pass: 1/1 ✅
  Time: 1.177ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.043ms   (4/10 results, avg dist: 1.3434)
    Post-OLD:             0.780ms   (1/10 results, avg dist: 1.2238)
    Post-FIXED:           1.177ms   (1/10 results, avg dist: 1.2238)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (4/10)
    Post-FIXED vs Pre:   27.53x slower, 1/4 recall
    Post-FIXED vs OLD:   1.51x slower, +0 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 3/16: price > $500 (expected ~0.25% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 0.15%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8830     | 1.2238     | $1999.99   | ✅     
  2      | 9011     | 1.2321     | $724.99    | ✅     
  3      | 24       | 1.3108     | $2080.00   | ✅     
  4      | 9314     | 1.3178     | $999.00    | ✅     
  5      | 8152     | 1.3516     | $698.00    | ✅     
  6      | 8157     | 1.3546     | $689.00    | ✅     
  7      | 8151     | 1.3815     | $548.00    | ✅     
  8      | 7230     | 1.3920     | $899.95    | ✅     
  9      | 6384     | 1.3990     | $549.99    | ✅     
  10     | 8807     | 1.4049     | $980.99    | ✅     

  Avg distance: 1.3368
  Filter pass: 10/10 ✅
  Time: 0.205ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=1):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8830     | 1.2238     | $1999.99   | ✅     

  Avg distance: 1.2238
  Filter pass: 1/1 ✅
  Time: 0.682ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=1):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8830     | 1.2238     | $1999.99   | ✅     

  Avg distance: 1.2238
  Filter pass: 1/1 ✅
  Time: 1.164ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.205ms   (10/10 results, avg dist: 1.3368)
    Post-OLD:             0.682ms   (1/10 results, avg dist: 1.2238)
    Post-FIXED:           1.164ms   (1/10 results, avg dist: 1.2238)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   5.68x slower, 1/10 recall
    Post-FIXED vs OLD:   1.71x slower, +0 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 4/16: price > $300 (expected ~0.57% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 0.26%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8830     | 1.2238     | $1999.99   | ✅     
  2      | 9011     | 1.2321     | $724.99    | ✅     
  3      | 453      | 1.2583     | $395.00    | ✅     
  4      | 3499     | 1.2625     | $445.99    | ✅     
  5      | 7018     | 1.2956     | $453.00    | ✅     
  6      | 6469     | 1.3040     | $309.00    | ✅     
  7      | 8506     | 1.3093     | $419.00    | ✅     
  8      | 24       | 1.3108     | $2080.00   | ✅     
  9      | 9314     | 1.3178     | $999.00    | ✅     
  10     | 8152     | 1.3516     | $698.00    | ✅     

  Avg distance: 1.2866
  Filter pass: 10/10 ✅
  Time: 0.048ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=1):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8830     | 1.2238     | $1999.99   | ✅     

  Avg distance: 1.2238
  Filter pass: 1/1 ✅
  Time: 0.847ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=4):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8830     | 1.2238     | $1999.99   | ✅     
  2      | 453      | 1.2583     | $395.00    | ✅     
  3      | 6918     | 1.3928     | $311.82    | ✅     
  4      | 912      | 1.4207     | $499.96    | ✅     

  Avg distance: 1.3239
  Filter pass: 4/4 ✅
  Time: 1.317ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.048ms   (10/10 results, avg dist: 1.2866)
    Post-OLD:             0.847ms   (1/10 results, avg dist: 1.2238)
    Post-FIXED:           1.317ms   (4/10 results, avg dist: 1.3239)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   27.54x slower, 4/10 recall
    Post-FIXED vs OLD:   1.55x slower, +3 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 5/16: price > $200 (expected ~0.92% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 0.50%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8830     | 1.2238     | $1999.99   | ✅     
  2      | 9011     | 1.2321     | $724.99    | ✅     
  3      | 2971     | 1.2405     | $219.00    | ✅     
  4      | 453      | 1.2583     | $395.00    | ✅     
  5      | 3499     | 1.2625     | $445.99    | ✅     
  6      | 9927     | 1.2719     | $278.88    | ✅     
  7      | 4538     | 1.2813     | $249.99    | ✅     
  8      | 8188     | 1.2833     | $249.99    | ✅     
  9      | 6127     | 1.2908     | $261.10    | ✅     
  10     | 9257     | 1.2909     | $298.00    | ✅     

  Avg distance: 1.2635
  Filter pass: 10/10 ✅
  Time: 0.060ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=1):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8830     | 1.2238     | $1999.99   | ✅     

  Avg distance: 1.2238
  Filter pass: 1/1 ✅
  Time: 0.615ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=5):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8830     | 1.2238     | $1999.99   | ✅     
  2      | 453      | 1.2583     | $395.00    | ✅     
  3      | 4538     | 1.2813     | $249.99    | ✅     
  4      | 6918     | 1.3928     | $311.82    | ✅     
  5      | 912      | 1.4207     | $499.96    | ✅     

  Avg distance: 1.3154
  Filter pass: 5/5 ✅
  Time: 1.168ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.060ms   (10/10 results, avg dist: 1.2635)
    Post-OLD:             0.615ms   (1/10 results, avg dist: 1.2238)
    Post-FIXED:           1.168ms   (5/10 results, avg dist: 1.3154)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   19.37x slower, 5/10 recall
    Post-FIXED vs OLD:   1.90x slower, +4 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 6/16: price > $150 (expected ~1.28% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 0.88%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5919     | 1.0699     | $153.75    | ✅     
  2      | 8507     | 1.1906     | $175.00    | ✅     
  3      | 9943     | 1.1966     | $189.00    | ✅     
  4      | 9013     | 1.2147     | $200.00    | ✅     
  5      | 9988     | 1.2164     | $199.00    | ✅     
  6      | 9801     | 1.2225     | $174.00    | ✅     
  7      | 8830     | 1.2238     | $1999.99   | ✅     
  8      | 9798     | 1.2279     | $199.00    | ✅     
  9      | 9011     | 1.2321     | $724.99    | ✅     
  10     | 8009     | 1.2378     | $199.00    | ✅     

  Avg distance: 1.2032
  Filter pass: 10/10 ✅
  Time: 0.082ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=3):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5919     | 1.0699     | $153.75    | ✅     
  2      | 8507     | 1.1906     | $175.00    | ✅     
  3      | 9943     | 1.1966     | $189.00    | ✅     

  Avg distance: 1.1524
  Filter pass: 3/3 ✅
  Time: 0.605ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=9):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5919     | 1.0699     | $153.75    | ✅     
  2      | 8507     | 1.1906     | $175.00    | ✅     
  3      | 9943     | 1.1966     | $189.00    | ✅     
  4      | 9801     | 1.2225     | $174.00    | ✅     
  5      | 8830     | 1.2238     | $1999.99   | ✅     
  6      | 453      | 1.2583     | $395.00    | ✅     
  7      | 4538     | 1.2813     | $249.99    | ✅     
  8      | 6918     | 1.3928     | $311.82    | ✅     
  9      | 912      | 1.4207     | $499.96    | ✅     

  Avg distance: 1.2507
  Filter pass: 9/9 ✅
  Time: 1.164ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.082ms   (10/10 results, avg dist: 1.2032)
    Post-OLD:             0.605ms   (3/10 results, avg dist: 1.1524)
    Post-FIXED:           1.164ms   (9/10 results, avg dist: 1.2507)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   14.18x slower, 9/10 recall
    Post-FIXED vs OLD:   1.92x slower, +6 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 7/16: price > $100 (expected ~1.85% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 1.42%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5919     | 1.0699     | $153.75    | ✅     
  2      | 8507     | 1.1906     | $175.00    | ✅     
  3      | 9943     | 1.1966     | $189.00    | ✅     
  4      | 9013     | 1.2147     | $200.00    | ✅     
  5      | 9988     | 1.2164     | $199.00    | ✅     
  6      | 9801     | 1.2225     | $174.00    | ✅     
  7      | 8830     | 1.2238     | $1999.99   | ✅     
  8      | 6879     | 1.2278     | $102.01    | ✅     
  9      | 9798     | 1.2279     | $199.00    | ✅     
  10     | 9011     | 1.2321     | $724.99    | ✅     

  Avg distance: 1.2022
  Filter pass: 10/10 ✅
  Time: 0.060ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=3):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5919     | 1.0699     | $153.75    | ✅     
  2      | 8507     | 1.1906     | $175.00    | ✅     
  3      | 9943     | 1.1966     | $189.00    | ✅     

  Avg distance: 1.1524
  Filter pass: 3/3 ✅
  Time: 0.486ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5919     | 1.0699     | $153.75    | ✅     
  2      | 8507     | 1.1906     | $175.00    | ✅     
  3      | 9943     | 1.1966     | $189.00    | ✅     
  4      | 9801     | 1.2225     | $174.00    | ✅     
  5      | 8830     | 1.2238     | $1999.99   | ✅     
  6      | 6128     | 1.2355     | $110.00    | ✅     
  7      | 8805     | 1.2368     | $147.21    | ✅     
  8      | 453      | 1.2583     | $395.00    | ✅     
  9      | 4538     | 1.2813     | $249.99    | ✅     
  10     | 6111     | 1.3222     | $119.99    | ✅     

  Avg distance: 1.2238
  Filter pass: 10/10 ✅
  Time: 0.802ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.060ms   (10/10 results, avg dist: 1.2022)
    Post-OLD:             0.486ms   (3/10 results, avg dist: 1.1524)
    Post-FIXED:           0.802ms   (10/10 results, avg dist: 1.2238)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   13.42x slower, 10/10 recall
    Post-FIXED vs OLD:   1.65x slower, +7 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 8/16: price > $75 (expected ~2.54% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 2.15%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5919     | 1.0699     | $153.75    | ✅     
  2      | 7156     | 1.0933     | $79.99     | ✅     
  3      | 4007     | 1.1194     | $87.99     | ✅     
  4      | 5520     | 1.1570     | $78.00     | ✅     
  5      | 8507     | 1.1906     | $175.00    | ✅     
  6      | 7579     | 1.1953     | $75.99     | ✅     
  7      | 9943     | 1.1966     | $189.00    | ✅     
  8      | 3155     | 1.2090     | $75.99     | ✅     
  9      | 9589     | 1.2142     | $79.99     | ✅     
  10     | 9013     | 1.2147     | $200.00    | ✅     

  Avg distance: 1.1660
  Filter pass: 10/10 ✅
  Time: 0.071ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=6):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5919     | 1.0699     | $153.75    | ✅     
  2      | 7156     | 1.0933     | $79.99     | ✅     
  3      | 4007     | 1.1194     | $87.99     | ✅     
  4      | 5520     | 1.1570     | $78.00     | ✅     
  5      | 8507     | 1.1906     | $175.00    | ✅     
  6      | 9943     | 1.1966     | $189.00    | ✅     

  Avg distance: 1.1378
  Filter pass: 6/6 ✅
  Time: 0.443ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5919     | 1.0699     | $153.75    | ✅     
  2      | 7156     | 1.0933     | $79.99     | ✅     
  3      | 4007     | 1.1194     | $87.99     | ✅     
  4      | 5520     | 1.1570     | $78.00     | ✅     
  5      | 8507     | 1.1906     | $175.00    | ✅     
  6      | 9943     | 1.1966     | $189.00    | ✅     
  7      | 3155     | 1.2090     | $75.99     | ✅     
  8      | 9589     | 1.2142     | $79.99     | ✅     
  9      | 9801     | 1.2225     | $174.00    | ✅     
  10     | 8830     | 1.2238     | $1999.99   | ✅     

  Avg distance: 1.1696
  Filter pass: 10/10 ✅
  Time: 0.710ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.071ms   (10/10 results, avg dist: 1.1660)
    Post-OLD:             0.443ms   (6/10 results, avg dist: 1.1378)
    Post-FIXED:           0.710ms   (10/10 results, avg dist: 1.1696)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   10.04x slower, 10/10 recall
    Post-FIXED vs OLD:   1.60x slower, +4 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 9/16: price > $50 (expected ~3.68% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 3.46%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5919     | 1.0699     | $153.75    | ✅     
  2      | 7156     | 1.0933     | $79.99     | ✅     
  3      | 8743     | 1.1133     | $65.69     | ✅     
  4      | 4007     | 1.1194     | $87.99     | ✅     
  5      | 7167     | 1.1203     | $59.00     | ✅     
  6      | 9593     | 1.1359     | $54.98     | ✅     
  7      | 5520     | 1.1570     | $78.00     | ✅     
  8      | 3409     | 1.1870     | $54.99     | ✅     
  9      | 8507     | 1.1906     | $175.00    | ✅     
  10     | 7579     | 1.1953     | $75.99     | ✅     

  Avg distance: 1.1382
  Filter pass: 10/10 ✅
  Time: 0.087ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5919     | 1.0699     | $153.75    | ✅     
  2      | 7156     | 1.0933     | $79.99     | ✅     
  3      | 8743     | 1.1133     | $65.69     | ✅     
  4      | 4007     | 1.1194     | $87.99     | ✅     
  5      | 7167     | 1.1203     | $59.00     | ✅     
  6      | 9593     | 1.1359     | $54.98     | ✅     
  7      | 5520     | 1.1570     | $78.00     | ✅     
  8      | 3409     | 1.1870     | $54.99     | ✅     
  9      | 8507     | 1.1906     | $175.00    | ✅     
  10     | 2544     | 1.1955     | $57.99     | ✅     

  Avg distance: 1.1382
  Filter pass: 10/10 ✅
  Time: 0.486ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5919     | 1.0699     | $153.75    | ✅     
  2      | 7156     | 1.0933     | $79.99     | ✅     
  3      | 8743     | 1.1133     | $65.69     | ✅     
  4      | 4007     | 1.1194     | $87.99     | ✅     
  5      | 7167     | 1.1203     | $59.00     | ✅     
  6      | 9593     | 1.1359     | $54.98     | ✅     
  7      | 5520     | 1.1570     | $78.00     | ✅     
  8      | 3409     | 1.1870     | $54.99     | ✅     
  9      | 8507     | 1.1906     | $175.00    | ✅     
  10     | 2544     | 1.1955     | $57.99     | ✅     

  Avg distance: 1.1382
  Filter pass: 10/10 ✅
  Time: 0.576ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.087ms   (10/10 results, avg dist: 1.1382)
    Post-OLD:             0.486ms   (10/10 results, avg dist: 1.1382)
    Post-FIXED:           0.576ms   (10/10 results, avg dist: 1.1382)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   6.64x slower, 10/10 recall
    Post-FIXED vs OLD:   1.19x slower, +0 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 10/16: price > $40 (expected ~4.49% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 4.27%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5919     | 1.0699     | $153.75    | ✅     
  2      | 7156     | 1.0933     | $79.99     | ✅     
  3      | 8743     | 1.1133     | $65.69     | ✅     
  4      | 4007     | 1.1194     | $87.99     | ✅     
  5      | 7167     | 1.1203     | $59.00     | ✅     
  6      | 9593     | 1.1359     | $54.98     | ✅     
  7      | 5520     | 1.1570     | $78.00     | ✅     
  8      | 3409     | 1.1870     | $54.99     | ✅     
  9      | 8507     | 1.1906     | $175.00    | ✅     
  10     | 7579     | 1.1953     | $75.99     | ✅     

  Avg distance: 1.1382
  Filter pass: 10/10 ✅
  Time: 2.358ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5919     | 1.0699     | $153.75    | ✅     
  2      | 7156     | 1.0933     | $79.99     | ✅     
  3      | 8743     | 1.1133     | $65.69     | ✅     
  4      | 4007     | 1.1194     | $87.99     | ✅     
  5      | 7167     | 1.1203     | $59.00     | ✅     
  6      | 9593     | 1.1359     | $54.98     | ✅     
  7      | 5520     | 1.1570     | $78.00     | ✅     
  8      | 9414     | 1.1586     | $44.89     | ✅     
  9      | 953      | 1.1684     | $45.74     | ✅     
  10     | 3409     | 1.1870     | $54.99     | ✅     

  Avg distance: 1.1323
  Filter pass: 10/10 ✅
  Time: 0.469ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5919     | 1.0699     | $153.75    | ✅     
  2      | 7156     | 1.0933     | $79.99     | ✅     
  3      | 8743     | 1.1133     | $65.69     | ✅     
  4      | 4007     | 1.1194     | $87.99     | ✅     
  5      | 7167     | 1.1203     | $59.00     | ✅     
  6      | 9593     | 1.1359     | $54.98     | ✅     
  7      | 5520     | 1.1570     | $78.00     | ✅     
  8      | 9414     | 1.1586     | $44.89     | ✅     
  9      | 953      | 1.1684     | $45.74     | ✅     
  10     | 3409     | 1.1870     | $54.99     | ✅     

  Avg distance: 1.1323
  Filter pass: 10/10 ✅
  Time: 0.546ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            2.358ms   (10/10 results, avg dist: 1.1382)
    Post-OLD:             0.469ms   (10/10 results, avg dist: 1.1323)
    Post-FIXED:           0.546ms   (10/10 results, avg dist: 1.1323)

    Speed winner:      Post-OLD
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   0.23x slower, 10/10 recall
    Post-FIXED vs OLD:   1.16x slower, +0 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 11/16: price > $30 (expected ~5.88% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 5.52%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5919     | 1.0699     | $153.75    | ✅     
  2      | 7156     | 1.0933     | $79.99     | ✅     
  3      | 8743     | 1.1133     | $65.69     | ✅     
  4      | 4007     | 1.1194     | $87.99     | ✅     
  5      | 7167     | 1.1203     | $59.00     | ✅     
  6      | 5938     | 1.1322     | $38.16     | ✅     
  7      | 9593     | 1.1359     | $54.98     | ✅     
  8      | 3967     | 1.1371     | $31.25     | ✅     
  9      | 7578     | 1.1375     | $30.99     | ✅     
  10     | 6732     | 1.1377     | $39.99     | ✅     

  Avg distance: 1.1197
  Filter pass: 10/10 ✅
  Time: 5.781ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5919     | 1.0699     | $153.75    | ✅     
  2      | 7156     | 1.0933     | $79.99     | ✅     
  3      | 8743     | 1.1133     | $65.69     | ✅     
  4      | 4007     | 1.1194     | $87.99     | ✅     
  5      | 7167     | 1.1203     | $59.00     | ✅     
  6      | 5938     | 1.1322     | $38.16     | ✅     
  7      | 9593     | 1.1359     | $54.98     | ✅     
  8      | 3967     | 1.1371     | $31.25     | ✅     
  9      | 7578     | 1.1375     | $30.99     | ✅     
  10     | 6732     | 1.1377     | $39.99     | ✅     

  Avg distance: 1.1197
  Filter pass: 10/10 ✅
  Time: 0.480ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5919     | 1.0699     | $153.75    | ✅     
  2      | 7156     | 1.0933     | $79.99     | ✅     
  3      | 8743     | 1.1133     | $65.69     | ✅     
  4      | 4007     | 1.1194     | $87.99     | ✅     
  5      | 7167     | 1.1203     | $59.00     | ✅     
  6      | 5938     | 1.1322     | $38.16     | ✅     
  7      | 9593     | 1.1359     | $54.98     | ✅     
  8      | 3967     | 1.1371     | $31.25     | ✅     
  9      | 7578     | 1.1375     | $30.99     | ✅     
  10     | 6732     | 1.1377     | $39.99     | ✅     

  Avg distance: 1.1197
  Filter pass: 10/10 ✅
  Time: 0.493ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            5.781ms   (10/10 results, avg dist: 1.1197)
    Post-OLD:             0.480ms   (10/10 results, avg dist: 1.1197)
    Post-FIXED:           0.493ms   (10/10 results, avg dist: 1.1197)

    Speed winner:      Post-OLD
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   0.09x slower, 10/10 recall
    Post-FIXED vs OLD:   1.03x slower, +0 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 12/16: price > $25 (expected ~7.06% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 6.88%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5919     | 1.0699     | $153.75    | ✅     
  2      | 7156     | 1.0933     | $79.99     | ✅     
  3      | 8743     | 1.1133     | $65.69     | ✅     
  4      | 4007     | 1.1194     | $87.99     | ✅     
  5      | 7167     | 1.1203     | $59.00     | ✅     
  6      | 5938     | 1.1322     | $38.16     | ✅     
  7      | 9593     | 1.1359     | $54.98     | ✅     
  8      | 3967     | 1.1371     | $31.25     | ✅     
  9      | 7578     | 1.1375     | $30.99     | ✅     
  10     | 6732     | 1.1377     | $39.99     | ✅     

  Avg distance: 1.1197
  Filter pass: 10/10 ✅
  Time: 0.154ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=9):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5919     | 1.0699     | $153.75    | ✅     
  2      | 7156     | 1.0933     | $79.99     | ✅     
  3      | 8743     | 1.1133     | $65.69     | ✅     
  4      | 4007     | 1.1194     | $87.99     | ✅     
  5      | 7167     | 1.1203     | $59.00     | ✅     
  6      | 5938     | 1.1322     | $38.16     | ✅     
  7      | 9593     | 1.1359     | $54.98     | ✅     
  8      | 3967     | 1.1371     | $31.25     | ✅     
  9      | 7578     | 1.1375     | $30.99     | ✅     

  Avg distance: 1.1177
  Filter pass: 9/9 ✅
  Time: 0.353ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5919     | 1.0699     | $153.75    | ✅     
  2      | 7156     | 1.0933     | $79.99     | ✅     
  3      | 8743     | 1.1133     | $65.69     | ✅     
  4      | 4007     | 1.1194     | $87.99     | ✅     
  5      | 7167     | 1.1203     | $59.00     | ✅     
  6      | 5938     | 1.1322     | $38.16     | ✅     
  7      | 9593     | 1.1359     | $54.98     | ✅     
  8      | 3967     | 1.1371     | $31.25     | ✅     
  9      | 7578     | 1.1375     | $30.99     | ✅     
  10     | 6732     | 1.1377     | $39.99     | ✅     

  Avg distance: 1.1197
  Filter pass: 10/10 ✅
  Time: 0.673ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.154ms   (10/10 results, avg dist: 1.1197)
    Post-OLD:             0.353ms   (9/10 results, avg dist: 1.1177)
    Post-FIXED:           0.673ms   (10/10 results, avg dist: 1.1197)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   4.37x slower, 10/10 recall
    Post-FIXED vs OLD:   1.90x slower, +1 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 13/16: price > $20 (expected ~8.58% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 8.15%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5919     | 1.0699     | $153.75    | ✅     
  2      | 7156     | 1.0933     | $79.99     | ✅     
  3      | 8743     | 1.1133     | $65.69     | ✅     
  4      | 4007     | 1.1194     | $87.99     | ✅     
  5      | 7167     | 1.1203     | $59.00     | ✅     
  6      | 5938     | 1.1322     | $38.16     | ✅     
  7      | 9593     | 1.1359     | $54.98     | ✅     
  8      | 3967     | 1.1371     | $31.25     | ✅     
  9      | 7578     | 1.1375     | $30.99     | ✅     
  10     | 6732     | 1.1377     | $39.99     | ✅     

  Avg distance: 1.1197
  Filter pass: 10/10 ✅
  Time: 6.713ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5919     | 1.0699     | $153.75    | ✅     
  2      | 5672     | 1.0760     | $22.99     | ✅     
  3      | 5502     | 1.0871     | $20.85     | ✅     
  4      | 7156     | 1.0933     | $79.99     | ✅     
  5      | 8743     | 1.1133     | $65.69     | ✅     
  6      | 7565     | 1.1193     | $22.39     | ✅     
  7      | 4007     | 1.1194     | $87.99     | ✅     
  8      | 7167     | 1.1203     | $59.00     | ✅     
  9      | 5938     | 1.1322     | $38.16     | ✅     
  10     | 9593     | 1.1359     | $54.98     | ✅     

  Avg distance: 1.1067
  Filter pass: 10/10 ✅
  Time: 0.501ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5919     | 1.0699     | $153.75    | ✅     
  2      | 5672     | 1.0760     | $22.99     | ✅     
  3      | 5502     | 1.0871     | $20.85     | ✅     
  4      | 7156     | 1.0933     | $79.99     | ✅     
  5      | 8743     | 1.1133     | $65.69     | ✅     
  6      | 7565     | 1.1193     | $22.39     | ✅     
  7      | 4007     | 1.1194     | $87.99     | ✅     
  8      | 7167     | 1.1203     | $59.00     | ✅     
  9      | 5938     | 1.1322     | $38.16     | ✅     
  10     | 9593     | 1.1359     | $54.98     | ✅     

  Avg distance: 1.1067
  Filter pass: 10/10 ✅
  Time: 0.516ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            6.713ms   (10/10 results, avg dist: 1.1197)
    Post-OLD:             0.501ms   (10/10 results, avg dist: 1.1067)
    Post-FIXED:           0.516ms   (10/10 results, avg dist: 1.1067)

    Speed winner:      Post-OLD
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   0.08x slower, 10/10 recall
    Post-FIXED vs OLD:   1.03x slower, +0 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 14/16: price > $15 (expected ~12.33% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 11.57%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5919     | 1.0699     | $153.75    | ✅     
  2      | 7156     | 1.0933     | $79.99     | ✅     
  3      | 8743     | 1.1133     | $65.69     | ✅     
  4      | 4007     | 1.1194     | $87.99     | ✅     
  5      | 7167     | 1.1203     | $59.00     | ✅     
  6      | 5938     | 1.1322     | $38.16     | ✅     
  7      | 9593     | 1.1359     | $54.98     | ✅     
  8      | 3967     | 1.1371     | $31.25     | ✅     
  9      | 7578     | 1.1375     | $30.99     | ✅     
  10     | 6732     | 1.1377     | $39.99     | ✅     

  Avg distance: 1.1197
  Filter pass: 10/10 ✅
  Time: 6.790ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 3157     | 1.0588     | $16.99     | ✅     
  2      | 5919     | 1.0699     | $153.75    | ✅     
  3      | 5672     | 1.0760     | $22.99     | ✅     
  4      | 5502     | 1.0871     | $20.85     | ✅     
  5      | 5762     | 1.0904     | $15.41     | ✅     
  6      | 7156     | 1.0933     | $79.99     | ✅     
  7      | 5717     | 1.1094     | $19.99     | ✅     
  8      | 8743     | 1.1133     | $65.69     | ✅     
  9      | 7565     | 1.1193     | $22.39     | ✅     
  10     | 4007     | 1.1194     | $87.99     | ✅     

  Avg distance: 1.0937
  Filter pass: 10/10 ✅
  Time: 0.471ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 3157     | 1.0588     | $16.99     | ✅     
  2      | 5919     | 1.0699     | $153.75    | ✅     
  3      | 5672     | 1.0760     | $22.99     | ✅     
  4      | 5502     | 1.0871     | $20.85     | ✅     
  5      | 5762     | 1.0904     | $15.41     | ✅     
  6      | 7156     | 1.0933     | $79.99     | ✅     
  7      | 5717     | 1.1094     | $19.99     | ✅     
  8      | 8743     | 1.1133     | $65.69     | ✅     
  9      | 7565     | 1.1193     | $22.39     | ✅     
  10     | 4007     | 1.1194     | $87.99     | ✅     

  Avg distance: 1.0937
  Filter pass: 10/10 ✅
  Time: 0.400ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            6.790ms   (10/10 results, avg dist: 1.1197)
    Post-OLD:             0.471ms   (10/10 results, avg dist: 1.0937)
    Post-FIXED:           0.400ms   (10/10 results, avg dist: 1.0937)

    Speed winner:      Post-FIXED
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   0.06x slower, 10/10 recall
    Post-FIXED vs OLD:   0.85x slower, +0 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 15/16: price > $10 (expected ~18.0% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 15.84%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5919     | 1.0699     | $153.75    | ✅     
  2      | 7156     | 1.0933     | $79.99     | ✅     
  3      | 8743     | 1.1133     | $65.69     | ✅     
  4      | 4007     | 1.1194     | $87.99     | ✅     
  5      | 7167     | 1.1203     | $59.00     | ✅     
  6      | 5938     | 1.1322     | $38.16     | ✅     
  7      | 9593     | 1.1359     | $54.98     | ✅     
  8      | 3967     | 1.1371     | $31.25     | ✅     
  9      | 7578     | 1.1375     | $30.99     | ✅     
  10     | 6732     | 1.1377     | $39.99     | ✅     

  Avg distance: 1.1197
  Filter pass: 10/10 ✅
  Time: 6.823ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 3157     | 1.0588     | $16.99     | ✅     
  2      | 5919     | 1.0699     | $153.75    | ✅     
  3      | 5672     | 1.0760     | $22.99     | ✅     
  4      | 5502     | 1.0871     | $20.85     | ✅     
  5      | 5762     | 1.0904     | $15.41     | ✅     
  6      | 7156     | 1.0933     | $79.99     | ✅     
  7      | 5717     | 1.1094     | $19.99     | ✅     
  8      | 8743     | 1.1133     | $65.69     | ✅     
  9      | 5924     | 1.1161     | $14.09     | ✅     
  10     | 7565     | 1.1193     | $22.39     | ✅     

  Avg distance: 1.0934
  Filter pass: 10/10 ✅
  Time: 0.496ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 3157     | 1.0588     | $16.99     | ✅     
  2      | 5919     | 1.0699     | $153.75    | ✅     
  3      | 5672     | 1.0760     | $22.99     | ✅     
  4      | 5502     | 1.0871     | $20.85     | ✅     
  5      | 5762     | 1.0904     | $15.41     | ✅     
  6      | 7156     | 1.0933     | $79.99     | ✅     
  7      | 5717     | 1.1094     | $19.99     | ✅     
  8      | 8743     | 1.1133     | $65.69     | ✅     
  9      | 5924     | 1.1161     | $14.09     | ✅     
  10     | 7565     | 1.1193     | $22.39     | ✅     

  Avg distance: 1.0934
  Filter pass: 10/10 ✅
  Time: 0.390ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            6.823ms   (10/10 results, avg dist: 1.1197)
    Post-OLD:             0.496ms   (10/10 results, avg dist: 1.0934)
    Post-FIXED:           0.390ms   (10/10 results, avg dist: 1.0934)

    Speed winner:      Post-FIXED
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   0.06x slower, 10/10 recall
    Post-FIXED vs OLD:   0.79x slower, +0 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 16/16: price > $5 (expected ~25.0% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 24.02%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5919     | 1.0699     | $153.75    | ✅     
  2      | 7156     | 1.0933     | $79.99     | ✅     
  3      | 8743     | 1.1133     | $65.69     | ✅     
  4      | 4007     | 1.1194     | $87.99     | ✅     
  5      | 7167     | 1.1203     | $59.00     | ✅     
  6      | 5938     | 1.1322     | $38.16     | ✅     
  7      | 9593     | 1.1359     | $54.98     | ✅     
  8      | 3967     | 1.1371     | $31.25     | ✅     
  9      | 7578     | 1.1375     | $30.99     | ✅     
  10     | 6732     | 1.1377     | $39.99     | ✅     

  Avg distance: 1.1197
  Filter pass: 10/10 ✅
  Time: 6.795ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 3157     | 1.0588     | $16.99     | ✅     
  2      | 748      | 1.0672     | $9.99      | ✅     
  3      | 5919     | 1.0699     | $153.75    | ✅     
  4      | 5672     | 1.0760     | $22.99     | ✅     
  5      | 5502     | 1.0871     | $20.85     | ✅     
  6      | 5762     | 1.0904     | $15.41     | ✅     
  7      | 6134     | 1.0908     | $5.90      | ✅     
  8      | 7156     | 1.0933     | $79.99     | ✅     
  9      | 449      | 1.1066     | $8.95      | ✅     
  10     | 5717     | 1.1094     | $19.99     | ✅     

  Avg distance: 1.0850
  Filter pass: 10/10 ✅
  Time: 0.461ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 3157     | 1.0588     | $16.99     | ✅     
  2      | 748      | 1.0672     | $9.99      | ✅     
  3      | 5919     | 1.0699     | $153.75    | ✅     
  4      | 5672     | 1.0760     | $22.99     | ✅     
  5      | 5502     | 1.0871     | $20.85     | ✅     
  6      | 5762     | 1.0904     | $15.41     | ✅     
  7      | 6134     | 1.0908     | $5.90      | ✅     
  8      | 7156     | 1.0933     | $79.99     | ✅     
  9      | 449      | 1.1066     | $8.95      | ✅     
  10     | 5717     | 1.1094     | $19.99     | ✅     

  Avg distance: 1.0850
  Filter pass: 10/10 ✅
  Time: 0.377ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            6.795ms   (10/10 results, avg dist: 1.1197)
    Post-OLD:             0.461ms   (10/10 results, avg dist: 1.0850)
    Post-FIXED:           0.377ms   (10/10 results, avg dist: 1.0850)

    Speed winner:      Post-FIXED
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   0.06x slower, 10/10 recall
    Post-FIXED vs OLD:   0.82x slower, +0 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

============================================================================================================================================
QUERY 2/5: 'wireless bluetooth headphones'
============================================================================================================================================

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 1/16: price > $2000 (expected ~0.03% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 0.01%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=1):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 24       | 1.3507     | $2080.00   | ✅     

  Avg distance: 1.3507
  Filter pass: 1/1 ✅
  Time: 0.034ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=0):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------

  Avg distance: 0.0000
  Filter pass: 0/0 ✅
  Time: 0.647ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=0):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------

  Avg distance: 0.0000
  Filter pass: 0/0 ✅
  Time: 0.929ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.034ms   (1/10 results, avg dist: 1.3507)
    Post-OLD:             0.647ms   (0/10 results, avg dist: 0.0000)
    Post-FIXED:           0.929ms   (0/10 results, avg dist: 0.0000)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (1/10)
    Post-FIXED vs Pre:   27.47x slower, 0/1 recall
    Post-FIXED vs OLD:   1.44x slower, +0 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 2/16: price > $1000 (expected ~0.09% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 0.04%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=4):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 6373     | 1.3122     | $1097.79   | ✅     
  2      | 24       | 1.3507     | $2080.00   | ✅     
  3      | 8830     | 1.3607     | $1999.99   | ✅     
  4      | 550      | 1.4040     | $1056.26   | ✅     

  Avg distance: 1.3569
  Filter pass: 4/4 ✅
  Time: 0.030ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=0):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------

  Avg distance: 0.0000
  Filter pass: 0/0 ✅
  Time: 0.546ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=0):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------

  Avg distance: 0.0000
  Filter pass: 0/0 ✅
  Time: 0.923ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.030ms   (4/10 results, avg dist: 1.3569)
    Post-OLD:             0.546ms   (0/10 results, avg dist: 0.0000)
    Post-FIXED:           0.923ms   (0/10 results, avg dist: 0.0000)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (4/10)
    Post-FIXED vs Pre:   31.03x slower, 0/4 recall
    Post-FIXED vs OLD:   1.69x slower, +0 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 3/16: price > $500 (expected ~0.25% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 0.15%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 7230     | 1.2032     | $899.95    | ✅     
  2      | 9314     | 1.2481     | $999.00    | ✅     
  3      | 6373     | 1.3122     | $1097.79   | ✅     
  4      | 24       | 1.3507     | $2080.00   | ✅     
  5      | 8830     | 1.3607     | $1999.99   | ✅     
  6      | 9011     | 1.3702     | $724.99    | ✅     
  7      | 8153     | 1.3817     | $700.00    | ✅     
  8      | 6384     | 1.3955     | $549.99    | ✅     
  9      | 550      | 1.4040     | $1056.26   | ✅     
  10     | 8807     | 1.4054     | $980.99    | ✅     

  Avg distance: 1.3432
  Filter pass: 10/10 ✅
  Time: 0.031ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=1):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 7230     | 1.2032     | $899.95    | ✅     

  Avg distance: 1.2032
  Filter pass: 1/1 ✅
  Time: 0.511ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=1):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 7230     | 1.2032     | $899.95    | ✅     

  Avg distance: 1.2032
  Filter pass: 1/1 ✅
  Time: 0.910ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.031ms   (10/10 results, avg dist: 1.3432)
    Post-OLD:             0.511ms   (1/10 results, avg dist: 1.2032)
    Post-FIXED:           0.910ms   (1/10 results, avg dist: 1.2032)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   29.24x slower, 1/10 recall
    Post-FIXED vs OLD:   1.78x slower, +0 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 4/16: price > $300 (expected ~0.57% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 0.26%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 7230     | 1.2032     | $899.95    | ✅     
  2      | 3499     | 1.2368     | $445.99    | ✅     
  3      | 9314     | 1.2481     | $999.00    | ✅     
  4      | 6373     | 1.3122     | $1097.79   | ✅     
  5      | 9025     | 1.3330     | $404.99    | ✅     
  6      | 8506     | 1.3352     | $419.00    | ✅     
  7      | 6469     | 1.3485     | $309.00    | ✅     
  8      | 24       | 1.3507     | $2080.00   | ✅     
  9      | 8830     | 1.3607     | $1999.99   | ✅     
  10     | 7018     | 1.3633     | $453.00    | ✅     

  Avg distance: 1.3092
  Filter pass: 10/10 ✅
  Time: 0.040ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=1):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 7230     | 1.2032     | $899.95    | ✅     

  Avg distance: 1.2032
  Filter pass: 1/1 ✅
  Time: 0.544ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=1):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 7230     | 1.2032     | $899.95    | ✅     

  Avg distance: 1.2032
  Filter pass: 1/1 ✅
  Time: 0.930ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.040ms   (10/10 results, avg dist: 1.3092)
    Post-OLD:             0.544ms   (1/10 results, avg dist: 1.2032)
    Post-FIXED:           0.930ms   (1/10 results, avg dist: 1.2032)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   22.99x slower, 1/10 recall
    Post-FIXED vs OLD:   1.71x slower, +0 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 5/16: price > $200 (expected ~0.92% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 0.50%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 9232     | 1.1905     | $250.00    | ✅     
  2      | 7230     | 1.2032     | $899.95    | ✅     
  3      | 4983     | 1.2302     | $257.95    | ✅     
  4      | 3499     | 1.2368     | $445.99    | ✅     
  5      | 4879     | 1.2392     | $209.99    | ✅     
  6      | 7832     | 1.2470     | $272.94    | ✅     
  7      | 9257     | 1.2479     | $298.00    | ✅     
  8      | 9314     | 1.2481     | $999.00    | ✅     
  9      | 8589     | 1.2595     | $220.00    | ✅     
  10     | 8188     | 1.2899     | $249.99    | ✅     

  Avg distance: 1.2392
  Filter pass: 10/10 ✅
  Time: 0.047ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=2):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 7230     | 1.2032     | $899.95    | ✅     
  2      | 4879     | 1.2392     | $209.99    | ✅     

  Avg distance: 1.2212
  Filter pass: 2/2 ✅
  Time: 0.519ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=2):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 7230     | 1.2032     | $899.95    | ✅     
  2      | 4879     | 1.2392     | $209.99    | ✅     

  Avg distance: 1.2212
  Filter pass: 2/2 ✅
  Time: 0.909ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.047ms   (10/10 results, avg dist: 1.2392)
    Post-OLD:             0.519ms   (2/10 results, avg dist: 1.2212)
    Post-FIXED:           0.909ms   (2/10 results, avg dist: 1.2212)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   19.56x slower, 2/10 recall
    Post-FIXED vs OLD:   1.75x slower, +0 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 6/16: price > $150 (expected ~1.28% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 0.88%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 9232     | 1.1905     | $250.00    | ✅     
  2      | 7230     | 1.2032     | $899.95    | ✅     
  3      | 3267     | 1.2150     | $200.00    | ✅     
  4      | 9326     | 1.2287     | $155.88    | ✅     
  5      | 4983     | 1.2302     | $257.95    | ✅     
  6      | 3499     | 1.2368     | $445.99    | ✅     
  7      | 4879     | 1.2392     | $209.99    | ✅     
  8      | 7824     | 1.2397     | $199.00    | ✅     
  9      | 6516     | 1.2464     | $199.99    | ✅     
  10     | 7832     | 1.2470     | $272.94    | ✅     

  Avg distance: 1.2277
  Filter pass: 10/10 ✅
  Time: 0.069ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=3):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 7230     | 1.2032     | $899.95    | ✅     
  2      | 4879     | 1.2392     | $209.99    | ✅     
  3      | 7824     | 1.2397     | $199.00    | ✅     

  Avg distance: 1.2274
  Filter pass: 3/3 ✅
  Time: 0.513ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=3):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 7230     | 1.2032     | $899.95    | ✅     
  2      | 4879     | 1.2392     | $209.99    | ✅     
  3      | 7824     | 1.2397     | $199.00    | ✅     

  Avg distance: 1.2274
  Filter pass: 3/3 ✅
  Time: 0.714ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.069ms   (10/10 results, avg dist: 1.2277)
    Post-OLD:             0.513ms   (3/10 results, avg dist: 1.2274)
    Post-FIXED:           0.714ms   (3/10 results, avg dist: 1.2274)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   10.38x slower, 3/10 recall
    Post-FIXED vs OLD:   1.39x slower, +0 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 7/16: price > $100 (expected ~1.85% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 1.42%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 3381     | 1.0714     | $129.00    | ✅     
  2      | 7221     | 1.1635     | $137.93    | ✅     
  3      | 9210     | 1.1845     | $147.93    | ✅     
  4      | 9232     | 1.1905     | $250.00    | ✅     
  5      | 2394     | 1.2001     | $129.95    | ✅     
  6      | 7230     | 1.2032     | $899.95    | ✅     
  7      | 9351     | 1.2142     | $139.95    | ✅     
  8      | 3267     | 1.2150     | $200.00    | ✅     
  9      | 3167     | 1.2243     | $143.95    | ✅     
  10     | 9326     | 1.2287     | $155.88    | ✅     

  Avg distance: 1.1895
  Filter pass: 10/10 ✅
  Time: 0.075ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=2):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 3381     | 1.0714     | $129.00    | ✅     
  2      | 7221     | 1.1635     | $137.93    | ✅     

  Avg distance: 1.1175
  Filter pass: 2/2 ✅
  Time: 0.485ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=8):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 3381     | 1.0714     | $129.00    | ✅     
  2      | 7221     | 1.1635     | $137.93    | ✅     
  3      | 2394     | 1.2001     | $129.95    | ✅     
  4      | 7230     | 1.2032     | $899.95    | ✅     
  5      | 3167     | 1.2243     | $143.95    | ✅     
  6      | 4879     | 1.2392     | $209.99    | ✅     
  7      | 7824     | 1.2397     | $199.00    | ✅     
  8      | 7587     | 1.2486     | $129.99    | ✅     

  Avg distance: 1.1987
  Filter pass: 8/8 ✅
  Time: 0.716ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.075ms   (10/10 results, avg dist: 1.1895)
    Post-OLD:             0.485ms   (2/10 results, avg dist: 1.1175)
    Post-FIXED:           0.716ms   (8/10 results, avg dist: 1.1987)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   9.53x slower, 8/10 recall
    Post-FIXED vs OLD:   1.48x slower, +6 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 8/16: price > $75 (expected ~2.54% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 2.15%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 3381     | 1.0714     | $129.00    | ✅     
  2      | 5977     | 1.0963     | $81.52     | ✅     
  3      | 7221     | 1.1635     | $137.93    | ✅     
  4      | 9210     | 1.1845     | $147.93    | ✅     
  5      | 9232     | 1.1905     | $250.00    | ✅     
  6      | 2394     | 1.2001     | $129.95    | ✅     
  7      | 7230     | 1.2032     | $899.95    | ✅     
  8      | 8784     | 1.2111     | $98.95     | ✅     
  9      | 9351     | 1.2142     | $139.95    | ✅     
  10     | 3267     | 1.2150     | $200.00    | ✅     

  Avg distance: 1.1750
  Filter pass: 10/10 ✅
  Time: 0.062ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=3):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 3381     | 1.0714     | $129.00    | ✅     
  2      | 5977     | 1.0963     | $81.52     | ✅     
  3      | 7221     | 1.1635     | $137.93    | ✅     

  Avg distance: 1.1104
  Filter pass: 3/3 ✅
  Time: 0.393ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 3381     | 1.0714     | $129.00    | ✅     
  2      | 5977     | 1.0963     | $81.52     | ✅     
  3      | 7221     | 1.1635     | $137.93    | ✅     
  4      | 2394     | 1.2001     | $129.95    | ✅     
  5      | 7230     | 1.2032     | $899.95    | ✅     
  6      | 8784     | 1.2111     | $98.95     | ✅     
  7      | 7207     | 1.2172     | $79.95     | ✅     
  8      | 3167     | 1.2243     | $143.95    | ✅     
  9      | 4879     | 1.2392     | $209.99    | ✅     
  10     | 7824     | 1.2397     | $199.00    | ✅     

  Avg distance: 1.1866
  Filter pass: 10/10 ✅
  Time: 0.524ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.062ms   (10/10 results, avg dist: 1.1750)
    Post-OLD:             0.393ms   (3/10 results, avg dist: 1.1104)
    Post-FIXED:           0.524ms   (10/10 results, avg dist: 1.1866)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   8.44x slower, 10/10 recall
    Post-FIXED vs OLD:   1.33x slower, +7 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 9/16: price > $50 (expected ~3.68% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 3.46%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5167     | 1.0570     | $59.00     | ✅     
  2      | 3381     | 1.0714     | $129.00    | ✅     
  3      | 5977     | 1.0963     | $81.52     | ✅     
  4      | 4935     | 1.1036     | $65.35     | ✅     
  5      | 5405     | 1.1478     | $65.05     | ✅     
  6      | 7221     | 1.1635     | $137.93    | ✅     
  7      | 6004     | 1.1745     | $59.99     | ✅     
  8      | 9210     | 1.1845     | $147.93    | ✅     
  9      | 6075     | 1.1866     | $65.00     | ✅     
  10     | 9232     | 1.1905     | $250.00    | ✅     

  Avg distance: 1.1376
  Filter pass: 10/10 ✅
  Time: 0.115ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=7):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5167     | 1.0570     | $59.00     | ✅     
  2      | 3381     | 1.0714     | $129.00    | ✅     
  3      | 5977     | 1.0963     | $81.52     | ✅     
  4      | 4935     | 1.1036     | $65.35     | ✅     
  5      | 5405     | 1.1478     | $65.05     | ✅     
  6      | 7221     | 1.1635     | $137.93    | ✅     
  7      | 6004     | 1.1745     | $59.99     | ✅     

  Avg distance: 1.1163
  Filter pass: 7/7 ✅
  Time: 0.409ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5167     | 1.0570     | $59.00     | ✅     
  2      | 3381     | 1.0714     | $129.00    | ✅     
  3      | 5977     | 1.0963     | $81.52     | ✅     
  4      | 4935     | 1.1036     | $65.35     | ✅     
  5      | 5405     | 1.1478     | $65.05     | ✅     
  6      | 7221     | 1.1635     | $137.93    | ✅     
  7      | 6004     | 1.1745     | $59.99     | ✅     
  8      | 6075     | 1.1866     | $65.00     | ✅     
  9      | 2394     | 1.2001     | $129.95    | ✅     
  10     | 7230     | 1.2032     | $899.95    | ✅     

  Avg distance: 1.1404
  Filter pass: 10/10 ✅
  Time: 0.476ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.115ms   (10/10 results, avg dist: 1.1376)
    Post-OLD:             0.409ms   (7/10 results, avg dist: 1.1163)
    Post-FIXED:           0.476ms   (10/10 results, avg dist: 1.1404)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   4.16x slower, 10/10 recall
    Post-FIXED vs OLD:   1.16x slower, +3 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 10/16: price > $40 (expected ~4.49% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 4.27%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5167     | 1.0570     | $59.00     | ✅     
  2      | 3381     | 1.0714     | $129.00    | ✅     
  3      | 5977     | 1.0963     | $81.52     | ✅     
  4      | 4935     | 1.1036     | $65.35     | ✅     
  5      | 5405     | 1.1478     | $65.05     | ✅     
  6      | 7221     | 1.1635     | $137.93    | ✅     
  7      | 6004     | 1.1745     | $59.99     | ✅     
  8      | 9210     | 1.1845     | $147.93    | ✅     
  9      | 6075     | 1.1866     | $65.00     | ✅     
  10     | 9232     | 1.1905     | $250.00    | ✅     

  Avg distance: 1.1376
  Filter pass: 10/10 ✅
  Time: 2.389ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=9):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5167     | 1.0570     | $59.00     | ✅     
  2      | 3381     | 1.0714     | $129.00    | ✅     
  3      | 5977     | 1.0963     | $81.52     | ✅     
  4      | 4935     | 1.1036     | $65.35     | ✅     
  5      | 5405     | 1.1478     | $65.05     | ✅     
  6      | 7221     | 1.1635     | $137.93    | ✅     
  7      | 2389     | 1.1738     | $49.99     | ✅     
  8      | 6004     | 1.1745     | $59.99     | ✅     
  9      | 8275     | 1.1773     | $48.88     | ✅     

  Avg distance: 1.1295
  Filter pass: 9/9 ✅
  Time: 0.447ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5167     | 1.0570     | $59.00     | ✅     
  2      | 3381     | 1.0714     | $129.00    | ✅     
  3      | 5977     | 1.0963     | $81.52     | ✅     
  4      | 4935     | 1.1036     | $65.35     | ✅     
  5      | 5405     | 1.1478     | $65.05     | ✅     
  6      | 7221     | 1.1635     | $137.93    | ✅     
  7      | 2389     | 1.1738     | $49.99     | ✅     
  8      | 6004     | 1.1745     | $59.99     | ✅     
  9      | 8275     | 1.1773     | $48.88     | ✅     
  10     | 6075     | 1.1866     | $65.00     | ✅     

  Avg distance: 1.1352
  Filter pass: 10/10 ✅
  Time: 0.463ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            2.389ms   (10/10 results, avg dist: 1.1376)
    Post-OLD:             0.447ms   (9/10 results, avg dist: 1.1295)
    Post-FIXED:           0.463ms   (10/10 results, avg dist: 1.1352)

    Speed winner:      Post-OLD
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   0.19x slower, 10/10 recall
    Post-FIXED vs OLD:   1.04x slower, +1 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 11/16: price > $30 (expected ~5.88% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 5.52%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5167     | 1.0570     | $59.00     | ✅     
  2      | 3381     | 1.0714     | $129.00    | ✅     
  3      | 5977     | 1.0963     | $81.52     | ✅     
  4      | 4935     | 1.1036     | $65.35     | ✅     
  5      | 5405     | 1.1478     | $65.05     | ✅     
  6      | 4098     | 1.1633     | $30.27     | ✅     
  7      | 7221     | 1.1635     | $137.93    | ✅     
  8      | 5182     | 1.1690     | $47.75     | ✅     
  9      | 2389     | 1.1738     | $49.99     | ✅     
  10     | 6004     | 1.1745     | $59.99     | ✅     

  Avg distance: 1.1320
  Filter pass: 10/10 ✅
  Time: 5.866ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5167     | 1.0570     | $59.00     | ✅     
  2      | 3381     | 1.0714     | $129.00    | ✅     
  3      | 5977     | 1.0963     | $81.52     | ✅     
  4      | 4935     | 1.1036     | $65.35     | ✅     
  5      | 5405     | 1.1478     | $65.05     | ✅     
  6      | 4098     | 1.1633     | $30.27     | ✅     
  7      | 7221     | 1.1635     | $137.93    | ✅     
  8      | 2389     | 1.1738     | $49.99     | ✅     
  9      | 6004     | 1.1745     | $59.99     | ✅     
  10     | 8275     | 1.1773     | $48.88     | ✅     

  Avg distance: 1.1328
  Filter pass: 10/10 ✅
  Time: 0.448ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5167     | 1.0570     | $59.00     | ✅     
  2      | 3381     | 1.0714     | $129.00    | ✅     
  3      | 5977     | 1.0963     | $81.52     | ✅     
  4      | 4935     | 1.1036     | $65.35     | ✅     
  5      | 5405     | 1.1478     | $65.05     | ✅     
  6      | 4098     | 1.1633     | $30.27     | ✅     
  7      | 7221     | 1.1635     | $137.93    | ✅     
  8      | 2389     | 1.1738     | $49.99     | ✅     
  9      | 6004     | 1.1745     | $59.99     | ✅     
  10     | 8275     | 1.1773     | $48.88     | ✅     

  Avg distance: 1.1328
  Filter pass: 10/10 ✅
  Time: 0.443ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            5.866ms   (10/10 results, avg dist: 1.1320)
    Post-OLD:             0.448ms   (10/10 results, avg dist: 1.1328)
    Post-FIXED:           0.443ms   (10/10 results, avg dist: 1.1328)

    Speed winner:      Post-FIXED
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   0.08x slower, 10/10 recall
    Post-FIXED vs OLD:   0.99x slower, +0 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 12/16: price > $25 (expected ~7.06% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 6.88%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8781     | 1.0360     | $28.05     | ✅     
  2      | 5167     | 1.0570     | $59.00     | ✅     
  3      | 3381     | 1.0714     | $129.00    | ✅     
  4      | 5977     | 1.0963     | $81.52     | ✅     
  5      | 4935     | 1.1036     | $65.35     | ✅     
  6      | 6125     | 1.1216     | $26.24     | ✅     
  7      | 2424     | 1.1353     | $26.90     | ✅     
  8      | 5405     | 1.1478     | $65.05     | ✅     
  9      | 4098     | 1.1633     | $30.27     | ✅     
  10     | 7221     | 1.1635     | $137.93    | ✅     

  Avg distance: 1.1096
  Filter pass: 10/10 ✅
  Time: 0.099ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=0):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------

  Avg distance: 0.0000
  Filter pass: 0/0 ✅
  Time: 0.292ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8781     | 1.0360     | $28.05     | ✅     
  2      | 5167     | 1.0570     | $59.00     | ✅     
  3      | 3381     | 1.0714     | $129.00    | ✅     
  4      | 5977     | 1.0963     | $81.52     | ✅     
  5      | 4935     | 1.1036     | $65.35     | ✅     
  6      | 6125     | 1.1216     | $26.24     | ✅     
  7      | 2424     | 1.1353     | $26.90     | ✅     
  8      | 5405     | 1.1478     | $65.05     | ✅     
  9      | 4098     | 1.1633     | $30.27     | ✅     
  10     | 7221     | 1.1635     | $137.93    | ✅     

  Avg distance: 1.1096
  Filter pass: 10/10 ✅
  Time: 0.413ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.099ms   (10/10 results, avg dist: 1.1096)
    Post-OLD:             0.292ms   (0/10 results, avg dist: 0.0000)
    Post-FIXED:           0.413ms   (10/10 results, avg dist: 1.1096)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   4.16x slower, 10/10 recall
    Post-FIXED vs OLD:   1.41x slower, +10 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 13/16: price > $20 (expected ~8.58% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 8.15%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8781     | 1.0360     | $28.05     | ✅     
  2      | 5167     | 1.0570     | $59.00     | ✅     
  3      | 3381     | 1.0714     | $129.00    | ✅     
  4      | 5977     | 1.0963     | $81.52     | ✅     
  5      | 4935     | 1.1036     | $65.35     | ✅     
  6      | 6125     | 1.1216     | $26.24     | ✅     
  7      | 2424     | 1.1353     | $26.90     | ✅     
  8      | 5405     | 1.1478     | $65.05     | ✅     
  9      | 4098     | 1.1633     | $30.27     | ✅     
  10     | 7221     | 1.1635     | $137.93    | ✅     

  Avg distance: 1.1096
  Filter pass: 10/10 ✅
  Time: 6.989ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=0):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------

  Avg distance: 0.0000
  Filter pass: 0/0 ✅
  Time: 0.386ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8781     | 1.0360     | $28.05     | ✅     
  2      | 3378     | 1.0525     | $21.76     | ✅     
  3      | 5167     | 1.0570     | $59.00     | ✅     
  4      | 6034     | 1.0648     | $20.88     | ✅     
  5      | 3381     | 1.0714     | $129.00    | ✅     
  6      | 5977     | 1.0963     | $81.52     | ✅     
  7      | 4935     | 1.1036     | $65.35     | ✅     
  8      | 6125     | 1.1216     | $26.24     | ✅     
  9      | 2424     | 1.1353     | $26.90     | ✅     
  10     | 5405     | 1.1478     | $65.05     | ✅     

  Avg distance: 1.0886
  Filter pass: 10/10 ✅
  Time: 0.532ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            6.989ms   (10/10 results, avg dist: 1.1096)
    Post-OLD:             0.386ms   (0/10 results, avg dist: 0.0000)
    Post-FIXED:           0.532ms   (10/10 results, avg dist: 1.0886)

    Speed winner:      Post-OLD
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   0.08x slower, 10/10 recall
    Post-FIXED vs OLD:   1.38x slower, +10 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 14/16: price > $15 (expected ~12.33% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 11.57%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8781     | 1.0360     | $28.05     | ✅     
  2      | 5167     | 1.0570     | $59.00     | ✅     
  3      | 3381     | 1.0714     | $129.00    | ✅     
  4      | 5977     | 1.0963     | $81.52     | ✅     
  5      | 4935     | 1.1036     | $65.35     | ✅     
  6      | 6125     | 1.1216     | $26.24     | ✅     
  7      | 2424     | 1.1353     | $26.90     | ✅     
  8      | 5405     | 1.1478     | $65.05     | ✅     
  9      | 4098     | 1.1633     | $30.27     | ✅     
  10     | 7221     | 1.1635     | $137.93    | ✅     

  Avg distance: 1.1096
  Filter pass: 10/10 ✅
  Time: 6.740ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=1):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 4301     | 1.0221     | $17.80     | ✅     

  Avg distance: 1.0221
  Filter pass: 1/1 ✅
  Time: 0.394ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=9):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 4301     | 1.0221     | $17.80     | ✅     
  2      | 8781     | 1.0360     | $28.05     | ✅     
  3      | 4087     | 1.0514     | $15.99     | ✅     
  4      | 3378     | 1.0525     | $21.76     | ✅     
  5      | 5167     | 1.0570     | $59.00     | ✅     
  6      | 6034     | 1.0648     | $20.88     | ✅     
  7      | 3381     | 1.0714     | $129.00    | ✅     
  8      | 2791     | 1.0885     | $16.35     | ✅     
  9      | 5977     | 1.0963     | $81.52     | ✅     

  Avg distance: 1.0600
  Filter pass: 9/9 ✅
  Time: 0.369ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            6.740ms   (10/10 results, avg dist: 1.1096)
    Post-OLD:             0.394ms   (1/10 results, avg dist: 1.0221)
    Post-FIXED:           0.369ms   (9/10 results, avg dist: 1.0600)

    Speed winner:      Post-FIXED
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   0.05x slower, 9/10 recall
    Post-FIXED vs OLD:   0.94x slower, +8 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 15/16: price > $10 (expected ~18.0% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 15.84%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8781     | 1.0360     | $28.05     | ✅     
  2      | 5167     | 1.0570     | $59.00     | ✅     
  3      | 3381     | 1.0714     | $129.00    | ✅     
  4      | 5977     | 1.0963     | $81.52     | ✅     
  5      | 4935     | 1.1036     | $65.35     | ✅     
  6      | 6125     | 1.1216     | $26.24     | ✅     
  7      | 2424     | 1.1353     | $26.90     | ✅     
  8      | 5405     | 1.1478     | $65.05     | ✅     
  9      | 4098     | 1.1633     | $30.27     | ✅     
  10     | 7221     | 1.1635     | $137.93    | ✅     

  Avg distance: 1.1096
  Filter pass: 10/10 ✅
  Time: 6.757ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=4):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 446      | 0.9706     | $14.99     | ✅     
  2      | 8453     | 1.0125     | $14.94     | ✅     
  3      | 3518     | 1.0167     | $12.64     | ✅     
  4      | 4301     | 1.0221     | $17.80     | ✅     

  Avg distance: 1.0055
  Filter pass: 4/4 ✅
  Time: 0.362ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 446      | 0.9706     | $14.99     | ✅     
  2      | 8453     | 1.0125     | $14.94     | ✅     
  3      | 3518     | 1.0167     | $12.64     | ✅     
  4      | 4301     | 1.0221     | $17.80     | ✅     
  5      | 2363     | 1.0337     | $11.99     | ✅     
  6      | 8781     | 1.0360     | $28.05     | ✅     
  7      | 3448     | 1.0361     | $12.97     | ✅     
  8      | 4087     | 1.0514     | $15.99     | ✅     
  9      | 7128     | 1.0524     | $10.59     | ✅     
  10     | 3378     | 1.0525     | $21.76     | ✅     

  Avg distance: 1.0284
  Filter pass: 10/10 ✅
  Time: 0.332ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            6.757ms   (10/10 results, avg dist: 1.1096)
    Post-OLD:             0.362ms   (4/10 results, avg dist: 1.0055)
    Post-FIXED:           0.332ms   (10/10 results, avg dist: 1.0284)

    Speed winner:      Post-FIXED
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   0.05x slower, 10/10 recall
    Post-FIXED vs OLD:   0.92x slower, +6 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 16/16: price > $5 (expected ~25.0% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 24.02%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8781     | 1.0360     | $28.05     | ✅     
  2      | 5167     | 1.0570     | $59.00     | ✅     
  3      | 3381     | 1.0714     | $129.00    | ✅     
  4      | 5977     | 1.0963     | $81.52     | ✅     
  5      | 4935     | 1.1036     | $65.35     | ✅     
  6      | 6125     | 1.1216     | $26.24     | ✅     
  7      | 2424     | 1.1353     | $26.90     | ✅     
  8      | 5405     | 1.1478     | $65.05     | ✅     
  9      | 4098     | 1.1633     | $30.27     | ✅     
  10     | 7221     | 1.1635     | $137.93    | ✅     

  Avg distance: 1.1096
  Filter pass: 10/10 ✅
  Time: 6.900ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8        | 0.8105     | $7.99      | ✅     
  2      | 4398     | 0.9679     | $7.99      | ✅     
  3      | 446      | 0.9706     | $14.99     | ✅     
  4      | 9040     | 0.9771     | $8.87      | ✅     
  5      | 5418     | 0.9871     | $9.99      | ✅     
  6      | 8411     | 0.9871     | $9.99      | ✅     
  7      | 8634     | 0.9871     | $9.99      | ✅     
  8      | 775      | 0.9975     | $7.99      | ✅     
  9      | 8453     | 1.0125     | $14.94     | ✅     
  10     | 2320     | 1.0156     | $6.55      | ✅     

  Avg distance: 0.9713
  Filter pass: 10/10 ✅
  Time: 0.382ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8        | 0.8105     | $7.99      | ✅     
  2      | 4398     | 0.9679     | $7.99      | ✅     
  3      | 446      | 0.9706     | $14.99     | ✅     
  4      | 9040     | 0.9771     | $8.87      | ✅     
  5      | 5418     | 0.9871     | $9.99      | ✅     
  6      | 8411     | 0.9871     | $9.99      | ✅     
  7      | 8634     | 0.9871     | $9.99      | ✅     
  8      | 775      | 0.9975     | $7.99      | ✅     
  9      | 8453     | 1.0125     | $14.94     | ✅     
  10     | 2320     | 1.0156     | $6.55      | ✅     

  Avg distance: 0.9713
  Filter pass: 10/10 ✅
  Time: 0.315ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            6.900ms   (10/10 results, avg dist: 1.1096)
    Post-OLD:             0.382ms   (10/10 results, avg dist: 0.9713)
    Post-FIXED:           0.315ms   (10/10 results, avg dist: 0.9713)

    Speed winner:      Post-FIXED
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   0.05x slower, 10/10 recall
    Post-FIXED vs OLD:   0.83x slower, +0 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

============================================================================================================================================
QUERY 3/5: 'gaming mouse RGB'
============================================================================================================================================

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 1/16: price > $2000 (expected ~0.03% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 0.01%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=1):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 24       | 1.2509     | $2080.00   | ✅     

  Avg distance: 1.2509
  Filter pass: 1/1 ✅
  Time: 0.030ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=0):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------

  Avg distance: 0.0000
  Filter pass: 0/0 ✅
  Time: 0.842ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=0):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------

  Avg distance: 0.0000
  Filter pass: 0/0 ✅
  Time: 1.318ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.030ms   (1/10 results, avg dist: 1.2509)
    Post-OLD:             0.842ms   (0/10 results, avg dist: 0.0000)
    Post-FIXED:           1.318ms   (0/10 results, avg dist: 0.0000)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (1/10)
    Post-FIXED vs Pre:   43.33x slower, 0/1 recall
    Post-FIXED vs OLD:   1.56x slower, +0 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 2/16: price > $1000 (expected ~0.09% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 0.04%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=4):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8830     | 1.1537     | $1999.99   | ✅     
  2      | 24       | 1.2509     | $2080.00   | ✅     
  3      | 6373     | 1.3320     | $1097.79   | ✅     
  4      | 550      | 1.3947     | $1056.26   | ✅     

  Avg distance: 1.2828
  Filter pass: 4/4 ✅
  Time: 0.019ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=1):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8830     | 1.1537     | $1999.99   | ✅     

  Avg distance: 1.1537
  Filter pass: 1/1 ✅
  Time: 0.697ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=1):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8830     | 1.1537     | $1999.99   | ✅     

  Avg distance: 1.1537
  Filter pass: 1/1 ✅
  Time: 1.250ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.019ms   (4/10 results, avg dist: 1.2828)
    Post-OLD:             0.697ms   (1/10 results, avg dist: 1.1537)
    Post-FIXED:           1.250ms   (1/10 results, avg dist: 1.1537)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (4/10)
    Post-FIXED vs Pre:   64.81x slower, 1/4 recall
    Post-FIXED vs OLD:   1.79x slower, +0 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 3/16: price > $500 (expected ~0.25% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 0.15%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8830     | 1.1537     | $1999.99   | ✅     
  2      | 24       | 1.2509     | $2080.00   | ✅     
  3      | 9314     | 1.2718     | $999.00    | ✅     
  4      | 8157     | 1.2914     | $689.00    | ✅     
  5      | 9011     | 1.3190     | $724.99    | ✅     
  6      | 7230     | 1.3238     | $899.95    | ✅     
  7      | 6373     | 1.3320     | $1097.79   | ✅     
  8      | 6384     | 1.3431     | $549.99    | ✅     
  9      | 8118     | 1.3542     | $579.99    | ✅     
  10     | 8152     | 1.3580     | $698.00    | ✅     

  Avg distance: 1.2998
  Filter pass: 10/10 ✅
  Time: 0.035ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=1):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8830     | 1.1537     | $1999.99   | ✅     

  Avg distance: 1.1537
  Filter pass: 1/1 ✅
  Time: 0.812ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=1):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8830     | 1.1537     | $1999.99   | ✅     

  Avg distance: 1.1537
  Filter pass: 1/1 ✅
  Time: 1.327ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.035ms   (10/10 results, avg dist: 1.2998)
    Post-OLD:             0.812ms   (1/10 results, avg dist: 1.1537)
    Post-FIXED:           1.327ms   (1/10 results, avg dist: 1.1537)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   37.69x slower, 1/10 recall
    Post-FIXED vs OLD:   1.64x slower, +0 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 4/16: price > $300 (expected ~0.57% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 0.26%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8830     | 1.1537     | $1999.99   | ✅     
  2      | 7018     | 1.2332     | $453.00    | ✅     
  3      | 24       | 1.2509     | $2080.00   | ✅     
  4      | 6469     | 1.2674     | $309.00    | ✅     
  5      | 9314     | 1.2718     | $999.00    | ✅     
  6      | 3499     | 1.2777     | $445.99    | ✅     
  7      | 8157     | 1.2914     | $689.00    | ✅     
  8      | 8506     | 1.2932     | $419.00    | ✅     
  9      | 9025     | 1.3160     | $404.99    | ✅     
  10     | 9011     | 1.3190     | $724.99    | ✅     

  Avg distance: 1.2674
  Filter pass: 10/10 ✅
  Time: 0.031ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=1):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8830     | 1.1537     | $1999.99   | ✅     

  Avg distance: 1.1537
  Filter pass: 1/1 ✅
  Time: 0.645ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=4):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8830     | 1.1537     | $1999.99   | ✅     
  2      | 3499     | 1.2777     | $445.99    | ✅     
  3      | 8140     | 1.3285     | $328.28    | ✅     
  4      | 6918     | 1.3805     | $311.82    | ✅     

  Avg distance: 1.2851
  Filter pass: 4/4 ✅
  Time: 1.261ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.031ms   (10/10 results, avg dist: 1.2674)
    Post-OLD:             0.645ms   (1/10 results, avg dist: 1.1537)
    Post-FIXED:           1.261ms   (4/10 results, avg dist: 1.2851)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   40.86x slower, 4/10 recall
    Post-FIXED vs OLD:   1.96x slower, +3 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 5/16: price > $200 (expected ~0.92% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 0.50%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8830     | 1.1537     | $1999.99   | ✅     
  2      | 8188     | 1.1665     | $249.99    | ✅     
  3      | 2971     | 1.2178     | $219.00    | ✅     
  4      | 4538     | 1.2294     | $249.99    | ✅     
  5      | 7018     | 1.2332     | $453.00    | ✅     
  6      | 7832     | 1.2423     | $272.94    | ✅     
  7      | 24       | 1.2509     | $2080.00   | ✅     
  8      | 4879     | 1.2639     | $209.99    | ✅     
  9      | 6469     | 1.2674     | $309.00    | ✅     
  10     | 9927     | 1.2689     | $278.88    | ✅     

  Avg distance: 1.2294
  Filter pass: 10/10 ✅
  Time: 0.048ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=3):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8830     | 1.1537     | $1999.99   | ✅     
  2      | 8188     | 1.1665     | $249.99    | ✅     
  3      | 4538     | 1.2294     | $249.99    | ✅     

  Avg distance: 1.1832
  Filter pass: 3/3 ✅
  Time: 0.814ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=9):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8830     | 1.1537     | $1999.99   | ✅     
  2      | 8188     | 1.1665     | $249.99    | ✅     
  3      | 4538     | 1.2294     | $249.99    | ✅     
  4      | 7832     | 1.2423     | $272.94    | ✅     
  5      | 3499     | 1.2777     | $445.99    | ✅     
  6      | 9257     | 1.2957     | $298.00    | ✅     
  7      | 8140     | 1.3285     | $328.28    | ✅     
  8      | 6918     | 1.3805     | $311.82    | ✅     
  9      | 6952     | 1.4780     | $269.86    | ✅     

  Avg distance: 1.2836
  Filter pass: 9/9 ✅
  Time: 1.284ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.048ms   (10/10 results, avg dist: 1.2294)
    Post-OLD:             0.814ms   (3/10 results, avg dist: 1.1832)
    Post-FIXED:           1.284ms   (9/10 results, avg dist: 1.2836)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   26.64x slower, 9/10 recall
    Post-FIXED vs OLD:   1.58x slower, +6 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 6/16: price > $150 (expected ~1.28% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 0.88%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8830     | 1.1537     | $1999.99   | ✅     
  2      | 8188     | 1.1665     | $249.99    | ✅     
  3      | 9943     | 1.1695     | $189.00    | ✅     
  4      | 9326     | 1.1834     | $155.88    | ✅     
  5      | 9941     | 1.1849     | $184.00    | ✅     
  6      | 9988     | 1.1875     | $199.00    | ✅     
  7      | 9801     | 1.2069     | $174.00    | ✅     
  8      | 2971     | 1.2178     | $219.00    | ✅     
  9      | 9798     | 1.2188     | $199.00    | ✅     
  10     | 4842     | 1.2222     | $168.90    | ✅     

  Avg distance: 1.1911
  Filter pass: 10/10 ✅
  Time: 0.072ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=7):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8830     | 1.1537     | $1999.99   | ✅     
  2      | 8188     | 1.1665     | $249.99    | ✅     
  3      | 9326     | 1.1834     | $155.88    | ✅     
  4      | 9988     | 1.1875     | $199.00    | ✅     
  5      | 9801     | 1.2069     | $174.00    | ✅     
  6      | 4538     | 1.2294     | $249.99    | ✅     
  7      | 4095     | 1.2296     | $179.00    | ✅     

  Avg distance: 1.1939
  Filter pass: 7/7 ✅
  Time: 0.648ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8830     | 1.1537     | $1999.99   | ✅     
  2      | 8188     | 1.1665     | $249.99    | ✅     
  3      | 9326     | 1.1834     | $155.88    | ✅     
  4      | 9988     | 1.1875     | $199.00    | ✅     
  5      | 9801     | 1.2069     | $174.00    | ✅     
  6      | 4538     | 1.2294     | $249.99    | ✅     
  7      | 4095     | 1.2296     | $179.00    | ✅     
  8      | 5919     | 1.2391     | $153.75    | ✅     
  9      | 7832     | 1.2423     | $272.94    | ✅     
  10     | 8507     | 1.2538     | $175.00    | ✅     

  Avg distance: 1.2092
  Filter pass: 10/10 ✅
  Time: 0.852ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.072ms   (10/10 results, avg dist: 1.1911)
    Post-OLD:             0.648ms   (7/10 results, avg dist: 1.1939)
    Post-FIXED:           0.852ms   (10/10 results, avg dist: 1.2092)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   11.77x slower, 10/10 recall
    Post-FIXED vs OLD:   1.31x slower, +3 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 7/16: price > $100 (expected ~1.85% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 1.42%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8830     | 1.1537     | $1999.99   | ✅     
  2      | 8188     | 1.1665     | $249.99    | ✅     
  3      | 9943     | 1.1695     | $189.00    | ✅     
  4      | 9326     | 1.1834     | $155.88    | ✅     
  5      | 9941     | 1.1849     | $184.00    | ✅     
  6      | 9988     | 1.1875     | $199.00    | ✅     
  7      | 6879     | 1.1948     | $102.01    | ✅     
  8      | 9801     | 1.2069     | $174.00    | ✅     
  9      | 7587     | 1.2108     | $129.99    | ✅     
  10     | 3465     | 1.2118     | $114.95    | ✅     

  Avg distance: 1.1870
  Filter pass: 10/10 ✅
  Time: 0.061ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=5):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8830     | 1.1537     | $1999.99   | ✅     
  2      | 8188     | 1.1665     | $249.99    | ✅     
  3      | 9326     | 1.1834     | $155.88    | ✅     
  4      | 9988     | 1.1875     | $199.00    | ✅     
  5      | 9801     | 1.2069     | $174.00    | ✅     

  Avg distance: 1.1796
  Filter pass: 5/5 ✅
  Time: 0.598ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8830     | 1.1537     | $1999.99   | ✅     
  2      | 8188     | 1.1665     | $249.99    | ✅     
  3      | 9326     | 1.1834     | $155.88    | ✅     
  4      | 9988     | 1.1875     | $199.00    | ✅     
  5      | 9801     | 1.2069     | $174.00    | ✅     
  6      | 3465     | 1.2118     | $114.95    | ✅     
  7      | 4869     | 1.2265     | $119.00    | ✅     
  8      | 4538     | 1.2294     | $249.99    | ✅     
  9      | 4095     | 1.2296     | $179.00    | ✅     
  10     | 5919     | 1.2391     | $153.75    | ✅     

  Avg distance: 1.2034
  Filter pass: 10/10 ✅
  Time: 0.847ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.061ms   (10/10 results, avg dist: 1.1870)
    Post-OLD:             0.598ms   (5/10 results, avg dist: 1.1796)
    Post-FIXED:           0.847ms   (10/10 results, avg dist: 1.2034)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   13.87x slower, 10/10 recall
    Post-FIXED vs OLD:   1.42x slower, +5 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 8/16: price > $75 (expected ~2.54% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 2.15%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8830     | 1.1537     | $1999.99   | ✅     
  2      | 8188     | 1.1665     | $249.99    | ✅     
  3      | 9943     | 1.1695     | $189.00    | ✅     
  4      | 9326     | 1.1834     | $155.88    | ✅     
  5      | 9941     | 1.1849     | $184.00    | ✅     
  6      | 9988     | 1.1875     | $199.00    | ✅     
  7      | 1176     | 1.1910     | $75.98     | ✅     
  8      | 6879     | 1.1948     | $102.01    | ✅     
  9      | 9679     | 1.1967     | $89.99     | ✅     
  10     | 9801     | 1.2069     | $174.00    | ✅     

  Avg distance: 1.1835
  Filter pass: 10/10 ✅
  Time: 0.069ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=6):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8830     | 1.1537     | $1999.99   | ✅     
  2      | 8188     | 1.1665     | $249.99    | ✅     
  3      | 9326     | 1.1834     | $155.88    | ✅     
  4      | 9988     | 1.1875     | $199.00    | ✅     
  5      | 9679     | 1.1967     | $89.99     | ✅     
  6      | 9801     | 1.2069     | $174.00    | ✅     

  Avg distance: 1.1825
  Filter pass: 6/6 ✅
  Time: 0.478ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8830     | 1.1537     | $1999.99   | ✅     
  2      | 8188     | 1.1665     | $249.99    | ✅     
  3      | 9326     | 1.1834     | $155.88    | ✅     
  4      | 9988     | 1.1875     | $199.00    | ✅     
  5      | 9679     | 1.1967     | $89.99     | ✅     
  6      | 9801     | 1.2069     | $174.00    | ✅     
  7      | 2861     | 1.2099     | $98.69     | ✅     
  8      | 3465     | 1.2118     | $114.95    | ✅     
  9      | 7156     | 1.2127     | $79.99     | ✅     
  10     | 4869     | 1.2265     | $119.00    | ✅     

  Avg distance: 1.1956
  Filter pass: 10/10 ✅
  Time: 0.637ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.069ms   (10/10 results, avg dist: 1.1835)
    Post-OLD:             0.478ms   (6/10 results, avg dist: 1.1825)
    Post-FIXED:           0.637ms   (10/10 results, avg dist: 1.1956)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   9.27x slower, 10/10 recall
    Post-FIXED vs OLD:   1.33x slower, +4 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 9/16: price > $50 (expected ~3.68% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 3.46%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 9766     | 1.1022     | $60.00     | ✅     
  2      | 8830     | 1.1537     | $1999.99   | ✅     
  3      | 8188     | 1.1665     | $249.99    | ✅     
  4      | 9943     | 1.1695     | $189.00    | ✅     
  5      | 9326     | 1.1834     | $155.88    | ✅     
  6      | 9941     | 1.1849     | $184.00    | ✅     
  7      | 9988     | 1.1875     | $199.00    | ✅     
  8      | 2632     | 1.1901     | $61.95     | ✅     
  9      | 1176     | 1.1910     | $75.98     | ✅     
  10     | 5405     | 1.1917     | $65.05     | ✅     

  Avg distance: 1.1721
  Filter pass: 10/10 ✅
  Time: 0.081ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=9):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 9766     | 1.1022     | $60.00     | ✅     
  2      | 8830     | 1.1537     | $1999.99   | ✅     
  3      | 8188     | 1.1665     | $249.99    | ✅     
  4      | 9326     | 1.1834     | $155.88    | ✅     
  5      | 9988     | 1.1875     | $199.00    | ✅     
  6      | 2632     | 1.1901     | $61.95     | ✅     
  7      | 5405     | 1.1917     | $65.05     | ✅     
  8      | 9679     | 1.1967     | $89.99     | ✅     
  9      | 9801     | 1.2069     | $174.00    | ✅     

  Avg distance: 1.1754
  Filter pass: 9/9 ✅
  Time: 0.492ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 9766     | 1.1022     | $60.00     | ✅     
  2      | 8830     | 1.1537     | $1999.99   | ✅     
  3      | 8188     | 1.1665     | $249.99    | ✅     
  4      | 9326     | 1.1834     | $155.88    | ✅     
  5      | 9988     | 1.1875     | $199.00    | ✅     
  6      | 2632     | 1.1901     | $61.95     | ✅     
  7      | 5405     | 1.1917     | $65.05     | ✅     
  8      | 9679     | 1.1967     | $89.99     | ✅     
  9      | 9801     | 1.2069     | $174.00    | ✅     
  10     | 2861     | 1.2099     | $98.69     | ✅     

  Avg distance: 1.1789
  Filter pass: 10/10 ✅
  Time: 0.719ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.081ms   (10/10 results, avg dist: 1.1721)
    Post-OLD:             0.492ms   (9/10 results, avg dist: 1.1754)
    Post-FIXED:           0.719ms   (10/10 results, avg dist: 1.1789)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   8.93x slower, 10/10 recall
    Post-FIXED vs OLD:   1.46x slower, +1 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 10/16: price > $40 (expected ~4.49% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 4.27%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 9766     | 1.1022     | $60.00     | ✅     
  2      | 8830     | 1.1537     | $1999.99   | ✅     
  3      | 8188     | 1.1665     | $249.99    | ✅     
  4      | 9943     | 1.1695     | $189.00    | ✅     
  5      | 9326     | 1.1834     | $155.88    | ✅     
  6      | 9941     | 1.1849     | $184.00    | ✅     
  7      | 9988     | 1.1875     | $199.00    | ✅     
  8      | 2632     | 1.1901     | $61.95     | ✅     
  9      | 1176     | 1.1910     | $75.98     | ✅     
  10     | 5405     | 1.1917     | $65.05     | ✅     

  Avg distance: 1.1721
  Filter pass: 10/10 ✅
  Time: 2.247ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=3):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 9766     | 1.1022     | $60.00     | ✅     
  2      | 3169     | 1.1531     | $48.99     | ✅     
  3      | 8830     | 1.1537     | $1999.99   | ✅     

  Avg distance: 1.1363
  Filter pass: 3/3 ✅
  Time: 0.452ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 9766     | 1.1022     | $60.00     | ✅     
  2      | 3169     | 1.1531     | $48.99     | ✅     
  3      | 8830     | 1.1537     | $1999.99   | ✅     
  4      | 8188     | 1.1665     | $249.99    | ✅     
  5      | 9326     | 1.1834     | $155.88    | ✅     
  6      | 9988     | 1.1875     | $199.00    | ✅     
  7      | 2632     | 1.1901     | $61.95     | ✅     
  8      | 5405     | 1.1917     | $65.05     | ✅     
  9      | 5182     | 1.1954     | $47.75     | ✅     
  10     | 9679     | 1.1967     | $89.99     | ✅     

  Avg distance: 1.1720
  Filter pass: 10/10 ✅
  Time: 0.534ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            2.247ms   (10/10 results, avg dist: 1.1721)
    Post-OLD:             0.452ms   (3/10 results, avg dist: 1.1363)
    Post-FIXED:           0.534ms   (10/10 results, avg dist: 1.1720)

    Speed winner:      Post-OLD
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   0.24x slower, 10/10 recall
    Post-FIXED vs OLD:   1.18x slower, +7 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 11/16: price > $30 (expected ~5.88% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 5.52%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5359     | 1.0787     | $37.99     | ✅     
  2      | 9348     | 1.0850     | $34.99     | ✅     
  3      | 9766     | 1.1022     | $60.00     | ✅     
  4      | 3169     | 1.1531     | $48.99     | ✅     
  5      | 8830     | 1.1537     | $1999.99   | ✅     
  6      | 8188     | 1.1665     | $249.99    | ✅     
  7      | 9943     | 1.1695     | $189.00    | ✅     
  8      | 7354     | 1.1729     | $32.55     | ✅     
  9      | 9326     | 1.1834     | $155.88    | ✅     
  10     | 9941     | 1.1849     | $184.00    | ✅     

  Avg distance: 1.1450
  Filter pass: 10/10 ✅
  Time: 5.795ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=3):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5359     | 1.0787     | $37.99     | ✅     
  2      | 9348     | 1.0850     | $34.99     | ✅     
  3      | 9766     | 1.1022     | $60.00     | ✅     

  Avg distance: 1.0886
  Filter pass: 3/3 ✅
  Time: 0.525ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5359     | 1.0787     | $37.99     | ✅     
  2      | 9348     | 1.0850     | $34.99     | ✅     
  3      | 9766     | 1.1022     | $60.00     | ✅     
  4      | 3169     | 1.1531     | $48.99     | ✅     
  5      | 8830     | 1.1537     | $1999.99   | ✅     
  6      | 8188     | 1.1665     | $249.99    | ✅     
  7      | 7354     | 1.1729     | $32.55     | ✅     
  8      | 9326     | 1.1834     | $155.88    | ✅     
  9      | 9988     | 1.1875     | $199.00    | ✅     
  10     | 2632     | 1.1901     | $61.95     | ✅     

  Avg distance: 1.1473
  Filter pass: 10/10 ✅
  Time: 0.538ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            5.795ms   (10/10 results, avg dist: 1.1450)
    Post-OLD:             0.525ms   (3/10 results, avg dist: 1.0886)
    Post-FIXED:           0.538ms   (10/10 results, avg dist: 1.1473)

    Speed winner:      Post-OLD
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   0.09x slower, 10/10 recall
    Post-FIXED vs OLD:   1.03x slower, +7 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 12/16: price > $25 (expected ~7.06% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 6.88%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5359     | 1.0787     | $37.99     | ✅     
  2      | 9348     | 1.0850     | $34.99     | ✅     
  3      | 9766     | 1.1022     | $60.00     | ✅     
  4      | 9945     | 1.1438     | $29.99     | ✅     
  5      | 3169     | 1.1531     | $48.99     | ✅     
  6      | 8830     | 1.1537     | $1999.99   | ✅     
  7      | 8188     | 1.1665     | $249.99    | ✅     
  8      | 9943     | 1.1695     | $189.00    | ✅     
  9      | 7354     | 1.1729     | $32.55     | ✅     
  10     | 9326     | 1.1834     | $155.88    | ✅     

  Avg distance: 1.1409
  Filter pass: 10/10 ✅
  Time: 0.107ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=3):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5359     | 1.0787     | $37.99     | ✅     
  2      | 9348     | 1.0850     | $34.99     | ✅     
  3      | 9766     | 1.1022     | $60.00     | ✅     

  Avg distance: 1.0886
  Filter pass: 3/3 ✅
  Time: 0.357ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5359     | 1.0787     | $37.99     | ✅     
  2      | 9348     | 1.0850     | $34.99     | ✅     
  3      | 9766     | 1.1022     | $60.00     | ✅     
  4      | 9945     | 1.1438     | $29.99     | ✅     
  5      | 3169     | 1.1531     | $48.99     | ✅     
  6      | 8830     | 1.1537     | $1999.99   | ✅     
  7      | 8188     | 1.1665     | $249.99    | ✅     
  8      | 7354     | 1.1729     | $32.55     | ✅     
  9      | 9326     | 1.1834     | $155.88    | ✅     
  10     | 9988     | 1.1875     | $199.00    | ✅     

  Avg distance: 1.1427
  Filter pass: 10/10 ✅
  Time: 0.487ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.107ms   (10/10 results, avg dist: 1.1409)
    Post-OLD:             0.357ms   (3/10 results, avg dist: 1.0886)
    Post-FIXED:           0.487ms   (10/10 results, avg dist: 1.1427)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   4.57x slower, 10/10 recall
    Post-FIXED vs OLD:   1.36x slower, +7 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 13/16: price > $20 (expected ~8.58% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 8.15%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5359     | 1.0787     | $37.99     | ✅     
  2      | 9348     | 1.0850     | $34.99     | ✅     
  3      | 9766     | 1.1022     | $60.00     | ✅     
  4      | 9945     | 1.1438     | $29.99     | ✅     
  5      | 3169     | 1.1531     | $48.99     | ✅     
  6      | 8830     | 1.1537     | $1999.99   | ✅     
  7      | 8188     | 1.1665     | $249.99    | ✅     
  8      | 9943     | 1.1695     | $189.00    | ✅     
  9      | 7354     | 1.1729     | $32.55     | ✅     
  10     | 9326     | 1.1834     | $155.88    | ✅     

  Avg distance: 1.1409
  Filter pass: 10/10 ✅
  Time: 6.874ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=3):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5359     | 1.0787     | $37.99     | ✅     
  2      | 9348     | 1.0850     | $34.99     | ✅     
  3      | 9766     | 1.1022     | $60.00     | ✅     

  Avg distance: 1.0886
  Filter pass: 3/3 ✅
  Time: 0.553ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5359     | 1.0787     | $37.99     | ✅     
  2      | 9348     | 1.0850     | $34.99     | ✅     
  3      | 9766     | 1.1022     | $60.00     | ✅     
  4      | 9945     | 1.1438     | $29.99     | ✅     
  5      | 3169     | 1.1531     | $48.99     | ✅     
  6      | 8830     | 1.1537     | $1999.99   | ✅     
  7      | 8188     | 1.1665     | $249.99    | ✅     
  8      | 7354     | 1.1729     | $32.55     | ✅     
  9      | 5635     | 1.1792     | $24.99     | ✅     
  10     | 9326     | 1.1834     | $155.88    | ✅     

  Avg distance: 1.1418
  Filter pass: 10/10 ✅
  Time: 0.597ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            6.874ms   (10/10 results, avg dist: 1.1409)
    Post-OLD:             0.553ms   (3/10 results, avg dist: 1.0886)
    Post-FIXED:           0.597ms   (10/10 results, avg dist: 1.1418)

    Speed winner:      Post-OLD
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   0.09x slower, 10/10 recall
    Post-FIXED vs OLD:   1.08x slower, +7 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 14/16: price > $15 (expected ~12.33% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 11.57%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5359     | 1.0787     | $37.99     | ✅     
  2      | 9348     | 1.0850     | $34.99     | ✅     
  3      | 9766     | 1.1022     | $60.00     | ✅     
  4      | 9945     | 1.1438     | $29.99     | ✅     
  5      | 3169     | 1.1531     | $48.99     | ✅     
  6      | 8830     | 1.1537     | $1999.99   | ✅     
  7      | 8188     | 1.1665     | $249.99    | ✅     
  8      | 9943     | 1.1695     | $189.00    | ✅     
  9      | 7354     | 1.1729     | $32.55     | ✅     
  10     | 9326     | 1.1834     | $155.88    | ✅     

  Avg distance: 1.1409
  Filter pass: 10/10 ✅
  Time: 6.752ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=6):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 3119     | 1.0488     | $20.00     | ✅     
  2      | 5359     | 1.0787     | $37.99     | ✅     
  3      | 6956     | 1.0842     | $18.95     | ✅     
  4      | 9348     | 1.0850     | $34.99     | ✅     
  5      | 9766     | 1.1022     | $60.00     | ✅     
  6      | 3157     | 1.1115     | $16.99     | ✅     

  Avg distance: 1.0851
  Filter pass: 6/6 ✅
  Time: 0.530ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 3119     | 1.0488     | $20.00     | ✅     
  2      | 5359     | 1.0787     | $37.99     | ✅     
  3      | 6956     | 1.0842     | $18.95     | ✅     
  4      | 9348     | 1.0850     | $34.99     | ✅     
  5      | 9766     | 1.1022     | $60.00     | ✅     
  6      | 3157     | 1.1115     | $16.99     | ✅     
  7      | 9945     | 1.1438     | $29.99     | ✅     
  8      | 3169     | 1.1531     | $48.99     | ✅     
  9      | 8830     | 1.1537     | $1999.99   | ✅     
  10     | 5922     | 1.1637     | $16.73     | ✅     

  Avg distance: 1.1125
  Filter pass: 10/10 ✅
  Time: 0.441ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            6.752ms   (10/10 results, avg dist: 1.1409)
    Post-OLD:             0.530ms   (6/10 results, avg dist: 1.0851)
    Post-FIXED:           0.441ms   (10/10 results, avg dist: 1.1125)

    Speed winner:      Post-FIXED
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   0.07x slower, 10/10 recall
    Post-FIXED vs OLD:   0.83x slower, +4 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 15/16: price > $10 (expected ~18.0% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 15.84%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5359     | 1.0787     | $37.99     | ✅     
  2      | 9348     | 1.0850     | $34.99     | ✅     
  3      | 9766     | 1.1022     | $60.00     | ✅     
  4      | 9945     | 1.1438     | $29.99     | ✅     
  5      | 3169     | 1.1531     | $48.99     | ✅     
  6      | 8830     | 1.1537     | $1999.99   | ✅     
  7      | 8188     | 1.1665     | $249.99    | ✅     
  8      | 9943     | 1.1695     | $189.00    | ✅     
  9      | 7354     | 1.1729     | $32.55     | ✅     
  10     | 9326     | 1.1834     | $155.88    | ✅     

  Avg distance: 1.1409
  Filter pass: 10/10 ✅
  Time: 6.921ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=9):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 3119     | 1.0488     | $20.00     | ✅     
  2      | 9525     | 1.0759     | $12.88     | ✅     
  3      | 5359     | 1.0787     | $37.99     | ✅     
  4      | 6956     | 1.0842     | $18.95     | ✅     
  5      | 9348     | 1.0850     | $34.99     | ✅     
  6      | 5569     | 1.0987     | $10.28     | ✅     
  7      | 9766     | 1.1022     | $60.00     | ✅     
  8      | 8185     | 1.1054     | $10.58     | ✅     
  9      | 3157     | 1.1115     | $16.99     | ✅     

  Avg distance: 1.0878
  Filter pass: 9/9 ✅
  Time: 0.514ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 3119     | 1.0488     | $20.00     | ✅     
  2      | 9525     | 1.0759     | $12.88     | ✅     
  3      | 5359     | 1.0787     | $37.99     | ✅     
  4      | 6956     | 1.0842     | $18.95     | ✅     
  5      | 9348     | 1.0850     | $34.99     | ✅     
  6      | 5569     | 1.0987     | $10.28     | ✅     
  7      | 9766     | 1.1022     | $60.00     | ✅     
  8      | 8185     | 1.1054     | $10.58     | ✅     
  9      | 3157     | 1.1115     | $16.99     | ✅     
  10     | 9945     | 1.1438     | $29.99     | ✅     

  Avg distance: 1.0934
  Filter pass: 10/10 ✅
  Time: 0.415ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            6.921ms   (10/10 results, avg dist: 1.1409)
    Post-OLD:             0.514ms   (9/10 results, avg dist: 1.0878)
    Post-FIXED:           0.415ms   (10/10 results, avg dist: 1.0934)

    Speed winner:      Post-FIXED
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   0.06x slower, 10/10 recall
    Post-FIXED vs OLD:   0.81x slower, +1 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 16/16: price > $5 (expected ~25.0% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 24.02%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 5359     | 1.0787     | $37.99     | ✅     
  2      | 9348     | 1.0850     | $34.99     | ✅     
  3      | 9766     | 1.1022     | $60.00     | ✅     
  4      | 9945     | 1.1438     | $29.99     | ✅     
  5      | 3169     | 1.1531     | $48.99     | ✅     
  6      | 8830     | 1.1537     | $1999.99   | ✅     
  7      | 8188     | 1.1665     | $249.99    | ✅     
  8      | 9943     | 1.1695     | $189.00    | ✅     
  9      | 7354     | 1.1729     | $32.55     | ✅     
  10     | 9326     | 1.1834     | $155.88    | ✅     

  Avg distance: 1.1409
  Filter pass: 10/10 ✅
  Time: 6.870ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 3671     | 0.9882     | $6.99      | ✅     
  2      | 6581     | 0.9971     | $9.99      | ✅     
  3      | 3119     | 1.0488     | $20.00     | ✅     
  4      | 2513     | 1.0736     | $6.99      | ✅     
  5      | 9525     | 1.0759     | $12.88     | ✅     
  6      | 5281     | 1.0775     | $8.50      | ✅     
  7      | 5359     | 1.0787     | $37.99     | ✅     
  8      | 6956     | 1.0842     | $18.95     | ✅     
  9      | 6695     | 1.0847     | $5.99      | ✅     
  10     | 9348     | 1.0850     | $34.99     | ✅     

  Avg distance: 1.0594
  Filter pass: 10/10 ✅
  Time: 0.485ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 3671     | 0.9882     | $6.99      | ✅     
  2      | 6581     | 0.9971     | $9.99      | ✅     
  3      | 3119     | 1.0488     | $20.00     | ✅     
  4      | 2513     | 1.0736     | $6.99      | ✅     
  5      | 9525     | 1.0759     | $12.88     | ✅     
  6      | 5281     | 1.0775     | $8.50      | ✅     
  7      | 5359     | 1.0787     | $37.99     | ✅     
  8      | 6956     | 1.0842     | $18.95     | ✅     
  9      | 6695     | 1.0847     | $5.99      | ✅     
  10     | 9348     | 1.0850     | $34.99     | ✅     

  Avg distance: 1.0594
  Filter pass: 10/10 ✅
  Time: 0.391ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            6.870ms   (10/10 results, avg dist: 1.1409)
    Post-OLD:             0.485ms   (10/10 results, avg dist: 1.0594)
    Post-FIXED:           0.391ms   (10/10 results, avg dist: 1.0594)

    Speed winner:      Post-FIXED
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   0.06x slower, 10/10 recall
    Post-FIXED vs OLD:   0.81x slower, +0 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

============================================================================================================================================
QUERY 4/5: 'USB cable charger'
============================================================================================================================================

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 1/16: price > $2000 (expected ~0.03% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 0.01%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=1):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 24       | 1.2580     | $2080.00   | ✅     

  Avg distance: 1.2580
  Filter pass: 1/1 ✅
  Time: 0.030ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=0):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------

  Avg distance: 0.0000
  Filter pass: 0/0 ✅
  Time: 0.747ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=0):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------

  Avg distance: 0.0000
  Filter pass: 0/0 ✅
  Time: 1.063ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.030ms   (1/10 results, avg dist: 1.2580)
    Post-OLD:             0.747ms   (0/10 results, avg dist: 0.0000)
    Post-FIXED:           1.063ms   (0/10 results, avg dist: 0.0000)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (1/10)
    Post-FIXED vs Pre:   35.45x slower, 0/1 recall
    Post-FIXED vs OLD:   1.42x slower, +0 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 2/16: price > $1000 (expected ~0.09% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 0.04%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=4):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 24       | 1.2580     | $2080.00   | ✅     
  2      | 8830     | 1.3276     | $1999.99   | ✅     
  3      | 550      | 1.3844     | $1056.26   | ✅     
  4      | 6373     | 1.3896     | $1097.79   | ✅     

  Avg distance: 1.3399
  Filter pass: 4/4 ✅
  Time: 0.029ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=0):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------

  Avg distance: 0.0000
  Filter pass: 0/0 ✅
  Time: 0.633ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=0):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------

  Avg distance: 0.0000
  Filter pass: 0/0 ✅
  Time: 1.052ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.029ms   (4/10 results, avg dist: 1.3399)
    Post-OLD:             0.633ms   (0/10 results, avg dist: 0.0000)
    Post-FIXED:           1.052ms   (0/10 results, avg dist: 0.0000)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (4/10)
    Post-FIXED vs Pre:   35.76x slower, 0/4 recall
    Post-FIXED vs OLD:   1.66x slower, +0 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 3/16: price > $500 (expected ~0.25% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 0.15%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 24       | 1.2580     | $2080.00   | ✅     
  2      | 7230     | 1.2635     | $899.95    | ✅     
  3      | 9314     | 1.2651     | $999.00    | ✅     
  4      | 9011     | 1.3127     | $724.99    | ✅     
  5      | 8830     | 1.3276     | $1999.99   | ✅     
  6      | 8157     | 1.3591     | $689.00    | ✅     
  7      | 6384     | 1.3641     | $549.99    | ✅     
  8      | 8152     | 1.3705     | $698.00    | ✅     
  9      | 550      | 1.3844     | $1056.26   | ✅     
  10     | 6373     | 1.3896     | $1097.79   | ✅     

  Avg distance: 1.3295
  Filter pass: 10/10 ✅
  Time: 0.025ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=0):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------

  Avg distance: 0.0000
  Filter pass: 0/0 ✅
  Time: 0.547ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=0):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------

  Avg distance: 0.0000
  Filter pass: 0/0 ✅
  Time: 1.045ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.025ms   (10/10 results, avg dist: 1.3295)
    Post-OLD:             0.547ms   (0/10 results, avg dist: 0.0000)
    Post-FIXED:           1.045ms   (0/10 results, avg dist: 0.0000)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   42.58x slower, 0/10 recall
    Post-FIXED vs OLD:   1.91x slower, +0 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 4/16: price > $300 (expected ~0.57% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 0.26%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 24       | 1.2580     | $2080.00   | ✅     
  2      | 7230     | 1.2635     | $899.95    | ✅     
  3      | 9314     | 1.2651     | $999.00    | ✅     
  4      | 6469     | 1.2662     | $309.00    | ✅     
  5      | 8506     | 1.2740     | $419.00    | ✅     
  6      | 3499     | 1.2935     | $445.99    | ✅     
  7      | 7018     | 1.2953     | $453.00    | ✅     
  8      | 9011     | 1.3127     | $724.99    | ✅     
  9      | 453      | 1.3259     | $395.00    | ✅     
  10     | 8830     | 1.3276     | $1999.99   | ✅     

  Avg distance: 1.2882
  Filter pass: 10/10 ✅
  Time: 0.049ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=0):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------

  Avg distance: 0.0000
  Filter pass: 0/0 ✅
  Time: 0.684ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=0):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------

  Avg distance: 0.0000
  Filter pass: 0/0 ✅
  Time: 1.032ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.049ms   (10/10 results, avg dist: 1.2882)
    Post-OLD:             0.684ms   (0/10 results, avg dist: 0.0000)
    Post-FIXED:           1.032ms   (0/10 results, avg dist: 0.0000)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   20.94x slower, 0/10 recall
    Post-FIXED vs OLD:   1.51x slower, +0 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 5/16: price > $200 (expected ~0.92% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 0.50%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8188     | 1.1865     | $249.99    | ✅     
  2      | 4064     | 1.2346     | $289.95    | ✅     
  3      | 9257     | 1.2470     | $298.00    | ✅     
  4      | 24       | 1.2580     | $2080.00   | ✅     
  5      | 7230     | 1.2635     | $899.95    | ✅     
  6      | 9314     | 1.2651     | $999.00    | ✅     
  7      | 6469     | 1.2662     | $309.00    | ✅     
  8      | 4879     | 1.2719     | $209.99    | ✅     
  9      | 4983     | 1.2732     | $257.95    | ✅     
  10     | 8506     | 1.2740     | $419.00    | ✅     

  Avg distance: 1.2540
  Filter pass: 10/10 ✅
  Time: 0.043ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=1):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8188     | 1.1865     | $249.99    | ✅     

  Avg distance: 1.1865
  Filter pass: 1/1 ✅
  Time: 0.604ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=3):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8188     | 1.1865     | $249.99    | ✅     
  2      | 7832     | 1.2945     | $272.94    | ✅     
  3      | 6127     | 1.3289     | $261.10    | ✅     

  Avg distance: 1.2700
  Filter pass: 3/3 ✅
  Time: 1.023ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.043ms   (10/10 results, avg dist: 1.2540)
    Post-OLD:             0.604ms   (1/10 results, avg dist: 1.1865)
    Post-FIXED:           1.023ms   (3/10 results, avg dist: 1.2700)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   23.78x slower, 3/10 recall
    Post-FIXED vs OLD:   1.69x slower, +2 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 6/16: price > $150 (expected ~1.28% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 0.88%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8188     | 1.1865     | $249.99    | ✅     
  2      | 9941     | 1.1924     | $184.00    | ✅     
  3      | 9943     | 1.2013     | $189.00    | ✅     
  4      | 436      | 1.2296     | $167.88    | ✅     
  5      | 4064     | 1.2346     | $289.95    | ✅     
  6      | 419      | 1.2351     | $167.88    | ✅     
  7      | 9801     | 1.2382     | $174.00    | ✅     
  8      | 7345     | 1.2383     | $191.72    | ✅     
  9      | 9257     | 1.2470     | $298.00    | ✅     
  10     | 4094     | 1.2497     | $179.00    | ✅     

  Avg distance: 1.2253
  Filter pass: 10/10 ✅
  Time: 0.050ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=0):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------

  Avg distance: 0.0000
  Filter pass: 0/0 ✅
  Time: 0.420ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=5):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8188     | 1.1865     | $249.99    | ✅     
  2      | 7832     | 1.2945     | $272.94    | ✅     
  3      | 3936     | 1.3213     | $199.66    | ✅     
  4      | 6127     | 1.3289     | $261.10    | ✅     
  5      | 928      | 1.3698     | $181.26    | ✅     

  Avg distance: 1.3002
  Filter pass: 5/5 ✅
  Time: 0.909ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.050ms   (10/10 results, avg dist: 1.2253)
    Post-OLD:             0.420ms   (0/10 results, avg dist: 0.0000)
    Post-FIXED:           0.909ms   (5/10 results, avg dist: 1.3002)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   18.04x slower, 5/10 recall
    Post-FIXED vs OLD:   2.16x slower, +5 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 7/16: price > $100 (expected ~1.85% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 1.42%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8805     | 1.1540     | $147.21    | ✅     
  2      | 8188     | 1.1865     | $249.99    | ✅     
  3      | 9941     | 1.1924     | $184.00    | ✅     
  4      | 9943     | 1.2013     | $189.00    | ✅     
  5      | 436      | 1.2296     | $167.88    | ✅     
  6      | 3465     | 1.2325     | $114.95    | ✅     
  7      | 4064     | 1.2346     | $289.95    | ✅     
  8      | 419      | 1.2351     | $167.88    | ✅     
  9      | 1212     | 1.2377     | $109.99    | ✅     
  10     | 9801     | 1.2382     | $174.00    | ✅     

  Avg distance: 1.2142
  Filter pass: 10/10 ✅
  Time: 0.068ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=2):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8805     | 1.1540     | $147.21    | ✅     
  2      | 8188     | 1.1865     | $249.99    | ✅     

  Avg distance: 1.1702
  Filter pass: 2/2 ✅
  Time: 0.645ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=8):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8805     | 1.1540     | $147.21    | ✅     
  2      | 8188     | 1.1865     | $249.99    | ✅     
  3      | 2695     | 1.2508     | $116.17    | ✅     
  4      | 7832     | 1.2945     | $272.94    | ✅     
  5      | 3936     | 1.3213     | $199.66    | ✅     
  6      | 6127     | 1.3289     | $261.10    | ✅     
  7      | 7262     | 1.3405     | $124.95    | ✅     
  8      | 928      | 1.3698     | $181.26    | ✅     

  Avg distance: 1.2808
  Filter pass: 8/8 ✅
  Time: 0.712ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.068ms   (10/10 results, avg dist: 1.2142)
    Post-OLD:             0.645ms   (2/10 results, avg dist: 1.1702)
    Post-FIXED:           0.712ms   (8/10 results, avg dist: 1.2808)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   10.48x slower, 8/10 recall
    Post-FIXED vs OLD:   1.10x slower, +6 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 8/16: price > $75 (expected ~2.54% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 2.15%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 777      | 1.1237     | $85.68     | ✅     
  2      | 9776     | 1.1494     | $79.74     | ✅     
  3      | 8805     | 1.1540     | $147.21    | ✅     
  4      | 8188     | 1.1865     | $249.99    | ✅     
  5      | 9941     | 1.1924     | $184.00    | ✅     
  6      | 9943     | 1.2013     | $189.00    | ✅     
  7      | 436      | 1.2296     | $167.88    | ✅     
  8      | 2861     | 1.2298     | $98.69     | ✅     
  9      | 9290     | 1.2302     | $89.95     | ✅     
  10     | 3465     | 1.2325     | $114.95    | ✅     

  Avg distance: 1.1929
  Filter pass: 10/10 ✅
  Time: 0.062ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=1):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 777      | 1.1237     | $85.68     | ✅     

  Avg distance: 1.1237
  Filter pass: 1/1 ✅
  Time: 0.445ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 777      | 1.1237     | $85.68     | ✅     
  2      | 9776     | 1.1494     | $79.74     | ✅     
  3      | 8805     | 1.1540     | $147.21    | ✅     
  4      | 8188     | 1.1865     | $249.99    | ✅     
  5      | 2695     | 1.2508     | $116.17    | ✅     
  6      | 470      | 1.2936     | $89.55     | ✅     
  7      | 7832     | 1.2945     | $272.94    | ✅     
  8      | 695      | 1.3080     | $78.89     | ✅     
  9      | 2737     | 1.3149     | $79.99     | ✅     
  10     | 3936     | 1.3213     | $199.66    | ✅     

  Avg distance: 1.2397
  Filter pass: 10/10 ✅
  Time: 0.701ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.062ms   (10/10 results, avg dist: 1.1929)
    Post-OLD:             0.445ms   (1/10 results, avg dist: 1.1237)
    Post-FIXED:           0.701ms   (10/10 results, avg dist: 1.2397)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   11.24x slower, 10/10 recall
    Post-FIXED vs OLD:   1.58x slower, +9 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 9/16: price > $50 (expected ~3.68% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 3.46%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 832      | 1.0726     | $69.00     | ✅     
  2      | 777      | 1.1237     | $85.68     | ✅     
  3      | 9776     | 1.1494     | $79.74     | ✅     
  4      | 8805     | 1.1540     | $147.21    | ✅     
  5      | 9766     | 1.1857     | $60.00     | ✅     
  6      | 8188     | 1.1865     | $249.99    | ✅     
  7      | 9941     | 1.1924     | $184.00    | ✅     
  8      | 9943     | 1.2013     | $189.00    | ✅     
  9      | 3458     | 1.2282     | $75.00     | ✅     
  10     | 436      | 1.2296     | $167.88    | ✅     

  Avg distance: 1.1723
  Filter pass: 10/10 ✅
  Time: 0.085ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=2):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 832      | 1.0726     | $69.00     | ✅     
  2      | 777      | 1.1237     | $85.68     | ✅     

  Avg distance: 1.0982
  Filter pass: 2/2 ✅
  Time: 0.494ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 832      | 1.0726     | $69.00     | ✅     
  2      | 777      | 1.1237     | $85.68     | ✅     
  3      | 9776     | 1.1494     | $79.74     | ✅     
  4      | 8805     | 1.1540     | $147.21    | ✅     
  5      | 9766     | 1.1857     | $60.00     | ✅     
  6      | 8188     | 1.1865     | $249.99    | ✅     
  7      | 2695     | 1.2508     | $116.17    | ✅     
  8      | 612      | 1.2536     | $58.88     | ✅     
  9      | 7913     | 1.2801     | $62.24     | ✅     
  10     | 0        | 1.2858     | $65.00     | ✅     

  Avg distance: 1.1942
  Filter pass: 10/10 ✅
  Time: 0.701ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.085ms   (10/10 results, avg dist: 1.1723)
    Post-OLD:             0.494ms   (2/10 results, avg dist: 1.0982)
    Post-FIXED:           0.701ms   (10/10 results, avg dist: 1.1942)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   8.30x slower, 10/10 recall
    Post-FIXED vs OLD:   1.42x slower, +8 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 10/16: price > $40 (expected ~4.49% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 4.27%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 832      | 1.0726     | $69.00     | ✅     
  2      | 777      | 1.1237     | $85.68     | ✅     
  3      | 9776     | 1.1494     | $79.74     | ✅     
  4      | 8805     | 1.1540     | $147.21    | ✅     
  5      | 9766     | 1.1857     | $60.00     | ✅     
  6      | 8188     | 1.1865     | $249.99    | ✅     
  7      | 9941     | 1.1924     | $184.00    | ✅     
  8      | 9943     | 1.2013     | $189.00    | ✅     
  9      | 3458     | 1.2282     | $75.00     | ✅     
  10     | 436      | 1.2296     | $167.88    | ✅     

  Avg distance: 1.1723
  Filter pass: 10/10 ✅
  Time: 2.284ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=4):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 6522     | 1.0422     | $49.95     | ✅     
  2      | 832      | 1.0726     | $69.00     | ✅     
  3      | 777      | 1.1237     | $85.68     | ✅     
  4      | 2636     | 1.1240     | $44.89     | ✅     

  Avg distance: 1.0906
  Filter pass: 4/4 ✅
  Time: 0.472ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 6522     | 1.0422     | $49.95     | ✅     
  2      | 832      | 1.0726     | $69.00     | ✅     
  3      | 777      | 1.1237     | $85.68     | ✅     
  4      | 2636     | 1.1240     | $44.89     | ✅     
  5      | 9776     | 1.1494     | $79.74     | ✅     
  6      | 8805     | 1.1540     | $147.21    | ✅     
  7      | 9766     | 1.1857     | $60.00     | ✅     
  8      | 8188     | 1.1865     | $249.99    | ✅     
  9      | 6543     | 1.1888     | $40.48     | ✅     
  10     | 8045     | 1.2420     | $49.00     | ✅     

  Avg distance: 1.1469
  Filter pass: 10/10 ✅
  Time: 0.612ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            2.284ms   (10/10 results, avg dist: 1.1723)
    Post-OLD:             0.472ms   (4/10 results, avg dist: 1.0906)
    Post-FIXED:           0.612ms   (10/10 results, avg dist: 1.1469)

    Speed winner:      Post-OLD
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   0.27x slower, 10/10 recall
    Post-FIXED vs OLD:   1.30x slower, +6 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 11/16: price > $30 (expected ~5.88% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 5.52%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 80       | 0.9650     | $34.88     | ✅     
  2      | 6522     | 1.0422     | $49.95     | ✅     
  3      | 832      | 1.0726     | $69.00     | ✅     
  4      | 777      | 1.1237     | $85.68     | ✅     
  5      | 2636     | 1.1240     | $44.89     | ✅     
  6      | 7695     | 1.1372     | $37.20     | ✅     
  7      | 7721     | 1.1446     | $31.60     | ✅     
  8      | 9776     | 1.1494     | $79.74     | ✅     
  9      | 8805     | 1.1540     | $147.21    | ✅     
  10     | 9928     | 1.1617     | $32.95     | ✅     

  Avg distance: 1.1074
  Filter pass: 10/10 ✅
  Time: 6.026ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=7):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 80       | 0.9650     | $34.88     | ✅     
  2      | 6522     | 1.0422     | $49.95     | ✅     
  3      | 832      | 1.0726     | $69.00     | ✅     
  4      | 777      | 1.1237     | $85.68     | ✅     
  5      | 2636     | 1.1240     | $44.89     | ✅     
  6      | 7695     | 1.1372     | $37.20     | ✅     
  7      | 7721     | 1.1446     | $31.60     | ✅     

  Avg distance: 1.0870
  Filter pass: 7/7 ✅
  Time: 0.555ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 80       | 0.9650     | $34.88     | ✅     
  2      | 6522     | 1.0422     | $49.95     | ✅     
  3      | 832      | 1.0726     | $69.00     | ✅     
  4      | 777      | 1.1237     | $85.68     | ✅     
  5      | 2636     | 1.1240     | $44.89     | ✅     
  6      | 7695     | 1.1372     | $37.20     | ✅     
  7      | 7721     | 1.1446     | $31.60     | ✅     
  8      | 9776     | 1.1494     | $79.74     | ✅     
  9      | 8805     | 1.1540     | $147.21    | ✅     
  10     | 9928     | 1.1617     | $32.95     | ✅     

  Avg distance: 1.1074
  Filter pass: 10/10 ✅
  Time: 0.526ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            6.026ms   (10/10 results, avg dist: 1.1074)
    Post-OLD:             0.555ms   (7/10 results, avg dist: 1.0870)
    Post-FIXED:           0.526ms   (10/10 results, avg dist: 1.1074)

    Speed winner:      Post-FIXED
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   0.09x slower, 10/10 recall
    Post-FIXED vs OLD:   0.95x slower, +3 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 12/16: price > $25 (expected ~7.06% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 6.88%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 80       | 0.9650     | $34.88     | ✅     
  2      | 6522     | 1.0422     | $49.95     | ✅     
  3      | 832      | 1.0726     | $69.00     | ✅     
  4      | 777      | 1.1237     | $85.68     | ✅     
  5      | 2636     | 1.1240     | $44.89     | ✅     
  6      | 3127     | 1.1356     | $27.00     | ✅     
  7      | 7695     | 1.1372     | $37.20     | ✅     
  8      | 7721     | 1.1446     | $31.60     | ✅     
  9      | 9776     | 1.1494     | $79.74     | ✅     
  10     | 8805     | 1.1540     | $147.21    | ✅     

  Avg distance: 1.1048
  Filter pass: 10/10 ✅
  Time: 0.113ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=1):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 80       | 0.9650     | $34.88     | ✅     

  Avg distance: 0.9650
  Filter pass: 1/1 ✅
  Time: 0.516ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 80       | 0.9650     | $34.88     | ✅     
  2      | 6522     | 1.0422     | $49.95     | ✅     
  3      | 832      | 1.0726     | $69.00     | ✅     
  4      | 777      | 1.1237     | $85.68     | ✅     
  5      | 2636     | 1.1240     | $44.89     | ✅     
  6      | 3127     | 1.1356     | $27.00     | ✅     
  7      | 7695     | 1.1372     | $37.20     | ✅     
  8      | 7721     | 1.1446     | $31.60     | ✅     
  9      | 9776     | 1.1494     | $79.74     | ✅     
  10     | 8805     | 1.1540     | $147.21    | ✅     

  Avg distance: 1.1048
  Filter pass: 10/10 ✅
  Time: 0.522ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.113ms   (10/10 results, avg dist: 1.1048)
    Post-OLD:             0.516ms   (1/10 results, avg dist: 0.9650)
    Post-FIXED:           0.522ms   (10/10 results, avg dist: 1.1048)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   4.62x slower, 10/10 recall
    Post-FIXED vs OLD:   1.01x slower, +9 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 13/16: price > $20 (expected ~8.58% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 8.15%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 80       | 0.9650     | $34.88     | ✅     
  2      | 6522     | 1.0422     | $49.95     | ✅     
  3      | 832      | 1.0726     | $69.00     | ✅     
  4      | 777      | 1.1237     | $85.68     | ✅     
  5      | 2636     | 1.1240     | $44.89     | ✅     
  6      | 3127     | 1.1356     | $27.00     | ✅     
  7      | 7695     | 1.1372     | $37.20     | ✅     
  8      | 7721     | 1.1446     | $31.60     | ✅     
  9      | 9776     | 1.1494     | $79.74     | ✅     
  10     | 8805     | 1.1540     | $147.21    | ✅     

  Avg distance: 1.1048
  Filter pass: 10/10 ✅
  Time: 6.996ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=2):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 1241     | 0.9523     | $20.77     | ✅     
  2      | 80       | 0.9650     | $34.88     | ✅     

  Avg distance: 0.9587
  Filter pass: 2/2 ✅
  Time: 0.432ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 1241     | 0.9523     | $20.77     | ✅     
  2      | 80       | 0.9650     | $34.88     | ✅     
  3      | 6522     | 1.0422     | $49.95     | ✅     
  4      | 1164     | 1.0575     | $24.95     | ✅     
  5      | 832      | 1.0726     | $69.00     | ✅     
  6      | 6870     | 1.0764     | $24.95     | ✅     
  7      | 777      | 1.1237     | $85.68     | ✅     
  8      | 2636     | 1.1240     | $44.89     | ✅     
  9      | 3127     | 1.1356     | $27.00     | ✅     
  10     | 7695     | 1.1372     | $37.20     | ✅     

  Avg distance: 1.0687
  Filter pass: 10/10 ✅
  Time: 0.506ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            6.996ms   (10/10 results, avg dist: 1.1048)
    Post-OLD:             0.432ms   (2/10 results, avg dist: 0.9587)
    Post-FIXED:           0.506ms   (10/10 results, avg dist: 1.0687)

    Speed winner:      Post-OLD
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   0.07x slower, 10/10 recall
    Post-FIXED vs OLD:   1.17x slower, +8 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 14/16: price > $15 (expected ~12.33% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 11.57%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 80       | 0.9650     | $34.88     | ✅     
  2      | 6522     | 1.0422     | $49.95     | ✅     
  3      | 832      | 1.0726     | $69.00     | ✅     
  4      | 777      | 1.1237     | $85.68     | ✅     
  5      | 2636     | 1.1240     | $44.89     | ✅     
  6      | 3127     | 1.1356     | $27.00     | ✅     
  7      | 7695     | 1.1372     | $37.20     | ✅     
  8      | 7721     | 1.1446     | $31.60     | ✅     
  9      | 9776     | 1.1494     | $79.74     | ✅     
  10     | 8805     | 1.1540     | $147.21    | ✅     

  Avg distance: 1.1048
  Filter pass: 10/10 ✅
  Time: 6.965ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=4):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 1241     | 0.9523     | $20.77     | ✅     
  2      | 80       | 0.9650     | $34.88     | ✅     
  3      | 5792     | 0.9785     | $17.98     | ✅     
  4      | 1020     | 1.0023     | $15.27     | ✅     

  Avg distance: 0.9745
  Filter pass: 4/4 ✅
  Time: 0.427ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=9):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 1241     | 0.9523     | $20.77     | ✅     
  2      | 80       | 0.9650     | $34.88     | ✅     
  3      | 5792     | 0.9785     | $17.98     | ✅     
  4      | 1020     | 1.0023     | $15.27     | ✅     
  5      | 6522     | 1.0422     | $49.95     | ✅     
  6      | 1164     | 1.0575     | $24.95     | ✅     
  7      | 832      | 1.0726     | $69.00     | ✅     
  8      | 5892     | 1.0731     | $19.09     | ✅     
  9      | 6870     | 1.0764     | $24.95     | ✅     

  Avg distance: 1.0244
  Filter pass: 9/9 ✅
  Time: 0.374ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            6.965ms   (10/10 results, avg dist: 1.1048)
    Post-OLD:             0.427ms   (4/10 results, avg dist: 0.9745)
    Post-FIXED:           0.374ms   (9/10 results, avg dist: 1.0244)

    Speed winner:      Post-FIXED
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   0.05x slower, 9/10 recall
    Post-FIXED vs OLD:   0.88x slower, +5 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 15/16: price > $10 (expected ~18.0% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 15.84%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 80       | 0.9650     | $34.88     | ✅     
  2      | 6522     | 1.0422     | $49.95     | ✅     
  3      | 832      | 1.0726     | $69.00     | ✅     
  4      | 777      | 1.1237     | $85.68     | ✅     
  5      | 2636     | 1.1240     | $44.89     | ✅     
  6      | 3127     | 1.1356     | $27.00     | ✅     
  7      | 7695     | 1.1372     | $37.20     | ✅     
  8      | 7721     | 1.1446     | $31.60     | ✅     
  9      | 9776     | 1.1494     | $79.74     | ✅     
  10     | 8805     | 1.1540     | $147.21    | ✅     

  Avg distance: 1.1048
  Filter pass: 10/10 ✅
  Time: 6.980ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 1969     | 0.9011     | $10.96     | ✅     
  2      | 1241     | 0.9523     | $20.77     | ✅     
  3      | 80       | 0.9650     | $34.88     | ✅     
  4      | 1237     | 0.9759     | $14.77     | ✅     
  5      | 5792     | 0.9785     | $17.98     | ✅     
  6      | 1232     | 0.9812     | $14.77     | ✅     
  7      | 5768     | 0.9951     | $10.79     | ✅     
  8      | 1020     | 1.0023     | $15.27     | ✅     
  9      | 1220     | 1.0049     | $14.77     | ✅     
  10     | 1888     | 1.0140     | $13.75     | ✅     

  Avg distance: 0.9770
  Filter pass: 10/10 ✅
  Time: 0.423ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 1969     | 0.9011     | $10.96     | ✅     
  2      | 1241     | 0.9523     | $20.77     | ✅     
  3      | 80       | 0.9650     | $34.88     | ✅     
  4      | 1237     | 0.9759     | $14.77     | ✅     
  5      | 5792     | 0.9785     | $17.98     | ✅     
  6      | 1232     | 0.9812     | $14.77     | ✅     
  7      | 5768     | 0.9951     | $10.79     | ✅     
  8      | 1020     | 1.0023     | $15.27     | ✅     
  9      | 1220     | 1.0049     | $14.77     | ✅     
  10     | 1888     | 1.0140     | $13.75     | ✅     

  Avg distance: 0.9770
  Filter pass: 10/10 ✅
  Time: 0.351ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            6.980ms   (10/10 results, avg dist: 1.1048)
    Post-OLD:             0.423ms   (10/10 results, avg dist: 0.9770)
    Post-FIXED:           0.351ms   (10/10 results, avg dist: 0.9770)

    Speed winner:      Post-FIXED
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   0.05x slower, 10/10 recall
    Post-FIXED vs OLD:   0.83x slower, +0 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 16/16: price > $5 (expected ~25.0% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 24.02%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 80       | 0.9650     | $34.88     | ✅     
  2      | 6522     | 1.0422     | $49.95     | ✅     
  3      | 832      | 1.0726     | $69.00     | ✅     
  4      | 777      | 1.1237     | $85.68     | ✅     
  5      | 2636     | 1.1240     | $44.89     | ✅     
  6      | 3127     | 1.1356     | $27.00     | ✅     
  7      | 7695     | 1.1372     | $37.20     | ✅     
  8      | 7721     | 1.1446     | $31.60     | ✅     
  9      | 9776     | 1.1494     | $79.74     | ✅     
  10     | 8805     | 1.1540     | $147.21    | ✅     

  Avg distance: 1.1048
  Filter pass: 10/10 ✅
  Time: 6.907ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 1459     | 0.8291     | $7.24      | ✅     
  2      | 1969     | 0.9011     | $10.96     | ✅     
  3      | 66       | 0.9120     | $6.04      | ✅     
  4      | 1871     | 0.9174     | $8.77      | ✅     
  5      | 1955     | 0.9270     | $9.50      | ✅     
  6      | 827      | 0.9312     | $6.91      | ✅     
  7      | 1971     | 0.9348     | $9.75      | ✅     
  8      | 2062     | 0.9483     | $9.70      | ✅     
  9      | 1612     | 0.9510     | $5.90      | ✅     
  10     | 244      | 0.9510     | $9.77      | ✅     

  Avg distance: 0.9203
  Filter pass: 10/10 ✅
  Time: 0.379ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 1459     | 0.8291     | $7.24      | ✅     
  2      | 1969     | 0.9011     | $10.96     | ✅     
  3      | 66       | 0.9120     | $6.04      | ✅     
  4      | 1871     | 0.9174     | $8.77      | ✅     
  5      | 1955     | 0.9270     | $9.50      | ✅     
  6      | 827      | 0.9312     | $6.91      | ✅     
  7      | 1971     | 0.9348     | $9.75      | ✅     
  8      | 2062     | 0.9483     | $9.70      | ✅     
  9      | 1612     | 0.9510     | $5.90      | ✅     
  10     | 244      | 0.9510     | $9.77      | ✅     

  Avg distance: 0.9203
  Filter pass: 10/10 ✅
  Time: 0.315ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            6.907ms   (10/10 results, avg dist: 1.1048)
    Post-OLD:             0.379ms   (10/10 results, avg dist: 0.9203)
    Post-FIXED:           0.315ms   (10/10 results, avg dist: 0.9203)

    Speed winner:      Post-FIXED
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   0.05x slower, 10/10 recall
    Post-FIXED vs OLD:   0.83x slower, +0 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

============================================================================================================================================
QUERY 5/5: 'smartphone case protective'
============================================================================================================================================

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 1/16: price > $2000 (expected ~0.03% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 0.01%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=1):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 24       | 1.4140     | $2080.00   | ✅     

  Avg distance: 1.4140
  Filter pass: 1/1 ✅
  Time: 0.040ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=0):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------

  Avg distance: 0.0000
  Filter pass: 0/0 ✅
  Time: 0.774ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=0):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------

  Avg distance: 0.0000
  Filter pass: 0/0 ✅
  Time: 1.191ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.040ms   (1/10 results, avg dist: 1.4140)
    Post-OLD:             0.774ms   (0/10 results, avg dist: 0.0000)
    Post-FIXED:           1.191ms   (0/10 results, avg dist: 0.0000)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (1/10)
    Post-FIXED vs Pre:   29.52x slower, 0/1 recall
    Post-FIXED vs OLD:   1.54x slower, +0 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 2/16: price > $1000 (expected ~0.09% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 0.04%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=4):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 8830     | 1.3021     | $1999.99   | ✅     
  2      | 550      | 1.4056     | $1056.26   | ✅     
  3      | 24       | 1.4140     | $2080.00   | ✅     
  4      | 6373     | 1.4454     | $1097.79   | ✅     

  Avg distance: 1.3918
  Filter pass: 4/4 ✅
  Time: 0.024ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=0):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------

  Avg distance: 0.0000
  Filter pass: 0/0 ✅
  Time: 0.652ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=1):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 550      | 1.4056     | $1056.26   | ✅     

  Avg distance: 1.4056
  Filter pass: 1/1 ✅
  Time: 1.122ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.024ms   (4/10 results, avg dist: 1.3918)
    Post-OLD:             0.652ms   (0/10 results, avg dist: 0.0000)
    Post-FIXED:           1.122ms   (1/10 results, avg dist: 1.4056)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (4/10)
    Post-FIXED vs Pre:   46.73x slower, 1/4 recall
    Post-FIXED vs OLD:   1.72x slower, +1 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 3/16: price > $500 (expected ~0.25% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 0.15%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 7230     | 1.2149     | $899.95    | ✅     
  2      | 8830     | 1.3021     | $1999.99   | ✅     
  3      | 8807     | 1.3595     | $980.99    | ✅     
  4      | 8152     | 1.3695     | $698.00    | ✅     
  5      | 9314     | 1.3704     | $999.00    | ✅     
  6      | 8153     | 1.3826     | $700.00    | ✅     
  7      | 550      | 1.4056     | $1056.26   | ✅     
  8      | 8157     | 1.4069     | $689.00    | ✅     
  9      | 9011     | 1.4096     | $724.99    | ✅     
  10     | 7109     | 1.4106     | $549.99    | ✅     

  Avg distance: 1.3632
  Filter pass: 10/10 ✅
  Time: 0.030ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=1):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 7230     | 1.2149     | $899.95    | ✅     

  Avg distance: 1.2149
  Filter pass: 1/1 ✅
  Time: 0.585ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=2):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 7230     | 1.2149     | $899.95    | ✅     
  2      | 550      | 1.4056     | $1056.26   | ✅     

  Avg distance: 1.3103
  Filter pass: 2/2 ✅
  Time: 1.295ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.030ms   (10/10 results, avg dist: 1.3632)
    Post-OLD:             0.585ms   (1/10 results, avg dist: 1.2149)
    Post-FIXED:           1.295ms   (2/10 results, avg dist: 1.3103)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   43.83x slower, 2/10 recall
    Post-FIXED vs OLD:   2.21x slower, +1 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 4/16: price > $300 (expected ~0.57% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 0.26%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 7230     | 1.2149     | $899.95    | ✅     
  2      | 8830     | 1.3021     | $1999.99   | ✅     
  3      | 453      | 1.3178     | $395.00    | ✅     
  4      | 8807     | 1.3595     | $980.99    | ✅     
  5      | 5147     | 1.3627     | $348.00    | ✅     
  6      | 8152     | 1.3695     | $698.00    | ✅     
  7      | 9314     | 1.3704     | $999.00    | ✅     
  8      | 8153     | 1.3826     | $700.00    | ✅     
  9      | 7018     | 1.4047     | $453.00    | ✅     
  10     | 550      | 1.4056     | $1056.26   | ✅     

  Avg distance: 1.3490
  Filter pass: 10/10 ✅
  Time: 0.038ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=1):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 7230     | 1.2149     | $899.95    | ✅     

  Avg distance: 1.2149
  Filter pass: 1/1 ✅
  Time: 0.689ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=2):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 7230     | 1.2149     | $899.95    | ✅     
  2      | 550      | 1.4056     | $1056.26   | ✅     

  Avg distance: 1.3103
  Filter pass: 2/2 ✅
  Time: 1.161ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.038ms   (10/10 results, avg dist: 1.3490)
    Post-OLD:             0.689ms   (1/10 results, avg dist: 1.2149)
    Post-FIXED:           1.161ms   (2/10 results, avg dist: 1.3103)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   30.43x slower, 2/10 recall
    Post-FIXED vs OLD:   1.68x slower, +1 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 5/16: price > $200 (expected ~0.92% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 0.50%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 7316     | 1.2133     | $229.95    | ✅     
  2      | 7230     | 1.2149     | $899.95    | ✅     
  3      | 3275     | 1.2664     | $259.99    | ✅     
  4      | 8830     | 1.3021     | $1999.99   | ✅     
  5      | 4538     | 1.3049     | $249.99    | ✅     
  6      | 453      | 1.3178     | $395.00    | ✅     
  7      | 7986     | 1.3502     | $229.99    | ✅     
  8      | 8807     | 1.3595     | $980.99    | ✅     
  9      | 5147     | 1.3627     | $348.00    | ✅     
  10     | 9257     | 1.3684     | $298.00    | ✅     

  Avg distance: 1.3060
  Filter pass: 10/10 ✅
  Time: 0.036ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=3):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 7316     | 1.2133     | $229.95    | ✅     
  2      | 7230     | 1.2149     | $899.95    | ✅     
  3      | 3275     | 1.2664     | $259.99    | ✅     

  Avg distance: 1.2316
  Filter pass: 3/3 ✅
  Time: 0.629ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=5):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 7316     | 1.2133     | $229.95    | ✅     
  2      | 7230     | 1.2149     | $899.95    | ✅     
  3      | 3275     | 1.2664     | $259.99    | ✅     
  4      | 4538     | 1.3049     | $249.99    | ✅     
  5      | 550      | 1.4056     | $1056.26   | ✅     

  Avg distance: 1.2810
  Filter pass: 5/5 ✅
  Time: 1.164ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.036ms   (10/10 results, avg dist: 1.3060)
    Post-OLD:             0.629ms   (3/10 results, avg dist: 1.2316)
    Post-FIXED:           1.164ms   (5/10 results, avg dist: 1.2810)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   32.60x slower, 5/10 recall
    Post-FIXED vs OLD:   1.85x slower, +2 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 6/16: price > $150 (expected ~1.28% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 0.88%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 3936     | 1.2059     | $199.66    | ✅     
  2      | 7316     | 1.2133     | $229.95    | ✅     
  3      | 7230     | 1.2149     | $899.95    | ✅     
  4      | 3275     | 1.2664     | $259.99    | ✅     
  5      | 8830     | 1.3021     | $1999.99   | ✅     
  6      | 4538     | 1.3049     | $249.99    | ✅     
  7      | 453      | 1.3178     | $395.00    | ✅     
  8      | 5919     | 1.3254     | $153.75    | ✅     
  9      | 7260     | 1.3304     | $173.88    | ✅     
  10     | 436      | 1.3308     | $167.88    | ✅     

  Avg distance: 1.2812
  Filter pass: 10/10 ✅
  Time: 0.091ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=3):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 3936     | 1.2059     | $199.66    | ✅     
  2      | 7316     | 1.2133     | $229.95    | ✅     
  3      | 7230     | 1.2149     | $899.95    | ✅     

  Avg distance: 1.2114
  Filter pass: 3/3 ✅
  Time: 0.532ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=9):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 3936     | 1.2059     | $199.66    | ✅     
  2      | 7316     | 1.2133     | $229.95    | ✅     
  3      | 7230     | 1.2149     | $899.95    | ✅     
  4      | 3275     | 1.2664     | $259.99    | ✅     
  5      | 4538     | 1.3049     | $249.99    | ✅     
  6      | 7260     | 1.3304     | $173.88    | ✅     
  7      | 436      | 1.3308     | $167.88    | ✅     
  8      | 419      | 1.3313     | $167.88    | ✅     
  9      | 550      | 1.4056     | $1056.26   | ✅     

  Avg distance: 1.2893
  Filter pass: 9/9 ✅
  Time: 1.232ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.091ms   (10/10 results, avg dist: 1.2812)
    Post-OLD:             0.532ms   (3/10 results, avg dist: 1.2114)
    Post-FIXED:           1.232ms   (9/10 results, avg dist: 1.2893)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   13.60x slower, 9/10 recall
    Post-FIXED vs OLD:   2.31x slower, +6 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 7/16: price > $100 (expected ~1.85% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 1.42%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 3936     | 1.2059     | $199.66    | ✅     
  2      | 7316     | 1.2133     | $229.95    | ✅     
  3      | 7230     | 1.2149     | $899.95    | ✅     
  4      | 7262     | 1.2229     | $124.95    | ✅     
  5      | 8305     | 1.2229     | $139.99    | ✅     
  6      | 3275     | 1.2664     | $259.99    | ✅     
  7      | 8481     | 1.2732     | $115.99    | ✅     
  8      | 8830     | 1.3021     | $1999.99   | ✅     
  9      | 4538     | 1.3049     | $249.99    | ✅     
  10     | 453      | 1.3178     | $395.00    | ✅     

  Avg distance: 1.2544
  Filter pass: 10/10 ✅
  Time: 0.070ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=5):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 3936     | 1.2059     | $199.66    | ✅     
  2      | 7316     | 1.2133     | $229.95    | ✅     
  3      | 7230     | 1.2149     | $899.95    | ✅     
  4      | 7262     | 1.2229     | $124.95    | ✅     
  5      | 8305     | 1.2229     | $139.99    | ✅     

  Avg distance: 1.2160
  Filter pass: 5/5 ✅
  Time: 0.468ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 3936     | 1.2059     | $199.66    | ✅     
  2      | 7316     | 1.2133     | $229.95    | ✅     
  3      | 7230     | 1.2149     | $899.95    | ✅     
  4      | 7262     | 1.2229     | $124.95    | ✅     
  5      | 8305     | 1.2229     | $139.99    | ✅     
  6      | 3275     | 1.2664     | $259.99    | ✅     
  7      | 8481     | 1.2732     | $115.99    | ✅     
  8      | 4538     | 1.3049     | $249.99    | ✅     
  9      | 960      | 1.3215     | $122.74    | ✅     
  10     | 7260     | 1.3304     | $173.88    | ✅     

  Avg distance: 1.2576
  Filter pass: 10/10 ✅
  Time: 0.747ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.070ms   (10/10 results, avg dist: 1.2544)
    Post-OLD:             0.468ms   (5/10 results, avg dist: 1.2160)
    Post-FIXED:           0.747ms   (10/10 results, avg dist: 1.2576)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   10.71x slower, 10/10 recall
    Post-FIXED vs OLD:   1.60x slower, +5 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 8/16: price > $75 (expected ~2.54% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 2.15%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 944      | 1.1293     | $84.18     | ✅     
  2      | 980      | 1.1751     | $99.00     | ✅     
  3      | 3936     | 1.2059     | $199.66    | ✅     
  4      | 7316     | 1.2133     | $229.95    | ✅     
  5      | 7230     | 1.2149     | $899.95    | ✅     
  6      | 7262     | 1.2229     | $124.95    | ✅     
  7      | 8305     | 1.2229     | $139.99    | ✅     
  8      | 3275     | 1.2664     | $259.99    | ✅     
  9      | 7401     | 1.2680     | $94.00     | ✅     
  10     | 8481     | 1.2732     | $115.99    | ✅     

  Avg distance: 1.2192
  Filter pass: 10/10 ✅
  Time: 0.087ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=7):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 944      | 1.1293     | $84.18     | ✅     
  2      | 980      | 1.1751     | $99.00     | ✅     
  3      | 3936     | 1.2059     | $199.66    | ✅     
  4      | 7316     | 1.2133     | $229.95    | ✅     
  5      | 7230     | 1.2149     | $899.95    | ✅     
  6      | 7262     | 1.2229     | $124.95    | ✅     
  7      | 8305     | 1.2229     | $139.99    | ✅     

  Avg distance: 1.1978
  Filter pass: 7/7 ✅
  Time: 0.545ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 944      | 1.1293     | $84.18     | ✅     
  2      | 980      | 1.1751     | $99.00     | ✅     
  3      | 3936     | 1.2059     | $199.66    | ✅     
  4      | 7316     | 1.2133     | $229.95    | ✅     
  5      | 7230     | 1.2149     | $899.95    | ✅     
  6      | 7262     | 1.2229     | $124.95    | ✅     
  7      | 8305     | 1.2229     | $139.99    | ✅     
  8      | 3275     | 1.2664     | $259.99    | ✅     
  9      | 7401     | 1.2680     | $94.00     | ✅     
  10     | 8481     | 1.2732     | $115.99    | ✅     

  Avg distance: 1.2192
  Filter pass: 10/10 ✅
  Time: 0.630ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.087ms   (10/10 results, avg dist: 1.2192)
    Post-OLD:             0.545ms   (7/10 results, avg dist: 1.1978)
    Post-FIXED:           0.630ms   (10/10 results, avg dist: 1.2192)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   7.28x slower, 10/10 recall
    Post-FIXED vs OLD:   1.16x slower, +3 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 9/16: price > $50 (expected ~3.68% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 3.46%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 7924     | 1.0888     | $69.95     | ✅     
  2      | 6337     | 1.1082     | $69.99     | ✅     
  3      | 944      | 1.1293     | $84.18     | ✅     
  4      | 980      | 1.1751     | $99.00     | ✅     
  5      | 3936     | 1.2059     | $199.66    | ✅     
  6      | 7316     | 1.2133     | $229.95    | ✅     
  7      | 7230     | 1.2149     | $899.95    | ✅     
  8      | 7262     | 1.2229     | $124.95    | ✅     
  9      | 8305     | 1.2229     | $139.99    | ✅     
  10     | 4507     | 1.2378     | $67.72     | ✅     

  Avg distance: 1.1819
  Filter pass: 10/10 ✅
  Time: 0.085ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=9):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 7924     | 1.0888     | $69.95     | ✅     
  2      | 6337     | 1.1082     | $69.99     | ✅     
  3      | 944      | 1.1293     | $84.18     | ✅     
  4      | 980      | 1.1751     | $99.00     | ✅     
  5      | 3936     | 1.2059     | $199.66    | ✅     
  6      | 7316     | 1.2133     | $229.95    | ✅     
  7      | 7230     | 1.2149     | $899.95    | ✅     
  8      | 7262     | 1.2229     | $124.95    | ✅     
  9      | 8305     | 1.2229     | $139.99    | ✅     

  Avg distance: 1.1757
  Filter pass: 9/9 ✅
  Time: 0.422ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 7924     | 1.0888     | $69.95     | ✅     
  2      | 6337     | 1.1082     | $69.99     | ✅     
  3      | 944      | 1.1293     | $84.18     | ✅     
  4      | 980      | 1.1751     | $99.00     | ✅     
  5      | 3936     | 1.2059     | $199.66    | ✅     
  6      | 7316     | 1.2133     | $229.95    | ✅     
  7      | 7230     | 1.2149     | $899.95    | ✅     
  8      | 7262     | 1.2229     | $124.95    | ✅     
  9      | 8305     | 1.2229     | $139.99    | ✅     
  10     | 4507     | 1.2378     | $67.72     | ✅     

  Avg distance: 1.1819
  Filter pass: 10/10 ✅
  Time: 0.556ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.085ms   (10/10 results, avg dist: 1.1819)
    Post-OLD:             0.422ms   (9/10 results, avg dist: 1.1757)
    Post-FIXED:           0.556ms   (10/10 results, avg dist: 1.1819)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   6.57x slower, 10/10 recall
    Post-FIXED vs OLD:   1.32x slower, +1 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 10/16: price > $40 (expected ~4.49% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 4.27%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 7924     | 1.0888     | $69.95     | ✅     
  2      | 6337     | 1.1082     | $69.99     | ✅     
  3      | 944      | 1.1293     | $84.18     | ✅     
  4      | 980      | 1.1751     | $99.00     | ✅     
  5      | 3936     | 1.2059     | $199.66    | ✅     
  6      | 7316     | 1.2133     | $229.95    | ✅     
  7      | 7230     | 1.2149     | $899.95    | ✅     
  8      | 7262     | 1.2229     | $124.95    | ✅     
  9      | 8305     | 1.2229     | $139.99    | ✅     
  10     | 4507     | 1.2378     | $67.72     | ✅     

  Avg distance: 1.1819
  Filter pass: 10/10 ✅
  Time: 2.322ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 953      | 1.0747     | $45.74     | ✅     
  2      | 7924     | 1.0888     | $69.95     | ✅     
  3      | 6337     | 1.1082     | $69.99     | ✅     
  4      | 944      | 1.1293     | $84.18     | ✅     
  5      | 6326     | 1.1392     | $42.49     | ✅     
  6      | 980      | 1.1751     | $99.00     | ✅     
  7      | 3936     | 1.2059     | $199.66    | ✅     
  8      | 7316     | 1.2133     | $229.95    | ✅     
  9      | 7230     | 1.2149     | $899.95    | ✅     
  10     | 7262     | 1.2229     | $124.95    | ✅     

  Avg distance: 1.1572
  Filter pass: 10/10 ✅
  Time: 0.622ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 953      | 1.0747     | $45.74     | ✅     
  2      | 7924     | 1.0888     | $69.95     | ✅     
  3      | 6337     | 1.1082     | $69.99     | ✅     
  4      | 944      | 1.1293     | $84.18     | ✅     
  5      | 6326     | 1.1392     | $42.49     | ✅     
  6      | 980      | 1.1751     | $99.00     | ✅     
  7      | 3936     | 1.2059     | $199.66    | ✅     
  8      | 7316     | 1.2133     | $229.95    | ✅     
  9      | 7230     | 1.2149     | $899.95    | ✅     
  10     | 7262     | 1.2229     | $124.95    | ✅     

  Avg distance: 1.1572
  Filter pass: 10/10 ✅
  Time: 0.591ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            2.322ms   (10/10 results, avg dist: 1.1819)
    Post-OLD:             0.622ms   (10/10 results, avg dist: 1.1572)
    Post-FIXED:           0.591ms   (10/10 results, avg dist: 1.1572)

    Speed winner:      Post-FIXED
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   0.25x slower, 10/10 recall
    Post-FIXED vs OLD:   0.95x slower, +0 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 11/16: price > $30 (expected ~5.88% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 5.52%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 953      | 1.0747     | $45.74     | ✅     
  2      | 952      | 1.0792     | $37.52     | ✅     
  3      | 7924     | 1.0888     | $69.95     | ✅     
  4      | 6337     | 1.1082     | $69.99     | ✅     
  5      | 6348     | 1.1108     | $34.99     | ✅     
  6      | 1937     | 1.1138     | $34.00     | ✅     
  7      | 2049     | 1.1167     | $34.00     | ✅     
  8      | 944      | 1.1293     | $84.18     | ✅     
  9      | 6326     | 1.1392     | $42.49     | ✅     
  10     | 5893     | 1.1744     | $39.80     | ✅     

  Avg distance: 1.1135
  Filter pass: 10/10 ✅
  Time: 5.900ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=9):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 953      | 1.0747     | $45.74     | ✅     
  2      | 952      | 1.0792     | $37.52     | ✅     
  3      | 7924     | 1.0888     | $69.95     | ✅     
  4      | 6337     | 1.1082     | $69.99     | ✅     
  5      | 6348     | 1.1108     | $34.99     | ✅     
  6      | 1937     | 1.1138     | $34.00     | ✅     
  7      | 2049     | 1.1167     | $34.00     | ✅     
  8      | 944      | 1.1293     | $84.18     | ✅     
  9      | 6326     | 1.1392     | $42.49     | ✅     

  Avg distance: 1.1067
  Filter pass: 9/9 ✅
  Time: 0.430ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 953      | 1.0747     | $45.74     | ✅     
  2      | 952      | 1.0792     | $37.52     | ✅     
  3      | 7924     | 1.0888     | $69.95     | ✅     
  4      | 6337     | 1.1082     | $69.99     | ✅     
  5      | 6348     | 1.1108     | $34.99     | ✅     
  6      | 1937     | 1.1138     | $34.00     | ✅     
  7      | 2049     | 1.1167     | $34.00     | ✅     
  8      | 944      | 1.1293     | $84.18     | ✅     
  9      | 6326     | 1.1392     | $42.49     | ✅     
  10     | 5893     | 1.1744     | $39.80     | ✅     

  Avg distance: 1.1135
  Filter pass: 10/10 ✅
  Time: 0.528ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            5.900ms   (10/10 results, avg dist: 1.1135)
    Post-OLD:             0.430ms   (9/10 results, avg dist: 1.1067)
    Post-FIXED:           0.528ms   (10/10 results, avg dist: 1.1135)

    Speed winner:      Post-OLD
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   0.09x slower, 10/10 recall
    Post-FIXED vs OLD:   1.23x slower, +1 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 12/16: price > $25 (expected ~7.06% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 6.88%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 6325     | 1.0465     | $29.99     | ✅     
  2      | 6340     | 1.0558     | $29.45     | ✅     
  3      | 953      | 1.0747     | $45.74     | ✅     
  4      | 952      | 1.0792     | $37.52     | ✅     
  5      | 7924     | 1.0888     | $69.95     | ✅     
  6      | 6337     | 1.1082     | $69.99     | ✅     
  7      | 6348     | 1.1108     | $34.99     | ✅     
  8      | 1937     | 1.1138     | $34.00     | ✅     
  9      | 2049     | 1.1167     | $34.00     | ✅     
  10     | 944      | 1.1293     | $84.18     | ✅     

  Avg distance: 1.0924
  Filter pass: 10/10 ✅
  Time: 0.109ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 6325     | 1.0465     | $29.99     | ✅     
  2      | 6340     | 1.0558     | $29.45     | ✅     
  3      | 953      | 1.0747     | $45.74     | ✅     
  4      | 952      | 1.0792     | $37.52     | ✅     
  5      | 7924     | 1.0888     | $69.95     | ✅     
  6      | 6337     | 1.1082     | $69.99     | ✅     
  7      | 6348     | 1.1108     | $34.99     | ✅     
  8      | 1937     | 1.1138     | $34.00     | ✅     
  9      | 2049     | 1.1167     | $34.00     | ✅     
  10     | 944      | 1.1293     | $84.18     | ✅     

  Avg distance: 1.0924
  Filter pass: 10/10 ✅
  Time: 0.336ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 6325     | 1.0465     | $29.99     | ✅     
  2      | 6340     | 1.0558     | $29.45     | ✅     
  3      | 953      | 1.0747     | $45.74     | ✅     
  4      | 952      | 1.0792     | $37.52     | ✅     
  5      | 7924     | 1.0888     | $69.95     | ✅     
  6      | 6337     | 1.1082     | $69.99     | ✅     
  7      | 6348     | 1.1108     | $34.99     | ✅     
  8      | 1937     | 1.1138     | $34.00     | ✅     
  9      | 2049     | 1.1167     | $34.00     | ✅     
  10     | 944      | 1.1293     | $84.18     | ✅     

  Avg distance: 1.0924
  Filter pass: 10/10 ✅
  Time: 0.471ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            0.109ms   (10/10 results, avg dist: 1.0924)
    Post-OLD:             0.336ms   (10/10 results, avg dist: 1.0924)
    Post-FIXED:           0.471ms   (10/10 results, avg dist: 1.0924)

    Speed winner:      Pre-Filter
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   4.32x slower, 10/10 recall
    Post-FIXED vs OLD:   1.40x slower, +0 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 13/16: price > $20 (expected ~8.58% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 8.15%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 6325     | 1.0465     | $29.99     | ✅     
  2      | 6340     | 1.0558     | $29.45     | ✅     
  3      | 953      | 1.0747     | $45.74     | ✅     
  4      | 952      | 1.0792     | $37.52     | ✅     
  5      | 7924     | 1.0888     | $69.95     | ✅     
  6      | 6337     | 1.1082     | $69.99     | ✅     
  7      | 6348     | 1.1108     | $34.99     | ✅     
  8      | 1937     | 1.1138     | $34.00     | ✅     
  9      | 2049     | 1.1167     | $34.00     | ✅     
  10     | 944      | 1.1293     | $84.18     | ✅     

  Avg distance: 1.0924
  Filter pass: 10/10 ✅
  Time: 7.020ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 9470     | 1.0336     | $24.53     | ✅     
  2      | 6325     | 1.0465     | $29.99     | ✅     
  3      | 6340     | 1.0558     | $29.45     | ✅     
  4      | 953      | 1.0747     | $45.74     | ✅     
  5      | 952      | 1.0792     | $37.52     | ✅     
  6      | 7924     | 1.0888     | $69.95     | ✅     
  7      | 6337     | 1.1082     | $69.99     | ✅     
  8      | 6348     | 1.1108     | $34.99     | ✅     
  9      | 1937     | 1.1138     | $34.00     | ✅     
  10     | 2049     | 1.1167     | $34.00     | ✅     

  Avg distance: 1.0828
  Filter pass: 10/10 ✅
  Time: 0.433ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 9470     | 1.0336     | $24.53     | ✅     
  2      | 6325     | 1.0465     | $29.99     | ✅     
  3      | 6340     | 1.0558     | $29.45     | ✅     
  4      | 953      | 1.0747     | $45.74     | ✅     
  5      | 952      | 1.0792     | $37.52     | ✅     
  6      | 7924     | 1.0888     | $69.95     | ✅     
  7      | 6337     | 1.1082     | $69.99     | ✅     
  8      | 6348     | 1.1108     | $34.99     | ✅     
  9      | 1937     | 1.1138     | $34.00     | ✅     
  10     | 2049     | 1.1167     | $34.00     | ✅     

  Avg distance: 1.0828
  Filter pass: 10/10 ✅
  Time: 0.446ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            7.020ms   (10/10 results, avg dist: 1.0924)
    Post-OLD:             0.433ms   (10/10 results, avg dist: 1.0828)
    Post-FIXED:           0.446ms   (10/10 results, avg dist: 1.0828)

    Speed winner:      Post-OLD
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   0.06x slower, 10/10 recall
    Post-FIXED vs OLD:   1.03x slower, +0 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 14/16: price > $15 (expected ~12.33% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 11.57%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 6325     | 1.0465     | $29.99     | ✅     
  2      | 6340     | 1.0558     | $29.45     | ✅     
  3      | 953      | 1.0747     | $45.74     | ✅     
  4      | 952      | 1.0792     | $37.52     | ✅     
  5      | 7924     | 1.0888     | $69.95     | ✅     
  6      | 6337     | 1.1082     | $69.99     | ✅     
  7      | 6348     | 1.1108     | $34.99     | ✅     
  8      | 1937     | 1.1138     | $34.00     | ✅     
  9      | 2049     | 1.1167     | $34.00     | ✅     
  10     | 944      | 1.1293     | $84.18     | ✅     

  Avg distance: 1.0924
  Filter pass: 10/10 ✅
  Time: 6.862ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 9470     | 1.0336     | $24.53     | ✅     
  2      | 6325     | 1.0465     | $29.99     | ✅     
  3      | 1102     | 1.0493     | $19.99     | ✅     
  4      | 6340     | 1.0558     | $29.45     | ✅     
  5      | 953      | 1.0747     | $45.74     | ✅     
  6      | 952      | 1.0792     | $37.52     | ✅     
  7      | 7924     | 1.0888     | $69.95     | ✅     
  8      | 6344     | 1.0989     | $15.94     | ✅     
  9      | 6337     | 1.1082     | $69.99     | ✅     
  10     | 6348     | 1.1108     | $34.99     | ✅     

  Avg distance: 1.0746
  Filter pass: 10/10 ✅
  Time: 0.425ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 9470     | 1.0336     | $24.53     | ✅     
  2      | 6325     | 1.0465     | $29.99     | ✅     
  3      | 1102     | 1.0493     | $19.99     | ✅     
  4      | 6340     | 1.0558     | $29.45     | ✅     
  5      | 953      | 1.0747     | $45.74     | ✅     
  6      | 952      | 1.0792     | $37.52     | ✅     
  7      | 7924     | 1.0888     | $69.95     | ✅     
  8      | 6344     | 1.0989     | $15.94     | ✅     
  9      | 6337     | 1.1082     | $69.99     | ✅     
  10     | 6348     | 1.1108     | $34.99     | ✅     

  Avg distance: 1.0746
  Filter pass: 10/10 ✅
  Time: 0.356ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            6.862ms   (10/10 results, avg dist: 1.0924)
    Post-OLD:             0.425ms   (10/10 results, avg dist: 1.0746)
    Post-FIXED:           0.356ms   (10/10 results, avg dist: 1.0746)

    Speed winner:      Post-FIXED
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   0.05x slower, 10/10 recall
    Post-FIXED vs OLD:   0.84x slower, +0 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 15/16: price > $10 (expected ~18.0% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 15.84%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 6325     | 1.0465     | $29.99     | ✅     
  2      | 6340     | 1.0558     | $29.45     | ✅     
  3      | 953      | 1.0747     | $45.74     | ✅     
  4      | 952      | 1.0792     | $37.52     | ✅     
  5      | 7924     | 1.0888     | $69.95     | ✅     
  6      | 6337     | 1.1082     | $69.99     | ✅     
  7      | 6348     | 1.1108     | $34.99     | ✅     
  8      | 1937     | 1.1138     | $34.00     | ✅     
  9      | 2049     | 1.1167     | $34.00     | ✅     
  10     | 944      | 1.1293     | $84.18     | ✅     

  Avg distance: 1.0924
  Filter pass: 10/10 ✅
  Time: 6.892ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 9470     | 1.0336     | $24.53     | ✅     
  2      | 5057     | 1.0424     | $13.06     | ✅     
  3      | 6325     | 1.0465     | $29.99     | ✅     
  4      | 1102     | 1.0493     | $19.99     | ✅     
  5      | 6340     | 1.0558     | $29.45     | ✅     
  6      | 953      | 1.0747     | $45.74     | ✅     
  7      | 952      | 1.0792     | $37.52     | ✅     
  8      | 7924     | 1.0888     | $69.95     | ✅     
  9      | 6344     | 1.0989     | $15.94     | ✅     
  10     | 6337     | 1.1082     | $69.99     | ✅     

  Avg distance: 1.0677
  Filter pass: 10/10 ✅
  Time: 0.426ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 9470     | 1.0336     | $24.53     | ✅     
  2      | 5057     | 1.0424     | $13.06     | ✅     
  3      | 6325     | 1.0465     | $29.99     | ✅     
  4      | 1102     | 1.0493     | $19.99     | ✅     
  5      | 6340     | 1.0558     | $29.45     | ✅     
  6      | 953      | 1.0747     | $45.74     | ✅     
  7      | 952      | 1.0792     | $37.52     | ✅     
  8      | 7924     | 1.0888     | $69.95     | ✅     
  9      | 6344     | 1.0989     | $15.94     | ✅     
  10     | 6337     | 1.1082     | $69.99     | ✅     

  Avg distance: 1.0677
  Filter pass: 10/10 ✅
  Time: 0.358ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            6.892ms   (10/10 results, avg dist: 1.0924)
    Post-OLD:             0.426ms   (10/10 results, avg dist: 1.0677)
    Post-FIXED:           0.358ms   (10/10 results, avg dist: 1.0677)

    Speed winner:      Post-FIXED
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   0.05x slower, 10/10 recall
    Post-FIXED vs OLD:   0.84x slower, +0 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 16/16: price > $5 (expected ~25.0% selectivity)
--------------------------------------------------------------------------------------------------------------------------------------------
  Actual selectivity (sampled): 24.02%

  >>> METHOD 1: Pre-Filter (Separate Cached HNSW)

  Pre-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 6325     | 1.0465     | $29.99     | ✅     
  2      | 6340     | 1.0558     | $29.45     | ✅     
  3      | 953      | 1.0747     | $45.74     | ✅     
  4      | 952      | 1.0792     | $37.52     | ✅     
  5      | 7924     | 1.0888     | $69.95     | ✅     
  6      | 6337     | 1.1082     | $69.99     | ✅     
  7      | 6348     | 1.1108     | $34.99     | ✅     
  8      | 1937     | 1.1138     | $34.00     | ✅     
  9      | 2049     | 1.1167     | $34.00     | ✅     
  10     | 944      | 1.1293     | $84.18     | ✅     

  Avg distance: 1.0924
  Filter pass: 10/10 ✅
  Time: 6.608ms

  >>> METHOD 2: Post-Filter (OLD - Fixed k_search=1000)

  Post-OLD Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 789      | 0.9992     | $5.49      | ✅     
  2      | 9470     | 1.0336     | $24.53     | ✅     
  3      | 5057     | 1.0424     | $13.06     | ✅     
  4      | 6325     | 1.0465     | $29.99     | ✅     
  5      | 1102     | 1.0493     | $19.99     | ✅     
  6      | 6340     | 1.0558     | $29.45     | ✅     
  7      | 954      | 1.0703     | $5.44      | ✅     
  8      | 953      | 1.0747     | $45.74     | ✅     
  9      | 952      | 1.0792     | $37.52     | ✅     
  10     | 2335     | 1.0881     | $9.51      | ✅     

  Avg distance: 1.0539
  Filter pass: 10/10 ✅
  Time: 0.521ms

  >>> METHOD 3: Post-Filter (FIXED - Adaptive k_search)

  Post-FIXED Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Filter
  ------|----------|------------|------------|-------
  1      | 789      | 0.9992     | $5.49      | ✅     
  2      | 9470     | 1.0336     | $24.53     | ✅     
  3      | 5057     | 1.0424     | $13.06     | ✅     
  4      | 6325     | 1.0465     | $29.99     | ✅     
  5      | 1102     | 1.0493     | $19.99     | ✅     
  6      | 6340     | 1.0558     | $29.45     | ✅     
  7      | 954      | 1.0703     | $5.44      | ✅     
  8      | 953      | 1.0747     | $45.74     | ✅     
  9      | 952      | 1.0792     | $37.52     | ✅     
  10     | 2335     | 1.0881     | $9.51      | ✅     

  Avg distance: 1.0539
  Filter pass: 10/10 ✅
  Time: 0.373ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  COMPARISON:
    Pre-Filter:            6.608ms   (10/10 results, avg dist: 1.0924)
    Post-OLD:             0.521ms   (10/10 results, avg dist: 1.0539)
    Post-FIXED:           0.373ms   (10/10 results, avg dist: 1.0539)

    Speed winner:      Post-FIXED
    Recall winner:    Pre-Filter (10/10)
    Post-FIXED vs Pre:   0.06x slower, 10/10 recall
    Post-FIXED vs OLD:   0.72x slower, +0 results
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

============================================================================================================================================
📊 SUMMARY
============================================================================================================================================

Query                          | Filter          | Sel%   | Pre(ms)   | OLD(ms)   | FIX(ms)   | Pre#  | OLD#  | FIX#  | Winner      
--------------------------------------------------------------------------------------------------------------------------------------------
laptop computer high quality   | price > $2000   |  0.01% |     0.18 |     1.52 |     1.22 |    1 |    0 |    0 | Pre-Filter  
laptop computer high quality   | price > $1000   |  0.04% |     0.04 |     0.78 |     1.18 |    4 |    1 |    1 | Pre-Filter  
laptop computer high quality   | price > $500    |  0.15% |     0.21 |     0.68 |     1.16 |   10 |    1 |    1 | Pre-Filter  
laptop computer high quality   | price > $300    |  0.26% |     0.05 |     0.85 |     1.32 |   10 |    1 |    4 | Pre-Filter  
laptop computer high quality   | price > $200    |  0.50% |     0.06 |     0.61 |     1.17 |   10 |    1 |    5 | Pre-Filter  
laptop computer high quality   | price > $150    |  0.88% |     0.08 |     0.60 |     1.16 |   10 |    3 |    9 | Pre-Filter  
laptop computer high quality   | price > $100    |  1.42% |     0.06 |     0.49 |     0.80 |   10 |    3 |   10 | Pre-Filter  
laptop computer high quality   | price > $75     |  2.15% |     0.07 |     0.44 |     0.71 |   10 |    6 |   10 | Pre-Filter  
laptop computer high quality   | price > $50     |  3.46% |     0.09 |     0.49 |     0.58 |   10 |   10 |   10 | Pre-Filter  
laptop computer high quality   | price > $40     |  4.27% |     2.36 |     0.47 |     0.55 |   10 |   10 |   10 | Post-OLD    
laptop computer high quality   | price > $30     |  5.52% |     5.78 |     0.48 |     0.49 |   10 |   10 |   10 | Post-OLD    
laptop computer high quality   | price > $25     |  6.88% |     0.15 |     0.35 |     0.67 |   10 |    9 |   10 | Pre-Filter  
laptop computer high quality   | price > $20     |  8.15% |     6.71 |     0.50 |     0.52 |   10 |   10 |   10 | Post-OLD    
laptop computer high quality   | price > $15     | 11.57% |     6.79 |     0.47 |     0.40 |   10 |   10 |   10 | Post-FIXED  
laptop computer high quality   | price > $10     | 15.84% |     6.82 |     0.50 |     0.39 |   10 |   10 |   10 | Post-FIXED  
laptop computer high quality   | price > $5      | 24.02% |     6.79 |     0.46 |     0.38 |   10 |   10 |   10 | Post-FIXED  
wireless bluetooth headphone   | price > $2000   |  0.01% |     0.03 |     0.65 |     0.93 |    1 |    0 |    0 | Pre-Filter  
wireless bluetooth headphone   | price > $1000   |  0.04% |     0.03 |     0.55 |     0.92 |    4 |    0 |    0 | Pre-Filter  
wireless bluetooth headphone   | price > $500    |  0.15% |     0.03 |     0.51 |     0.91 |   10 |    1 |    1 | Pre-Filter  
wireless bluetooth headphone   | price > $300    |  0.26% |     0.04 |     0.54 |     0.93 |   10 |    1 |    1 | Pre-Filter  
wireless bluetooth headphone   | price > $200    |  0.50% |     0.05 |     0.52 |     0.91 |   10 |    2 |    2 | Pre-Filter  
wireless bluetooth headphone   | price > $150    |  0.88% |     0.07 |     0.51 |     0.71 |   10 |    3 |    3 | Pre-Filter  
wireless bluetooth headphone   | price > $100    |  1.42% |     0.08 |     0.49 |     0.72 |   10 |    2 |    8 | Pre-Filter  
wireless bluetooth headphone   | price > $75     |  2.15% |     0.06 |     0.39 |     0.52 |   10 |    3 |   10 | Pre-Filter  
wireless bluetooth headphone   | price > $50     |  3.46% |     0.11 |     0.41 |     0.48 |   10 |    7 |   10 | Pre-Filter  
wireless bluetooth headphone   | price > $40     |  4.27% |     2.39 |     0.45 |     0.46 |   10 |    9 |   10 | Post-OLD    
wireless bluetooth headphone   | price > $30     |  5.52% |     5.87 |     0.45 |     0.44 |   10 |   10 |   10 | Post-FIXED  
wireless bluetooth headphone   | price > $25     |  6.88% |     0.10 |     0.29 |     0.41 |   10 |    0 |   10 | Pre-Filter  
wireless bluetooth headphone   | price > $20     |  8.15% |     6.99 |     0.39 |     0.53 |   10 |    0 |   10 | Post-OLD    
wireless bluetooth headphone   | price > $15     | 11.57% |     6.74 |     0.39 |     0.37 |   10 |    1 |    9 | Post-FIXED  
wireless bluetooth headphone   | price > $10     | 15.84% |     6.76 |     0.36 |     0.33 |   10 |    4 |   10 | Post-FIXED  
wireless bluetooth headphone   | price > $5      | 24.02% |     6.90 |     0.38 |     0.32 |   10 |   10 |   10 | Post-FIXED  
gaming mouse RGB               | price > $2000   |  0.01% |     0.03 |     0.84 |     1.32 |    1 |    0 |    0 | Pre-Filter  
gaming mouse RGB               | price > $1000   |  0.04% |     0.02 |     0.70 |     1.25 |    4 |    1 |    1 | Pre-Filter  
gaming mouse RGB               | price > $500    |  0.15% |     0.04 |     0.81 |     1.33 |   10 |    1 |    1 | Pre-Filter  
gaming mouse RGB               | price > $300    |  0.26% |     0.03 |     0.64 |     1.26 |   10 |    1 |    4 | Pre-Filter  
gaming mouse RGB               | price > $200    |  0.50% |     0.05 |     0.81 |     1.28 |   10 |    3 |    9 | Pre-Filter  
gaming mouse RGB               | price > $150    |  0.88% |     0.07 |     0.65 |     0.85 |   10 |    7 |   10 | Pre-Filter  
gaming mouse RGB               | price > $100    |  1.42% |     0.06 |     0.60 |     0.85 |   10 |    5 |   10 | Pre-Filter  
gaming mouse RGB               | price > $75     |  2.15% |     0.07 |     0.48 |     0.64 |   10 |    6 |   10 | Pre-Filter  
gaming mouse RGB               | price > $50     |  3.46% |     0.08 |     0.49 |     0.72 |   10 |    9 |   10 | Pre-Filter  
gaming mouse RGB               | price > $40     |  4.27% |     2.25 |     0.45 |     0.53 |   10 |    3 |   10 | Post-OLD    
gaming mouse RGB               | price > $30     |  5.52% |     5.79 |     0.53 |     0.54 |   10 |    3 |   10 | Post-OLD    
gaming mouse RGB               | price > $25     |  6.88% |     0.11 |     0.36 |     0.49 |   10 |    3 |   10 | Pre-Filter  
gaming mouse RGB               | price > $20     |  8.15% |     6.87 |     0.55 |     0.60 |   10 |    3 |   10 | Post-OLD    
gaming mouse RGB               | price > $15     | 11.57% |     6.75 |     0.53 |     0.44 |   10 |    6 |   10 | Post-FIXED  
gaming mouse RGB               | price > $10     | 15.84% |     6.92 |     0.51 |     0.42 |   10 |    9 |   10 | Post-FIXED  
gaming mouse RGB               | price > $5      | 24.02% |     6.87 |     0.48 |     0.39 |   10 |   10 |   10 | Post-FIXED  
USB cable charger              | price > $2000   |  0.01% |     0.03 |     0.75 |     1.06 |    1 |    0 |    0 | Pre-Filter  
USB cable charger              | price > $1000   |  0.04% |     0.03 |     0.63 |     1.05 |    4 |    0 |    0 | Pre-Filter  
USB cable charger              | price > $500    |  0.15% |     0.02 |     0.55 |     1.05 |   10 |    0 |    0 | Pre-Filter  
USB cable charger              | price > $300    |  0.26% |     0.05 |     0.68 |     1.03 |   10 |    0 |    0 | Pre-Filter  
USB cable charger              | price > $200    |  0.50% |     0.04 |     0.60 |     1.02 |   10 |    1 |    3 | Pre-Filter  
USB cable charger              | price > $150    |  0.88% |     0.05 |     0.42 |     0.91 |   10 |    0 |    5 | Pre-Filter  
USB cable charger              | price > $100    |  1.42% |     0.07 |     0.64 |     0.71 |   10 |    2 |    8 | Pre-Filter  
USB cable charger              | price > $75     |  2.15% |     0.06 |     0.44 |     0.70 |   10 |    1 |   10 | Pre-Filter  
USB cable charger              | price > $50     |  3.46% |     0.08 |     0.49 |     0.70 |   10 |    2 |   10 | Pre-Filter  
USB cable charger              | price > $40     |  4.27% |     2.28 |     0.47 |     0.61 |   10 |    4 |   10 | Post-OLD    
USB cable charger              | price > $30     |  5.52% |     6.03 |     0.56 |     0.53 |   10 |    7 |   10 | Post-FIXED  
USB cable charger              | price > $25     |  6.88% |     0.11 |     0.52 |     0.52 |   10 |    1 |   10 | Pre-Filter  
USB cable charger              | price > $20     |  8.15% |     7.00 |     0.43 |     0.51 |   10 |    2 |   10 | Post-OLD    
USB cable charger              | price > $15     | 11.57% |     6.97 |     0.43 |     0.37 |   10 |    4 |    9 | Post-FIXED  
USB cable charger              | price > $10     | 15.84% |     6.98 |     0.42 |     0.35 |   10 |   10 |   10 | Post-FIXED  
USB cable charger              | price > $5      | 24.02% |     6.91 |     0.38 |     0.31 |   10 |   10 |   10 | Post-FIXED  
smartphone case protective     | price > $2000   |  0.01% |     0.04 |     0.77 |     1.19 |    1 |    0 |    0 | Pre-Filter  
smartphone case protective     | price > $1000   |  0.04% |     0.02 |     0.65 |     1.12 |    4 |    0 |    1 | Pre-Filter  
smartphone case protective     | price > $500    |  0.15% |     0.03 |     0.59 |     1.29 |   10 |    1 |    2 | Pre-Filter  
smartphone case protective     | price > $300    |  0.26% |     0.04 |     0.69 |     1.16 |   10 |    1 |    2 | Pre-Filter  
smartphone case protective     | price > $200    |  0.50% |     0.04 |     0.63 |     1.16 |   10 |    3 |    5 | Pre-Filter  
smartphone case protective     | price > $150    |  0.88% |     0.09 |     0.53 |     1.23 |   10 |    3 |    9 | Pre-Filter  
smartphone case protective     | price > $100    |  1.42% |     0.07 |     0.47 |     0.75 |   10 |    5 |   10 | Pre-Filter  
smartphone case protective     | price > $75     |  2.15% |     0.09 |     0.54 |     0.63 |   10 |    7 |   10 | Pre-Filter  
smartphone case protective     | price > $50     |  3.46% |     0.08 |     0.42 |     0.56 |   10 |    9 |   10 | Pre-Filter  
smartphone case protective     | price > $40     |  4.27% |     2.32 |     0.62 |     0.59 |   10 |   10 |   10 | Post-FIXED  
smartphone case protective     | price > $30     |  5.52% |     5.90 |     0.43 |     0.53 |   10 |    9 |   10 | Post-OLD    
smartphone case protective     | price > $25     |  6.88% |     0.11 |     0.34 |     0.47 |   10 |   10 |   10 | Pre-Filter  
smartphone case protective     | price > $20     |  8.15% |     7.02 |     0.43 |     0.45 |   10 |   10 |   10 | Post-OLD    
smartphone case protective     | price > $15     | 11.57% |     6.86 |     0.43 |     0.36 |   10 |   10 |   10 | Post-FIXED  
smartphone case protective     | price > $10     | 15.84% |     6.89 |     0.43 |     0.36 |   10 |   10 |   10 | Post-FIXED  
smartphone case protective     | price > $5      | 24.02% |     6.61 |     0.52 |     0.37 |   10 |   10 |   10 | Post-FIXED  

============================================================================================================================================
ANALYSIS
============================================================================================================================================

Recall (10/10 results):
  Pre-Filter:    70/80 (87.5%)
  Post-OLD:      18/80 (22.5%)
  Post-FIXED:    47/80 (58.8%)

Average Speed:
  Pre-Filter:    2.27ms
  Post-OLD:      0.54ms
  Post-FIXED:    0.74ms

============================================================================================================================================
Complete!  Saved to recall_fix_20251218_131604.log
============================================================================================================================================
