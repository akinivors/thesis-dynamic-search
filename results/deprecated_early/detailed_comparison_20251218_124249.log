============================================================================================================================================
DETAILED COMPARISON:   TRUE Bitmap vs Post-Filter (With Distance Scores)
============================================================================================================================================

Timestamp: 2025-12-18 12:42:49.816383
Log file: detailed_comparison_20251218_124249.log
Results file: detailed_comparison_20251218_124249.json
============================================================================================================================================

[1/4] Initializing engine...

[2/4] Test queries: 3
  1. 'laptop computer high quality'
  2. 'wireless bluetooth headphones'
  3. 'gaming mouse RGB'

[3/4] Defining test cases...

Total test cases: 6

[4/4] Running experiments...
============================================================================================================================================

============================================================================================================================================
QUERY 1/3: 'laptop computer high quality'
============================================================================================================================================

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 1/6: price > $2000
--------------------------------------------------------------------------------------------------------------------------------------------
  Filter: price > $2000
  Type: numeric
  Matching items (sampled): ~1 (0.01% selectivity)

  >>> STRATEGY 1: TRUE Bitmap Filter (Global HNSW)
  No results or error

  >>> STRATEGY 2: Post-Filter HNSW
  No results or error

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  DETAILED COMPARISON:
    Cannot compare (insufficient results)
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 2/6: price > $500
--------------------------------------------------------------------------------------------------------------------------------------------
  Filter: price > $500
  Type: numeric
  Matching items (sampled): ~15 (0.15% selectivity)

  >>> STRATEGY 1: TRUE Bitmap Filter (Global HNSW)

  TRUE Bitmap Results (k=1):
  Rank   | Item ID  | Distance   | Price      | Title                                              | Filter
  ------|----------|------------|------------|----------------------------------------------------|-------
  1      | 8830     | 1.2238     | $1999.99   | Item #8830                                         | ✅     

  Avg distance: 1.2238
  Filter pass rate: 1/1 ✅
  Time: 0.206ms

  >>> STRATEGY 2: Post-Filter HNSW

  Post-Filter Results (k=1):
  Rank   | Item ID  | Distance   | Price      | Title                                              | Filter
  ------|----------|------------|------------|----------------------------------------------------|-------
  1      | 8830     | 1.2238     | $1999.99   | Item #8830                                         | ✅     

  Avg distance: 1.2238
  Filter pass rate: 1/1 ✅
  Time: 0.603ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  DETAILED COMPARISON:
    Common items: 1/10 (100.0% overlap)
    TRUE Bitmap avg distance: 1.2238
    Post-Filter avg distance:   1.2238
    ⚖️  Same average distance

    Filter correctness:
      TRUE Bitmap: ✅ 1/1 pass filter
      Post-Filter: ✅ 1/1 pass filter

    Performance:
      TRUE Bitmap:      0.206ms
      Post-Filter:      0.603ms
      Winner: TRUE Bitmap (2.92x faster)
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 3/6: price > $200
--------------------------------------------------------------------------------------------------------------------------------------------
  Filter: price > $200
  Type: numeric
  Matching items (sampled): ~50 (0.50% selectivity)

  >>> STRATEGY 1: TRUE Bitmap Filter (Global HNSW)

  TRUE Bitmap Results (k=5):
  Rank   | Item ID  | Distance   | Price      | Title                                              | Filter
  ------|----------|------------|------------|----------------------------------------------------|-------
  1      | 8830     | 1.2238     | $1999.99   | Item #8830                                         | ✅     
  2      | 453      | 1.2583     | $395.00    | Item #453                                          | ✅     
  3      | 4538     | 1.2813     | $249.99    | Item #4538                                         | ✅     
  4      | 8188     | 1.2833     | $249.99    | Item #8188                                         | ✅     
  5      | 6127     | 1.2908     | $261.10    | Item #6127                                         | ✅     

  Avg distance: 1.2675
  Filter pass rate: 5/5 ✅
  Time: 0.214ms

  >>> STRATEGY 2: Post-Filter HNSW

  Post-Filter Results (k=1):
  Rank   | Item ID  | Distance   | Price      | Title                                              | Filter
  ------|----------|------------|------------|----------------------------------------------------|-------
  1      | 8830     | 1.2238     | $1999.99   | Item #8830                                         | ✅     

  Avg distance: 1.2238
  Filter pass rate: 1/1 ✅
  Time: 0.520ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  DETAILED COMPARISON:
    Common items: 1/10 (20.0% overlap)
    TRUE Bitmap avg distance: 1.2675
    Post-Filter avg distance:   1.2238
    ✅ Post-Filter found closer items (3.6% better)
    Items only in TRUE Bitmap: [4538, 8188, 453, 6127]

    Filter correctness:
      TRUE Bitmap: ✅ 5/5 pass filter
      Post-Filter: ✅ 1/1 pass filter

    Performance:
      TRUE Bitmap:      0.214ms
      Post-Filter:      0.520ms
      Winner: TRUE Bitmap (2.43x faster)
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 4/6: price > $100
--------------------------------------------------------------------------------------------------------------------------------------------
  Filter: price > $100
  Type: numeric
  Matching items (sampled): ~142 (1.42% selectivity)

  >>> STRATEGY 1: TRUE Bitmap Filter (Global HNSW)

  TRUE Bitmap Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Title                                              | Filter
  ------|----------|------------|------------|----------------------------------------------------|-------
  1      | 5919     | 1.0699     | $153.75    | Item #5919                                         | ✅     
  2      | 8507     | 1.1906     | $175.00    | Item #8507                                         | ✅     
  3      | 9943     | 1.1966     | $189.00    | Item #9943                                         | ✅     
  4      | 8830     | 1.2238     | $1999.99   | Item #8830                                         | ✅     
  5      | 6879     | 1.2278     | $102.01    | Item #6879                                         | ✅     
  6      | 6128     | 1.2355     | $110.00    | Item #6128                                         | ✅     
  7      | 8805     | 1.2368     | $147.21    | Item #8805                                         | ✅     
  8      | 9941     | 1.2425     | $184.00    | Item #9941                                         | ✅     
  9      | 453      | 1.2583     | $395.00    | Item #453                                          | ✅     
  10     | 3465     | 1.2620     | $114.95    | Item #3465                                         | ✅     

  Avg distance: 1.2144
  Filter pass rate: 10/10 ✅
  Time: 0.171ms

  >>> STRATEGY 2: Post-Filter HNSW

  Post-Filter Results (k=8):
  Rank   | Item ID  | Distance   | Price      | Title                                              | Filter
  ------|----------|------------|------------|----------------------------------------------------|-------
  1      | 5919     | 1.0699     | $153.75    | Item #5919                                         | ✅     
  2      | 8507     | 1.1906     | $175.00    | Item #8507                                         | ✅     
  3      | 9943     | 1.1966     | $189.00    | Item #9943                                         | ✅     
  4      | 8830     | 1.2238     | $1999.99   | Item #8830                                         | ✅     
  5      | 6879     | 1.2278     | $102.01    | Item #6879                                         | ✅     
  6      | 6128     | 1.2355     | $110.00    | Item #6128                                         | ✅     
  7      | 8805     | 1.2368     | $147.21    | Item #8805                                         | ✅     
  8      | 9941     | 1.2425     | $184.00    | Item #9941                                         | ✅     

  Avg distance: 1.2030
  Filter pass rate: 8/8 ✅
  Time: 0.476ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  DETAILED COMPARISON:
    Common items: 8/10 (80.0% overlap)
    TRUE Bitmap avg distance: 1.2144
    Post-Filter avg distance:   1.2030
    ✅ Post-Filter found closer items (1.0% better)
    Items only in TRUE Bitmap: [3465, 453]

    Filter correctness:
      TRUE Bitmap: ✅ 10/10 pass filter
      Post-Filter: ✅ 8/8 pass filter

    Performance:
      TRUE Bitmap:      0.171ms
      Post-Filter:      0.476ms
      Winner: TRUE Bitmap (2.79x faster)
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 5/6: price > $50
--------------------------------------------------------------------------------------------------------------------------------------------
  Filter: price > $50
  Type: numeric
  Matching items (sampled): ~346 (3.46% selectivity)

  >>> STRATEGY 1: TRUE Bitmap Filter (Global HNSW)

  TRUE Bitmap Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Title                                              | Filter
  ------|----------|------------|------------|----------------------------------------------------|-------
  1      | 5919     | 1.0699     | $153.75    | Item #5919                                         | ✅     
  2      | 7156     | 1.0933     | $79.99     | Item #7156                                         | ✅     
  3      | 8743     | 1.1133     | $65.69     | Item #8743                                         | ✅     
  4      | 4007     | 1.1194     | $87.99     | Item #4007                                         | ✅     
  5      | 7167     | 1.1203     | $59.00     | Item #7167                                         | ✅     
  6      | 9593     | 1.1359     | $54.98     | Item #9593                                         | ✅     
  7      | 5520     | 1.1570     | $78.00     | Item #5520                                         | ✅     
  8      | 3409     | 1.1870     | $54.99     | Item #3409                                         | ✅     
  9      | 8507     | 1.1906     | $175.00    | Item #8507                                         | ✅     
  10     | 2544     | 1.1955     | $57.99     | Item #2544                                         | ✅     

  Avg distance: 1.1382
  Filter pass rate: 10/10 ✅
  Time: 0.483ms

  >>> STRATEGY 2: Post-Filter HNSW

  Post-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Title                                              | Filter
  ------|----------|------------|------------|----------------------------------------------------|-------
  1      | 5919     | 1.0699     | $153.75    | Item #5919                                         | ✅     
  2      | 7156     | 1.0933     | $79.99     | Item #7156                                         | ✅     
  3      | 8743     | 1.1133     | $65.69     | Item #8743                                         | ✅     
  4      | 4007     | 1.1194     | $87.99     | Item #4007                                         | ✅     
  5      | 7167     | 1.1203     | $59.00     | Item #7167                                         | ✅     
  6      | 9593     | 1.1359     | $54.98     | Item #9593                                         | ✅     
  7      | 5520     | 1.1570     | $78.00     | Item #5520                                         | ✅     
  8      | 3409     | 1.1870     | $54.99     | Item #3409                                         | ✅     
  9      | 8507     | 1.1906     | $175.00    | Item #8507                                         | ✅     
  10     | 2544     | 1.1955     | $57.99     | Item #2544                                         | ✅     

  Avg distance: 1.1382
  Filter pass rate: 10/10 ✅
  Time: 0.596ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  DETAILED COMPARISON:
    Common items: 10/10 (100.0% overlap)
    TRUE Bitmap avg distance: 1.1382
    Post-Filter avg distance:   1.1382
    ⚖️  Same average distance

    Filter correctness:
      TRUE Bitmap: ✅ 10/10 pass filter
      Post-Filter: ✅ 10/10 pass filter

    Performance:
      TRUE Bitmap:      0.483ms
      Post-Filter:      0.596ms
      Winner: TRUE Bitmap (1.23x faster)
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 6/6: price > $25
--------------------------------------------------------------------------------------------------------------------------------------------
  Filter: price > $25
  Type: numeric
  Matching items (sampled): ~688 (6.88% selectivity)

  >>> STRATEGY 1: TRUE Bitmap Filter (Global HNSW)

  TRUE Bitmap Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Title                                              | Filter
  ------|----------|------------|------------|----------------------------------------------------|-------
  1      | 5919     | 1.0699     | $153.75    | Item #5919                                         | ✅     
  2      | 7156     | 1.0933     | $79.99     | Item #7156                                         | ✅     
  3      | 8743     | 1.1133     | $65.69     | Item #8743                                         | ✅     
  4      | 4007     | 1.1194     | $87.99     | Item #4007                                         | ✅     
  5      | 7167     | 1.1203     | $59.00     | Item #7167                                         | ✅     
  6      | 5938     | 1.1322     | $38.16     | Item #5938                                         | ✅     
  7      | 9593     | 1.1359     | $54.98     | Item #9593                                         | ✅     
  8      | 3967     | 1.1371     | $31.25     | Item #3967                                         | ✅     
  9      | 7578     | 1.1375     | $30.99     | Item #7578                                         | ✅     
  10     | 6732     | 1.1377     | $39.99     | Item #6732                                         | ✅     

  Avg distance: 1.1197
  Filter pass rate: 10/10 ✅
  Time: 0.335ms

  >>> STRATEGY 2: Post-Filter HNSW

  Post-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Title                                              | Filter
  ------|----------|------------|------------|----------------------------------------------------|-------
  1      | 5919     | 1.0699     | $153.75    | Item #5919                                         | ✅     
  2      | 7156     | 1.0933     | $79.99     | Item #7156                                         | ✅     
  3      | 8743     | 1.1133     | $65.69     | Item #8743                                         | ✅     
  4      | 4007     | 1.1194     | $87.99     | Item #4007                                         | ✅     
  5      | 7167     | 1.1203     | $59.00     | Item #7167                                         | ✅     
  6      | 5938     | 1.1322     | $38.16     | Item #5938                                         | ✅     
  7      | 9593     | 1.1359     | $54.98     | Item #9593                                         | ✅     
  8      | 3967     | 1.1371     | $31.25     | Item #3967                                         | ✅     
  9      | 7578     | 1.1375     | $30.99     | Item #7578                                         | ✅     
  10     | 6732     | 1.1377     | $39.99     | Item #6732                                         | ✅     

  Avg distance: 1.1197
  Filter pass rate: 10/10 ✅
  Time: 0.357ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  DETAILED COMPARISON:
    Common items: 10/10 (100.0% overlap)
    TRUE Bitmap avg distance: 1.1197
    Post-Filter avg distance:   1.1197
    ⚖️  Same average distance

    Filter correctness:
      TRUE Bitmap: ✅ 10/10 pass filter
      Post-Filter: ✅ 10/10 pass filter

    Performance:
      TRUE Bitmap:      0.335ms
      Post-Filter:      0.357ms
      Winner: TRUE Bitmap (1.07x faster)
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

============================================================================================================================================
QUERY 2/3: 'wireless bluetooth headphones'
============================================================================================================================================

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 1/6: price > $2000
--------------------------------------------------------------------------------------------------------------------------------------------
  Filter: price > $2000
  Type: numeric
  Matching items (sampled): ~1 (0.01% selectivity)

  >>> STRATEGY 1: TRUE Bitmap Filter (Global HNSW)
  No results or error

  >>> STRATEGY 2: Post-Filter HNSW
  No results or error

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  DETAILED COMPARISON:
    Cannot compare (insufficient results)
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 2/6: price > $500
--------------------------------------------------------------------------------------------------------------------------------------------
  Filter: price > $500
  Type: numeric
  Matching items (sampled): ~15 (0.15% selectivity)

  >>> STRATEGY 1: TRUE Bitmap Filter (Global HNSW)

  TRUE Bitmap Results (k=1):
  Rank   | Item ID  | Distance   | Price      | Title                                              | Filter
  ------|----------|------------|------------|----------------------------------------------------|-------
  1      | 7230     | 1.2032     | $899.95    | Item #7230                                         | ✅     

  Avg distance: 1.2032
  Filter pass rate: 1/1 ✅
  Time: 0.141ms

  >>> STRATEGY 2: Post-Filter HNSW

  Post-Filter Results (k=1):
  Rank   | Item ID  | Distance   | Price      | Title                                              | Filter
  ------|----------|------------|------------|----------------------------------------------------|-------
  1      | 7230     | 1.2032     | $899.95    | Item #7230                                         | ✅     

  Avg distance: 1.2032
  Filter pass rate: 1/1 ✅
  Time: 0.524ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  DETAILED COMPARISON:
    Common items: 1/10 (100.0% overlap)
    TRUE Bitmap avg distance: 1.2032
    Post-Filter avg distance:   1.2032
    ⚖️  Same average distance

    Filter correctness:
      TRUE Bitmap: ✅ 1/1 pass filter
      Post-Filter: ✅ 1/1 pass filter

    Performance:
      TRUE Bitmap:      0.141ms
      Post-Filter:      0.524ms
      Winner: TRUE Bitmap (3.72x faster)
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 3/6: price > $200
--------------------------------------------------------------------------------------------------------------------------------------------
  Filter: price > $200
  Type: numeric
  Matching items (sampled): ~50 (0.50% selectivity)

  >>> STRATEGY 1: TRUE Bitmap Filter (Global HNSW)

  TRUE Bitmap Results (k=4):
  Rank   | Item ID  | Distance   | Price      | Title                                              | Filter
  ------|----------|------------|------------|----------------------------------------------------|-------
  1      | 7230     | 1.2032     | $899.95    | Item #7230                                         | ✅     
  2      | 3499     | 1.2368     | $445.99    | Item #3499                                         | ✅     
  3      | 4879     | 1.2392     | $209.99    | Item #4879                                         | ✅     
  4      | 9257     | 1.2479     | $298.00    | Item #9257                                         | ✅     

  Avg distance: 1.2318
  Filter pass rate: 4/4 ✅
  Time: 0.217ms

  >>> STRATEGY 2: Post-Filter HNSW

  Post-Filter Results (k=1):
  Rank   | Item ID  | Distance   | Price      | Title                                              | Filter
  ------|----------|------------|------------|----------------------------------------------------|-------
  1      | 7230     | 1.2032     | $899.95    | Item #7230                                         | ✅     

  Avg distance: 1.2032
  Filter pass rate: 1/1 ✅
  Time: 0.532ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  DETAILED COMPARISON:
    Common items: 1/10 (25.0% overlap)
    TRUE Bitmap avg distance: 1.2318
    Post-Filter avg distance:   1.2032
    ✅ Post-Filter found closer items (2.4% better)
    Items only in TRUE Bitmap: [9257, 3499, 4879]

    Filter correctness:
      TRUE Bitmap: ✅ 4/4 pass filter
      Post-Filter: ✅ 1/1 pass filter

    Performance:
      TRUE Bitmap:      0.217ms
      Post-Filter:      0.532ms
      Winner: TRUE Bitmap (2.45x faster)
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 4/6: price > $100
--------------------------------------------------------------------------------------------------------------------------------------------
  Filter: price > $100
  Type: numeric
  Matching items (sampled): ~142 (1.42% selectivity)

  >>> STRATEGY 1: TRUE Bitmap Filter (Global HNSW)

  TRUE Bitmap Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Title                                              | Filter
  ------|----------|------------|------------|----------------------------------------------------|-------
  1      | 3381     | 1.0714     | $129.00    | Item #3381                                         | ✅     
  2      | 7221     | 1.1635     | $137.93    | Item #7221                                         | ✅     
  3      | 2394     | 1.2001     | $129.95    | Item #2394                                         | ✅     
  4      | 7230     | 1.2032     | $899.95    | Item #7230                                         | ✅     
  5      | 3167     | 1.2243     | $143.95    | Item #3167                                         | ✅     
  6      | 3499     | 1.2368     | $445.99    | Item #3499                                         | ✅     
  7      | 4879     | 1.2392     | $209.99    | Item #4879                                         | ✅     
  8      | 9257     | 1.2479     | $298.00    | Item #9257                                         | ✅     
  9      | 7587     | 1.2486     | $129.99    | Item #7587                                         | ✅     
  10     | 3465     | 1.2688     | $114.95    | Item #3465                                         | ✅     

  Avg distance: 1.2104
  Filter pass rate: 10/10 ✅
  Time: 0.153ms

  >>> STRATEGY 2: Post-Filter HNSW

  Post-Filter Results (k=6):
  Rank   | Item ID  | Distance   | Price      | Title                                              | Filter
  ------|----------|------------|------------|----------------------------------------------------|-------
  1      | 3381     | 1.0714     | $129.00    | Item #3381                                         | ✅     
  2      | 7221     | 1.1635     | $137.93    | Item #7221                                         | ✅     
  3      | 2394     | 1.2001     | $129.95    | Item #2394                                         | ✅     
  4      | 7230     | 1.2032     | $899.95    | Item #7230                                         | ✅     
  5      | 3167     | 1.2243     | $143.95    | Item #3167                                         | ✅     
  6      | 7587     | 1.2486     | $129.99    | Item #7587                                         | ✅     

  Avg distance: 1.1852
  Filter pass rate: 6/6 ✅
  Time: 0.455ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  DETAILED COMPARISON:
    Common items: 6/10 (60.0% overlap)
    TRUE Bitmap avg distance: 1.2104
    Post-Filter avg distance:   1.1852
    ✅ Post-Filter found closer items (2.1% better)
    Items only in TRUE Bitmap: [9257, 3465, 3499, 4879]

    Filter correctness:
      TRUE Bitmap: ✅ 10/10 pass filter
      Post-Filter: ✅ 6/6 pass filter

    Performance:
      TRUE Bitmap:      0.153ms
      Post-Filter:      0.455ms
      Winner: TRUE Bitmap (2.98x faster)
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 5/6: price > $50
--------------------------------------------------------------------------------------------------------------------------------------------
  Filter: price > $50
  Type: numeric
  Matching items (sampled): ~346 (3.46% selectivity)

  >>> STRATEGY 1: TRUE Bitmap Filter (Global HNSW)

  TRUE Bitmap Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Title                                              | Filter
  ------|----------|------------|------------|----------------------------------------------------|-------
  1      | 5167     | 1.0570     | $59.00     | Item #5167                                         | ✅     
  2      | 3381     | 1.0714     | $129.00    | Item #3381                                         | ✅     
  3      | 5977     | 1.0963     | $81.52     | Item #5977                                         | ✅     
  4      | 4935     | 1.1036     | $65.35     | Item #4935                                         | ✅     
  5      | 5405     | 1.1478     | $65.05     | Item #5405                                         | ✅     
  6      | 7221     | 1.1635     | $137.93    | Item #7221                                         | ✅     
  7      | 6004     | 1.1745     | $59.99     | Item #6004                                         | ✅     
  8      | 6075     | 1.1866     | $65.00     | Item #6075                                         | ✅     
  9      | 2394     | 1.2001     | $129.95    | Item #2394                                         | ✅     
  10     | 7230     | 1.2032     | $899.95    | Item #7230                                         | ✅     

  Avg distance: 1.1404
  Filter pass rate: 10/10 ✅
  Time: 0.341ms

  >>> STRATEGY 2: Post-Filter HNSW

  Post-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Title                                              | Filter
  ------|----------|------------|------------|----------------------------------------------------|-------
  1      | 5167     | 1.0570     | $59.00     | Item #5167                                         | ✅     
  2      | 3381     | 1.0714     | $129.00    | Item #3381                                         | ✅     
  3      | 5977     | 1.0963     | $81.52     | Item #5977                                         | ✅     
  4      | 4935     | 1.1036     | $65.35     | Item #4935                                         | ✅     
  5      | 5405     | 1.1478     | $65.05     | Item #5405                                         | ✅     
  6      | 7221     | 1.1635     | $137.93    | Item #7221                                         | ✅     
  7      | 6004     | 1.1745     | $59.99     | Item #6004                                         | ✅     
  8      | 6075     | 1.1866     | $65.00     | Item #6075                                         | ✅     
  9      | 2394     | 1.2001     | $129.95    | Item #2394                                         | ✅     
  10     | 7230     | 1.2032     | $899.95    | Item #7230                                         | ✅     

  Avg distance: 1.1404
  Filter pass rate: 10/10 ✅
  Time: 0.492ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  DETAILED COMPARISON:
    Common items: 10/10 (100.0% overlap)
    TRUE Bitmap avg distance: 1.1404
    Post-Filter avg distance:   1.1404
    ⚖️  Same average distance

    Filter correctness:
      TRUE Bitmap: ✅ 10/10 pass filter
      Post-Filter: ✅ 10/10 pass filter

    Performance:
      TRUE Bitmap:      0.341ms
      Post-Filter:      0.492ms
      Winner: TRUE Bitmap (1.44x faster)
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 6/6: price > $25
--------------------------------------------------------------------------------------------------------------------------------------------
  Filter: price > $25
  Type: numeric
  Matching items (sampled): ~688 (6.88% selectivity)

  >>> STRATEGY 1: TRUE Bitmap Filter (Global HNSW)

  TRUE Bitmap Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Title                                              | Filter
  ------|----------|------------|------------|----------------------------------------------------|-------
  1      | 8781     | 1.0360     | $28.05     | Item #8781                                         | ✅     
  2      | 5167     | 1.0570     | $59.00     | Item #5167                                         | ✅     
  3      | 3381     | 1.0714     | $129.00    | Item #3381                                         | ✅     
  4      | 5977     | 1.0963     | $81.52     | Item #5977                                         | ✅     
  5      | 4935     | 1.1036     | $65.35     | Item #4935                                         | ✅     
  6      | 6125     | 1.1216     | $26.24     | Item #6125                                         | ✅     
  7      | 2424     | 1.1353     | $26.90     | Item #2424                                         | ✅     
  8      | 5405     | 1.1478     | $65.05     | Item #5405                                         | ✅     
  9      | 4098     | 1.1633     | $30.27     | Item #4098                                         | ✅     
  10     | 7221     | 1.1635     | $137.93    | Item #7221                                         | ✅     

  Avg distance: 1.1096
  Filter pass rate: 10/10 ✅
  Time: 0.247ms

  >>> STRATEGY 2: Post-Filter HNSW

  Post-Filter Results (k=4):
  Rank   | Item ID  | Distance   | Price      | Title                                              | Filter
  ------|----------|------------|------------|----------------------------------------------------|-------
  1      | 8781     | 1.0360     | $28.05     | Item #8781                                         | ✅     
  2      | 5167     | 1.0570     | $59.00     | Item #5167                                         | ✅     
  3      | 3381     | 1.0714     | $129.00    | Item #3381                                         | ✅     
  4      | 5977     | 1.0963     | $81.52     | Item #5977                                         | ✅     

  Avg distance: 1.0652
  Filter pass rate: 4/4 ✅
  Time: 0.331ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  DETAILED COMPARISON:
    Common items: 4/10 (40.0% overlap)
    TRUE Bitmap avg distance: 1.1096
    Post-Filter avg distance:   1.0652
    ✅ Post-Filter found closer items (4.2% better)
    Items only in TRUE Bitmap: [4098, 4935, 6125, 7221, 2424, 5405]

    Filter correctness:
      TRUE Bitmap: ✅ 10/10 pass filter
      Post-Filter: ✅ 4/4 pass filter

    Performance:
      TRUE Bitmap:      0.247ms
      Post-Filter:      0.331ms
      Winner: TRUE Bitmap (1.34x faster)
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

============================================================================================================================================
QUERY 3/3: 'gaming mouse RGB'
============================================================================================================================================

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 1/6: price > $2000
--------------------------------------------------------------------------------------------------------------------------------------------
  Filter: price > $2000
  Type: numeric
  Matching items (sampled): ~1 (0.01% selectivity)

  >>> STRATEGY 1: TRUE Bitmap Filter (Global HNSW)

  TRUE Bitmap Results (k=1):
  Rank   | Item ID  | Distance   | Price      | Title                                              | Filter
  ------|----------|------------|------------|----------------------------------------------------|-------
  1      | 24       | 1.2509     | $2080.00   | Item #24                                           | ✅     

  Avg distance: 1.2509
  Filter pass rate: 1/1 ✅
  Time: 0.529ms

  >>> STRATEGY 2: Post-Filter HNSW
  No results or error

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  DETAILED COMPARISON:
    Cannot compare (insufficient results)
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 2/6: price > $500
--------------------------------------------------------------------------------------------------------------------------------------------
  Filter: price > $500
  Type: numeric
  Matching items (sampled): ~15 (0.15% selectivity)

  >>> STRATEGY 1: TRUE Bitmap Filter (Global HNSW)

  TRUE Bitmap Results (k=2):
  Rank   | Item ID  | Distance   | Price      | Title                                              | Filter
  ------|----------|------------|------------|----------------------------------------------------|-------
  1      | 8830     | 1.1537     | $1999.99   | Item #8830                                         | ✅     
  2      | 24       | 1.2509     | $2080.00   | Item #24                                           | ✅     

  Avg distance: 1.2023
  Filter pass rate: 2/2 ✅
  Time: 0.250ms

  >>> STRATEGY 2: Post-Filter HNSW
  No results or error

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  DETAILED COMPARISON:
    Cannot compare (insufficient results)
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 3/6: price > $200
--------------------------------------------------------------------------------------------------------------------------------------------
  Filter: price > $200
  Type: numeric
  Matching items (sampled): ~50 (0.50% selectivity)

  >>> STRATEGY 1: TRUE Bitmap Filter (Global HNSW)

  TRUE Bitmap Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Title                                              | Filter
  ------|----------|------------|------------|----------------------------------------------------|-------
  1      | 8830     | 1.1537     | $1999.99   | Item #8830                                         | ✅     
  2      | 8188     | 1.1665     | $249.99    | Item #8188                                         | ✅     
  3      | 4538     | 1.2294     | $249.99    | Item #4538                                         | ✅     
  4      | 7832     | 1.2423     | $272.94    | Item #7832                                         | ✅     
  5      | 24       | 1.2509     | $2080.00   | Item #24                                           | ✅     
  6      | 9232     | 1.2907     | $250.00    | Item #9232                                         | ✅     
  7      | 9257     | 1.2957     | $298.00    | Item #9257                                         | ✅     
  8      | 7316     | 1.3181     | $229.95    | Item #7316                                         | ✅     
  9      | 8140     | 1.3285     | $328.28    | Item #8140                                         | ✅     
  10     | 6952     | 1.4780     | $269.86    | Item #6952                                         | ✅     

  Avg distance: 1.2754
  Filter pass rate: 10/10 ✅
  Time: 0.400ms

  >>> STRATEGY 2: Post-Filter HNSW

  Post-Filter Results (k=2):
  Rank   | Item ID  | Distance   | Price      | Title                                              | Filter
  ------|----------|------------|------------|----------------------------------------------------|-------
  1      | 8188     | 1.1665     | $249.99    | Item #8188                                         | ✅     
  2      | 4538     | 1.2294     | $249.99    | Item #4538                                         | ✅     

  Avg distance: 1.1979
  Filter pass rate: 2/2 ✅
  Time: 0.618ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  DETAILED COMPARISON:
    Common items: 2/10 (20.0% overlap)
    TRUE Bitmap avg distance: 1.2754
    Post-Filter avg distance:   1.1979
    ✅ Post-Filter found closer items (6.5% better)
    Items only in TRUE Bitmap: [6952, 9257, 8140, 9232, 7316, 7832, 24, 8830]

    Filter correctness:
      TRUE Bitmap: ✅ 10/10 pass filter
      Post-Filter: ✅ 2/2 pass filter

    Performance:
      TRUE Bitmap:      0.400ms
      Post-Filter:      0.618ms
      Winner: TRUE Bitmap (1.55x faster)
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 4/6: price > $100
--------------------------------------------------------------------------------------------------------------------------------------------
  Filter: price > $100
  Type: numeric
  Matching items (sampled): ~142 (1.42% selectivity)

  >>> STRATEGY 1: TRUE Bitmap Filter (Global HNSW)

  TRUE Bitmap Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Title                                              | Filter
  ------|----------|------------|------------|----------------------------------------------------|-------
  1      | 8830     | 1.1537     | $1999.99   | Item #8830                                         | ✅     
  2      | 8188     | 1.1665     | $249.99    | Item #8188                                         | ✅     
  3      | 9943     | 1.1695     | $189.00    | Item #9943                                         | ✅     
  4      | 9326     | 1.1834     | $155.88    | Item #9326                                         | ✅     
  5      | 9941     | 1.1849     | $184.00    | Item #9941                                         | ✅     
  6      | 9988     | 1.1875     | $199.00    | Item #9988                                         | ✅     
  7      | 6879     | 1.1948     | $102.01    | Item #6879                                         | ✅     
  8      | 9801     | 1.2069     | $174.00    | Item #9801                                         | ✅     
  9      | 7587     | 1.2108     | $129.99    | Item #7587                                         | ✅     
  10     | 3465     | 1.2118     | $114.95    | Item #3465                                         | ✅     

  Avg distance: 1.1870
  Filter pass rate: 10/10 ✅
  Time: 0.327ms

  >>> STRATEGY 2: Post-Filter HNSW

  Post-Filter Results (k=9):
  Rank   | Item ID  | Distance   | Price      | Title                                              | Filter
  ------|----------|------------|------------|----------------------------------------------------|-------
  1      | 8188     | 1.1665     | $249.99    | Item #8188                                         | ✅     
  2      | 9326     | 1.1834     | $155.88    | Item #9326                                         | ✅     
  3      | 9941     | 1.1849     | $184.00    | Item #9941                                         | ✅     
  4      | 9801     | 1.2069     | $174.00    | Item #9801                                         | ✅     
  5      | 3465     | 1.2118     | $114.95    | Item #3465                                         | ✅     
  6      | 4869     | 1.2265     | $119.00    | Item #4869                                         | ✅     
  7      | 4538     | 1.2294     | $249.99    | Item #4538                                         | ✅     
  8      | 4095     | 1.2296     | $179.00    | Item #4095                                         | ✅     
  9      | 5919     | 1.2391     | $153.75    | Item #5919                                         | ✅     

  Avg distance: 1.2087
  Filter pass rate: 9/9 ✅
  Time: 0.581ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  DETAILED COMPARISON:
    Common items: 5/10 (50.0% overlap)
    TRUE Bitmap avg distance: 1.1870
    Post-Filter avg distance:   1.2087
    ✅ TRUE Bitmap found closer items (1.8% better)
    Items only in TRUE Bitmap: [7587, 9988, 9943, 8830, 6879]
    Items only in Post-Filter: [np.int64(4538), np.int64(4095), np.int64(4869), np.int64(5919)]

    Filter correctness:
      TRUE Bitmap: ✅ 10/10 pass filter
      Post-Filter: ✅ 9/9 pass filter

    Performance:
      TRUE Bitmap:      0.327ms
      Post-Filter:      0.581ms
      Winner: TRUE Bitmap (1.77x faster)
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 5/6: price > $50
--------------------------------------------------------------------------------------------------------------------------------------------
  Filter: price > $50
  Type: numeric
  Matching items (sampled): ~346 (3.46% selectivity)

  >>> STRATEGY 1: TRUE Bitmap Filter (Global HNSW)

  TRUE Bitmap Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Title                                              | Filter
  ------|----------|------------|------------|----------------------------------------------------|-------
  1      | 9766     | 1.1022     | $60.00     | Item #9766                                         | ✅     
  2      | 8830     | 1.1537     | $1999.99   | Item #8830                                         | ✅     
  3      | 8188     | 1.1665     | $249.99    | Item #8188                                         | ✅     
  4      | 9943     | 1.1695     | $189.00    | Item #9943                                         | ✅     
  5      | 9326     | 1.1834     | $155.88    | Item #9326                                         | ✅     
  6      | 9941     | 1.1849     | $184.00    | Item #9941                                         | ✅     
  7      | 9988     | 1.1875     | $199.00    | Item #9988                                         | ✅     
  8      | 2632     | 1.1901     | $61.95     | Item #2632                                         | ✅     
  9      | 1176     | 1.1910     | $75.98     | Item #1176                                         | ✅     
  10     | 5405     | 1.1917     | $65.05     | Item #5405                                         | ✅     

  Avg distance: 1.1721
  Filter pass rate: 10/10 ✅
  Time: 0.304ms

  >>> STRATEGY 2: Post-Filter HNSW

  Post-Filter Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Title                                              | Filter
  ------|----------|------------|------------|----------------------------------------------------|-------
  1      | 9766     | 1.1022     | $60.00     | Item #9766                                         | ✅     
  2      | 8188     | 1.1665     | $249.99    | Item #8188                                         | ✅     
  3      | 9326     | 1.1834     | $155.88    | Item #9326                                         | ✅     
  4      | 9941     | 1.1849     | $184.00    | Item #9941                                         | ✅     
  5      | 2632     | 1.1901     | $61.95     | Item #2632                                         | ✅     
  6      | 5405     | 1.1917     | $65.05     | Item #5405                                         | ✅     
  7      | 9679     | 1.1967     | $89.99     | Item #9679                                         | ✅     
  8      | 9801     | 1.2069     | $174.00    | Item #9801                                         | ✅     
  9      | 2861     | 1.2099     | $98.69     | Item #2861                                         | ✅     
  10     | 3465     | 1.2118     | $114.95    | Item #3465                                         | ✅     

  Avg distance: 1.1844
  Filter pass rate: 10/10 ✅
  Time: 0.491ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  DETAILED COMPARISON:
    Common items: 6/10 (60.0% overlap)
    TRUE Bitmap avg distance: 1.1721
    Post-Filter avg distance:   1.1844
    ✅ TRUE Bitmap found closer items (1.1% better)
    Items only in TRUE Bitmap: [1176, 9988, 8830, 9943]
    Items only in Post-Filter: [np.int64(9801), np.int64(3465), np.int64(2861), np.int64(9679)]

    Filter correctness:
      TRUE Bitmap: ✅ 10/10 pass filter
      Post-Filter: ✅ 10/10 pass filter

    Performance:
      TRUE Bitmap:      0.304ms
      Post-Filter:      0.491ms
      Winner: TRUE Bitmap (1.61x faster)
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

--------------------------------------------------------------------------------------------------------------------------------------------
TEST 6/6: price > $25
--------------------------------------------------------------------------------------------------------------------------------------------
  Filter: price > $25
  Type: numeric
  Matching items (sampled): ~688 (6.88% selectivity)

  >>> STRATEGY 1: TRUE Bitmap Filter (Global HNSW)

  TRUE Bitmap Results (k=10):
  Rank   | Item ID  | Distance   | Price      | Title                                              | Filter
  ------|----------|------------|------------|----------------------------------------------------|-------
  1      | 5359     | 1.0787     | $37.99     | Item #5359                                         | ✅     
  2      | 9348     | 1.0850     | $34.99     | Item #9348                                         | ✅     
  3      | 9766     | 1.1022     | $60.00     | Item #9766                                         | ✅     
  4      | 9945     | 1.1438     | $29.99     | Item #9945                                         | ✅     
  5      | 3169     | 1.1531     | $48.99     | Item #3169                                         | ✅     
  6      | 8830     | 1.1537     | $1999.99   | Item #8830                                         | ✅     
  7      | 8188     | 1.1665     | $249.99    | Item #8188                                         | ✅     
  8      | 9943     | 1.1695     | $189.00    | Item #9943                                         | ✅     
  9      | 7354     | 1.1729     | $32.55     | Item #7354                                         | ✅     
  10     | 9326     | 1.1834     | $155.88    | Item #9326                                         | ✅     

  Avg distance: 1.1409
  Filter pass rate: 10/10 ✅
  Time: 0.505ms

  >>> STRATEGY 2: Post-Filter HNSW

  Post-Filter Results (k=8):
  Rank   | Item ID  | Distance   | Price      | Title                                              | Filter
  ------|----------|------------|------------|----------------------------------------------------|-------
  1      | 5359     | 1.0787     | $37.99     | Item #5359                                         | ✅     
  2      | 9348     | 1.0850     | $34.99     | Item #9348                                         | ✅     
  3      | 9766     | 1.1022     | $60.00     | Item #9766                                         | ✅     
  4      | 3169     | 1.1531     | $48.99     | Item #3169                                         | ✅     
  5      | 8188     | 1.1665     | $249.99    | Item #8188                                         | ✅     
  6      | 7354     | 1.1729     | $32.55     | Item #7354                                         | ✅     
  7      | 9326     | 1.1834     | $155.88    | Item #9326                                         | ✅     
  8      | 9941     | 1.1849     | $184.00    | Item #9941                                         | ✅     

  Avg distance: 1.1408
  Filter pass rate: 8/8 ✅
  Time: 0.418ms

  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
  DETAILED COMPARISON:
    Common items: 7/10 (70.0% overlap)
    TRUE Bitmap avg distance: 1.1409
    Post-Filter avg distance:   1.1408
    ✅ Post-Filter found closer items (0.0% better)
    Items only in TRUE Bitmap: [9945, 8830, 9943]
    Items only in Post-Filter: [np.int64(9941)]

    Filter correctness:
      TRUE Bitmap: ✅ 10/10 pass filter
      Post-Filter: ✅ 8/8 pass filter

    Performance:
      TRUE Bitmap:      0.505ms
      Post-Filter:      0.418ms
      Winner:  Post-Filter (1.21x faster)
  ────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────

============================================================================================================================================
📊 SUMMARY
============================================================================================================================================

Query                          | Filter               | Sel%   | TRUE(ms)   | POST(ms)   | Overlap  | Winner         
--------------------------------------------------------------------------------------------------------------------------------------------
laptop computer high quality   | price > $500         |  0.15% |     0.206 |     0.603 |  100.0% | TRUE Bitmap    
laptop computer high quality   | price > $200         |  0.50% |     0.214 |     0.520 |   20.0% | TRUE Bitmap    
laptop computer high quality   | price > $100         |  1.42% |     0.171 |     0.476 |   80.0% | TRUE Bitmap    
laptop computer high quality   | price > $50          |  3.46% |     0.483 |     0.596 |  100.0% | TRUE Bitmap    
laptop computer high quality   | price > $25          |  6.88% |     0.335 |     0.357 |  100.0% | TRUE Bitmap    
wireless bluetooth headphone   | price > $500         |  0.15% |     0.141 |     0.524 |  100.0% | TRUE Bitmap    
wireless bluetooth headphone   | price > $200         |  0.50% |     0.217 |     0.532 |   25.0% | TRUE Bitmap    
wireless bluetooth headphone   | price > $100         |  1.42% |     0.153 |     0.455 |   60.0% | TRUE Bitmap    
wireless bluetooth headphone   | price > $50          |  3.46% |     0.341 |     0.492 |  100.0% | TRUE Bitmap    
wireless bluetooth headphone   | price > $25          |  6.88% |     0.247 |     0.331 |   40.0% | TRUE Bitmap    
gaming mouse RGB               | price > $200         |  0.50% |     0.400 |     0.618 |   20.0% | TRUE Bitmap    
gaming mouse RGB               | price > $100         |  1.42% |     0.327 |     0.581 |   50.0% | TRUE Bitmap    
gaming mouse RGB               | price > $50          |  3.46% |     0.304 |     0.491 |   60.0% | TRUE Bitmap    
gaming mouse RGB               | price > $25          |  6.88% |     0.505 |     0.418 |   70.0% | Post-Filter    

============================================================================================================================================
Experiment complete! Results saved to:
  - Log:    detailed_comparison_20251218_124249.log
  - JSON:  detailed_comparison_20251218_124249.json
============================================================================================================================================
